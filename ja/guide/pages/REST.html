<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>8.1 REST 2.3.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>&#12452;&#12531;&#12488;&#12525;&#12480;&#12463;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>&#12473;&#12479;&#12540;&#12488;&#12460;&#12452;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/upgradingFromPreviousVersionsOfGrails.html"><strong>3</strong><span>Grails&#19979;&#20301;&#12496;&#12540;&#12472;&#12519;&#12531;&#12363;&#12425;&#12398;&#26356;&#26032;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/conf.html"><strong>4</strong><span>&#35373;&#23450;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/commandLine.html"><strong>5</strong><span>&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/GORM.html"><strong>6</strong><span>O/R&#12510;&#12483;&#12500;&#12531;&#12464; (GORM)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/theWebLayer.html"><strong>7</strong><span>Web&#12524;&#12452;&#12516;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/webServices.html"><strong>8</strong><span>Web&#12469;&#12540;&#12499;&#12473;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/async.html"><strong>9</strong><span>&#38750;&#21516;&#26399;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/validation.html"><strong>10</strong><span>&#12496;&#12522;&#12487;&#12540;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/services.html"><strong>11</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>12</strong><span>&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>13</strong><span>&#22269;&#38555;&#21270;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>14</strong><span>&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/plugins.html"><strong>15</strong><span>&#12503;&#12521;&#12464;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/spring.html"><strong>16</strong><span>Grails&#12392;Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/hibernate.html"><strong>17</strong><span>Grails&#12392;Hibernate</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/scaffolding.html"><strong>18</strong><span>&#12473;&#12459;&#12483;&#12501;&#12457;&#12523;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/deployment.html"><strong>19</strong><span>&#12487;&#12503;&#12525;&#12452;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>20</strong><span>Grails&#12395;&#36002;&#29486;&#12377;&#12427;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/traslateReport.html"><strong>21</strong><span>&#32763;&#35379;&#12524;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="http://grails.org" target="_blank"><img alt="Grails Logo" title="The Grails Framework" src="../../../img/grails.png" border="0"/></a></span>
        
        
        <span id="sponsor"><a href="http://springsource.com" target="_blank"><img alt="SpringSource Logo" title="SpringSource - Weapons for the War on Java Complexity" src="../../../img/springsource-logo.png" border="0"/></a></span>
        
    </div>
    <p>See the light - agile, industrial strength, rapid web application development made easy</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/theWebLayer.html">&lt;&lt; <strong>7</strong><span>Web&#12524;&#12452;&#12516;</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/async.html"><strong>9</strong><span>&#38750;&#21516;&#26399;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;</span> >></a></div>
                


                <div class="project">
                    <h1>8.1 REST - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith</p>

                    <p><strong>Version:</strong> 2.3.0.BUILD-SNAPSHOT</p>

                    
                    <p><strong>Translated by:</strong> T.Yamamoto, Japanese Grails Doc Translating Team. <br/>【注意】このドキュメントの内容はスナップショットバージョンを元に*意訳*されているため、一部現行バージョンでは未対応の機能もあります。</p>
                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#domainResources"><strong>8.1</strong><span>REST&#12522;&#12477;&#12540;&#12473;&#12392;&#12375;&#12390;&#12489;&#12513;&#12452;&#12531;&#12463;&#12521;&#12473;&#12434;&#20351;&#29992;&#12377;&#12427;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#urlMappings"><strong>8.2</strong><span>REST&#12522;&#12477;&#12540;&#12473;&#12408;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#linkingToResources"><strong>8.3</strong><span>REST&#12522;&#12477;&#12540;&#12473;&#12408;&#12398;&#12522;&#12531;&#12463;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#versioningResources"><strong>8.4</strong><span>REST&#12522;&#12477;&#12540;&#12473;&#12398;&#12496;&#12540;&#12472;&#12519;&#12491;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#restfulControllers"><strong>8.5</strong><span>REST&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12398;&#23455;&#35013;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#extendingRestfulController"><strong>8.5.1</strong><span>RestfulController&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12398;&#25313;&#24373;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#restControllersStepByStep"><strong>8.5.2</strong><span>REST&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12398;&#23455;&#35013;&#12473;&#12486;&#12483;&#12503;&#12496;&#12452;&#12473;&#12486;&#12483;&#12503;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#generatingRestControllers"><strong>8.5.3</strong><span>&#12473;&#12459;&#12483;&#12501;&#12457;&#12523;&#12489;&#12434;&#20351;&#29992;&#12375;&#12390;REST&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12434;&#29983;&#25104;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#renderers"><strong>8.6</strong><span>&#12524;&#12473;&#12509;&#12531;&#12473;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12398;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#defaultRenderers"><strong>8.6.1</strong><span>&#12487;&#12501;&#12457;&#12523;&#12488;&#12524;&#12531;&#12480;&#12521;&#12540;&#12398;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#objectMarshallers"><strong>8.6.2</strong><span>&#12459;&#12473;&#12479;&#12512;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12510;&#12540;&#12471;&#12515;&#12521;&#12398;&#30331;&#37682;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#namedObjectMarshallers"><strong>8.6.3</strong><span>&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12539;&#12510;&#12540;&#12471;&#12515;&#12521;&#12398;&#21517;&#21069;&#20184;&#12365;&#23450;&#32681;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#objectMarshallerInterface"><strong>8.6.4</strong><span>ObjectMarshaller&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473;&#12408;&#12398;&#23455;&#35013;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#customRenderers"><strong>8.6.5</strong><span>&#12459;&#12473;&#12479;&#12512;&#12524;&#12531;&#12480;&#12521;&#12540;&#12398;&#23455;&#35013;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#gspRenderers"><strong>8.6.6</strong><span>GSP&#12434;&#20351;&#29992;&#12375;&#12383;&#12459;&#12473;&#12479;&#12512;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#hypermedia"><strong>8.7</strong><span>&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#29366;&#24907;&#12456;&#12531;&#12472;&#12531;&#12392;&#12375;&#12390;&#12398;&#12495;&#12452;&#12497;&#12540;&#12513;&#12487;&#12451;&#12450;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#hal"><strong>8.7.1</strong><span>HAL&#12469;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#atom"><strong>8.7.2</strong><span>Atom&#12469;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#vndError"><strong>8.7.3</strong><span>Vnd.Error&#12469;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#binding"><strong>8.8</strong><span>&#12522;&#12477;&#12540;&#12473;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;&#12398;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;</span></a>
                    </div>
                    
                </div>
                

                
<a name="8.1 REST"><!-- Legacy link --></a>
<h2 id="REST">8.1 REST</h2>
<div class="hidden-block">REST is not really a technology in itself, but more an architectural pattern. REST is very simple and just involves using plain XML or JSON as a communication medium, combined with URL patterns that are "representational" of the underlying system, and HTTP methods such as GET, PUT, POST and DELETE.</div>
RESTは本来SOAPのようなプロトコルではなく、アーキテクチャスタイルです。RESTは非常に単純です。簡素なXMLやJSONを通信媒体に用いて、基本的なシステムとGET、PUT、POSTおよびDELETEといったHTTPメソッドを「表現する」URLパターンを組み合わせています。<p class="paragraph"/><div class="hidden-block">Each HTTP method maps to an action type. For example GET for retrieving data, POST for creating data, PUT for updating and so on.</div>
それぞれのHTTPメソッドは異なるアクションにマップします。例えば、GETはデータ検索、PUTはデータ作成、POSTは更新などとマップします。<p class="paragraph"/>Grails includes flexible features that make it easy to create RESTful APIs. Creating a RESTful resource can be as simple as one line of code, as demonstrated in the next section.<p class="paragraph"/>
<blockquote class="warning">
Grails 2.3で大幅な更新が行われるため、日本語版のみ旧仕様のドキュメントを一時的に残しておきます。
以下、Grails 2.2.x 以前の仕様になります。
</blockquote><p class="paragraph"/><h4>URLパターン <div class="hidden-block">URL patterns</div></h4><p class="paragraph"/><div class="hidden-block">The first step to implementing REST with Grails is to provide RESTful <a href="../guide/single.html#urlmappings" class="guide">URL mappings</a>:</div>
GrailsでRESTを実装する１つ目のやり方として、以下のようにRESTfulな<a href="../guide/single.html#urlmappings" class="guide">URLマッピング</a>を提供する方法があります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">static</span> mappings = &#123;
   <span class="java&#45;quote">"/product/$id?"</span>(resource:<span class="java&#45;quote">"product"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">This maps the URI <code>/product</code> onto a <code>ProductController</code>. Each HTTP method such as GET, PUT, POST and DELETE map to unique actions within the controller as outlined by the table below:</div>
この例では、<code>/product</code>というURIを<code>ProductController</code>に紐付けます。GET、PUT、POSTおよびDELETEといった各HTTPメソッドは、下表に示したようにコントローラ内の一意のアクションに紐付きます。<p class="paragraph"/><div class="hidden-block">
Method     | Action
</div><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th>メソッド</th><th>アクション</th></tr><tr class="table-odd"><td><code>GET</code></td><td><code>show</code></td></tr><tr class="table-even"><td><code>PUT</code></td><td><code>update</code></td></tr><tr class="table-odd"><td><code>POST</code></td><td><code>save</code></td></tr><tr class="table-even"><td><code>DELETE</code></td><td><code>delete</code></td></tr></table><p class="paragraph"/><div class="hidden-block">In addition, Grails provides automatic XML or JSON marshalling for you.</div>
さらにGrailsではXMLまたJSONでの自動マーシャリングも提供しています。<p class="paragraph"/><div class="hidden-block">You can alter how HTTP methods are handled by using URL Mappings to <a href="../guide/single.html#mappingHTTP" class="guide">map to HTTP methods</a>:</div>
<a href="../guide/single.html#mappingHTTP" class="guide">HTTPメソッドをマップ</a>する仕組みを使用して、URLマッピングをHTTPメソッドにハンドルすることが可能です:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/product/$id"</span>(controller: <span class="java&#45;quote">"product"</span>) &#123;
    action = &#91;GET: <span class="java&#45;quote">"show"</span>, PUT: <span class="java&#45;quote">"update"</span>, DELETE: <span class="java&#45;quote">"delete"</span>, POST: <span class="java&#45;quote">"save"</span>&#93;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">However, unlike the <code>resource</code> argument used previously, in this case Grails will not provide automatic XML or JSON marshalling unless you specify the <code>parseRequest</code> argument:</div>
ただし、この場合は、先の<code>resource</code>と違い、<code>parseRequest</code>変数をURLマッピングに指定しないと、XMLやJSONのマーシャリングを自動的には行いません:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/product/$id"</span>(controller: <span class="java&#45;quote">"product"</span>, parseRequest: <span class="java&#45;keyword">true</span>) &#123;
    action = &#91;GET: <span class="java&#45;quote">"show"</span>, PUT: <span class="java&#45;quote">"update"</span>, DELETE: <span class="java&#45;quote">"delete"</span>, POST: <span class="java&#45;quote">"save"</span>&#93;
&#125;</pre></div><p class="paragraph"/><h4>HTTPメソッド <div class="hidden-block">HTTP Methods</div></h4><p class="paragraph"/><div class="hidden-block">In the previous section you saw how you can easily define URL mappings that map specific HTTP methods onto specific controller actions. Writing a REST client that then sends a specific HTTP method is then easy (example in Groovy's HTTPBuilder module):</div>
前のセクションでは、特定のHTTPメソッドを特定のコントローラのアクションにマップするURLマッピングが、どれほど簡単に定義できるかを見ました。特定のHTTPメソッドを送信するRESTクライアントを作成するのも簡単です。（GroovyのHTTPBuilderモジュールの例）:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> groovyx.net.http.&#42;
<span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> groovyx.net.http.ContentType.JSON<p class="paragraph"/>def http = <span class="java&#45;keyword">new</span> HTTPBuilder(<span class="java&#45;quote">"http://localhost:8080/amazon"</span>)<p class="paragraph"/> http.request(Method.GET, JSON) &#123;
     url.path = '/book/list'
     response.success = &#123; resp, json &#45;&#62;
         <span class="java&#45;keyword">for</span> (book in json.books) &#123;
             println book.title
         &#125;
     &#125;
 &#125;</pre></div><p class="paragraph"/><div class="hidden-block">Issuing a request with a method other than <code>GET</code> or <code>POST</code> from a regular browser is not possible without some help from Grails. When defining a <a href="../ref/Tags/form.html" class="tags">form</a> you can specify an alternative method such as <code>DELETE</code>:</div>
通常のブラウザから<code>GET</code>または<code>POST</code>以外のメソッドの要求を発行するためには、Grailsの援助が必要となります。フォーム(<a href="../ref/Tags/form.html" class="tags">form</a>)を定義する時に、<code>DELETE</code>のような別のメソッドを指定できます。<p class="paragraph"/><div class="code"><pre>&#60;g:form controller=<span class="java&#45;quote">"book"</span> method=<span class="java&#45;quote">"DELETE"</span>&#62;
    ..
&#60;/g:form&#62;</pre></div><p class="paragraph"/><div class="hidden-block">Grails will send a hidden parameter called <code>_method</code>, which will be used as the request's HTTP method. Another alternative for changing the method for non-browser clients is to use the <code>X-HTTP-Method-Override</code> to specify the alternative method name.</div>
Grailsは<code>_method</code>というhiddenパラメータを送信し、これをHTTPメソッドの要求として使用します。ブラウザ以外のクライアントでメソッドを変更するためには、<code>X-HTTP-Method-Override</code>を使用して代替メソッド名を指定します。<p class="paragraph"/><h4>XMLマーシャリング - 読み取り <div class="hidden-block">XML Marshalling - Reading</div></h4><p class="paragraph"/><div class="hidden-block">The controller can use Grails' <a href="../guide/single.html#xmlAndJSON" class="guide">XML marshalling</a> support to implement the GET method:</div>
Grailsの<a href="../guide/single.html#xmlAndJSON" class="guide">XMLマーシャリングの機能</a>をコントローラで使用して、GETメソッドの実装できます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.converters.XML<p class="paragraph"/>class ProductController &#123;
    def show() &#123;
        <span class="java&#45;keyword">if</span> (params.id &#38;&#38; Product.exists(params.id)) &#123;
            def p = Product.findByName(params.id)
            render p as XML
        &#125;
        <span class="java&#45;keyword">else</span> &#123;
            def all = Product.list()
            render all as XML
        &#125;
    &#125;
    ..
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If there is an <code>id</code> we search for the <code>Product</code> by name and return it, otherwise we return all Products. This way if we go to <code>/products</code> we get all products, otherwise if we go to <code>/product/MacBook</code> we only get a MacBook.</div>
この例では、検索した内容が存在した場合はその<code>Product</code>を返し、無い場合は全てを返します。この方法で、<code>/product</code>にアクセスすると全リストが返り、<code>/product/MacBook</code>等指定して存在した場合は、その<code>Product</code>を返します。<p class="paragraph"/><h4>XMLマーシャリング - 更新 <div class="hidden-block">XML Marshalling - Updating</div></h4><p class="paragraph"/><div class="hidden-block">To support updates such as <code>PUT</code> and <code>POST</code> you can use the <a href="../ref/Controllers/params.html" class="controllers">params</a> object which Grails enhances with the ability to read an incoming XML packet. Given an incoming XML packet of:</div>
<code>PUT</code>および<code>POSTの</code>ような更新をサポートするには、Grailsの<a href="../ref/Controllers/params.html" class="controllers">params</a>オブジェクトを利用してXMLを読み取ることができます。次のようなXMLを受信したとします。<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;?xml version=<span class="xml&#45;quote">"1.0"</span> encoding=<span class="xml&#45;quote">"ISO&#45;8859&#45;1"</span>?&#62;</span>
<span class="xml&#45;tag">&#60;product&#62;</span>
    <span class="xml&#45;tag">&#60;name&#62;</span>MacBook<span class="xml&#45;tag">&#60;/name&#62;</span>
    <span class="xml&#45;tag">&#60;vendor id=<span class="xml&#45;quote">"12"</span>&#62;</span>
        <span class="xml&#45;tag">&#60;name&#62;</span>Apple<span class="xml&#45;tag">&#60;/name&#62;</span>
     <span class="xml&#45;tag">&#60;/vender&#62;</span>
<span class="xml&#45;tag">&#60;/product&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">you can read this XML packet using the same techniques described in the <a href="../guide/single.html#dataBinding" class="guide">Data Binding</a> section, using the <a href="../ref/Controllers/params.html" class="controllers">params</a> object:</div>
このXMLを読み込むには、<a href="../guide/single.html#dataBinding" class="guide">データバインディング</a>の章に記述された内容と同じく、<a href="../ref/Controllers/params.html" class="controllers">params</a>オブジェクトから取得することができます:<p class="paragraph"/><div class="code"><pre>def save() &#123;
    def p = <span class="java&#45;keyword">new</span> Product(params.product)<p class="paragraph"/>    <span class="java&#45;keyword">if</span> (p.save()) &#123;
        render p as XML
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        render p.errors
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In this example by indexing into the <code>params</code> object using the <code>product</code> key we can automatically create and bind the XML using the <code>Product</code> constructor. An interesting aspect of the line:</div>
この例では、<code>params</code>オブジェクトから<code>product</code>キーを使用して取得し、<code>Product</code>クラスのコンストラクタに渡すことで自動的にバインドします:<p class="paragraph"/><div class="code"><pre>def p = <span class="java&#45;keyword">new</span> Product(params.product)</pre></div><p class="paragraph"/><div class="hidden-block">is that it requires no code changes to deal with a form submission that submits form data, or an XML request, or a JSON request.</div>
興味深い点は、JSONリクエストまたはXMLリクエストの対応は、通常のフォーム送信の対応とそれほど変わりがないということです。<p class="paragraph"/><blockquote class="note">
<div class="hidden-block">If you require different responses to different clients (REST, HTML etc.) you can use <a href="../guide/single.html#contentNegotiation" class="guide">content negotation</a></div>
異なったクライアント（REST、HTMLなど）に対する異なった応答が必要な場合は、<a href="../guide/single.html#contentNegotiation" class="guide">コンテントネゴシエーション</a>を使用することができます。
</blockquote><p class="paragraph"/><div class="hidden-block">The <code>Product</code> object is then saved and rendered as XML, otherwise an error message is produced using Grails' <a href="../guide/single.html#validation" class="guide">validation</a> capabilities in the form:</div>
<code>Product</code>オブジェクトが保存され、XMLとして描写されます。問題が起きた場合は、Grailsの<a href="../guide/single.html#validation" class="guide">バリデーション</a>機能によってエラーメッセージが返信されます。<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;error&#62;</span>
   <span class="xml&#45;tag">&#60;message&#62;</span>The property 'title' of class 'Person' must be specified<span class="xml&#45;tag">&#60;/message&#62;</span>
<span class="xml&#45;tag">&#60;/error&#62;</span></pre></div><p class="paragraph"/><h4>JAX-RSでのREST <div class="hidden-block">REST with JAX-RS</div></h4><p class="paragraph"/><div class="hidden-block">There also is a <a href="http://grails.org/plugin/jaxrs" target="blank">JAX-RS Plugin</a> which can be used to build web services based on the Java API for RESTful Web Services (<a href="http://jcp.org/en/jsr/summary?id=311" target="blank">JSR 311: JAX-RS</a>).</div>
RESTful Webサービス用のJava APIをベースとしたRESTを、<a href="http://grails.org/plugin/jaxrs" target="blank">JAX-RSプラグイン</a>構築することも可能です。  (<a href="http://jcp.org/en/jsr/summary?id=311" target="blank">JSR 311: JAX-RS</a>)



<h2 id="domainResources">8.1.1 RESTリソースとしてドメインクラスを使用する</h2>
<div class="hidden-block">
The easiest way to create a RESTful API in Grails is to expose a domain class as a REST resource. This can be done by adding the <code>grails.rest.Resource</code> transformation to any domain class:
</div>
GrailsでRESTFul APIを簡単に作成する方法は、ドメインクラスをRESTリソースとして公開することです。
これは、任意のドメインクラスに<code>grails.rest.Resource</code>変換を追加するだけです:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.&#42;<p class="paragraph"/>@Resource(uri='/books')
class Book &#123;<p class="paragraph"/>    <span class="java&#45;object">String</span> title<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        title blank:<span class="java&#45;keyword">false</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Simply by adding the <code>Resource</code> transformation and specifying a URI, your domain class will automatically be available as a REST resource in either XML or JSON formats. The transformation will automatically register the necessary <a href="../guide/single.html#restfulMappings" class="guide">RESTful URL mapping</a> and create a controller called <code>BookController</code>.
</div>
単に<code>Resource</code>変換を追加してURIを指定することで、ドメインクラスは自動的にXML、JSONフォーマットをサポートするRESTリソースとして使用可能になります。
この変換は、必要な<a href="../guide/single.html#restfulMappings" class="guide">RESTful URL マッピング</a>を自動的に登録し、<code>BookController</code>と呼ばれるコントローラを作成します。<p class="paragraph"/><div class="hidden-block">
You can try it out by adding some test data to <code>BootStrap.groovy</code>:
</div>
いくつかのテストデータを<code>BootStrap.groovy</code>に追加することで動作確認ができます。<p class="paragraph"/><div class="code"><pre>def init = &#123; servletContext &#45;&#62;<p class="paragraph"/>        <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Stand"</span>).save()
        <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Shining"</span>).save()
    &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
And then hitting the URL http://localhost:8080/myapp/books/1, which will render the response like:
</div>
そして、<code>http://localhost:8080/myapp/books/1</code>のURLをたたいてみると、以下のようなレスポンスが表示されます:<p class="paragraph"/><div class="code"><pre>&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;
&#60;book id=<span class="java&#45;quote">"1"</span>&#62;
    &#60;title&#62;The Stand&#60;/title&#62;
&#60;/book&#62;</pre></div><p class="paragraph"/><div class="hidden-block">
If you change the URL to <code>http://localhost:8080/myapp/books/1.json</code> you will get a JSON response such as:
</div>
URLを<code>http://localhost:8080/myapp/books/1.json</code>に変更すると、以下のようなJSONレスポンスが得られます:<p class="paragraph"/>
<div class="code"><pre>&#123;<span class="java&#45;quote">"id"</span>:1,<span class="java&#45;quote">"title"</span>:<span class="java&#45;quote">"The Stand"</span>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
If you wish to change the default to return JSON instead of XML, you can do this by setting the <code>formats</code> attribute of the <code>Resource</code> transformation:
</div>
XMLの代わりにデフォルトでJSONを返したい場合は、<code>Resource</code>変換の<code>formats</code>属性を設定します。<p class="paragraph"/> <div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.&#42;<p class="paragraph"/>@Resource(uri='/books', formats=&#91;'json', 'xml'&#93;)
class Book &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
With the above example JSON will be prioritized. The list that is passed should contain the names of the formats that the resource should expose. The names of formats are defined in the <code>grails.mime.types</code> setting of <code>Config.groovy</code>:
</div>
上記の例ではJSONを優先するように設定しています。
この一覧には公開するフォーマットの名前を含む必要があります。
フォーマットの名前は<code>Config.groovy</code>の<code>grails.mime.types</code>設定の中で定義されます:<p class="paragraph"/><div class="code"><pre>grails.mime.types = &#91;
    &#8230;
    json:          &#91;'application/json', 'text/json'&#93;,
    &#8230;
    xml:           &#91;'text/xml', 'application/xml'&#93;
&#93;</pre></div><p class="paragraph"/><div class="hidden-block">
See the section on <a href="../guide/single.html#contentNegotiation" class="guide">Configuring Mime Types</a> in the user guide for more information.
</div>
さらなる情報はユーザガイド内の<a href="../guide/single.html#contentNegotiation" class="guide">MIMEタイプの定義</a>を参照してください。<p class="paragraph"/><div class="hidden-block">
Instead of using the file extension in the URI, you can also obtain a JSON response using the ACCEPT header. Here's an example using the Unix <code>curl</code> tool:
</div>
URIでファイル拡張子を使う代わりに、ACCEPTヘッダを使ってJSONレスポンスを得ることもできます。
これはUnixの<code>curl</code>コマンドを使用した例です:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/json"</span> localhost:8080/myapp/books/1
&#123;<span class="java&#45;quote">"id"</span>:1,<span class="java&#45;quote">"title"</span>:<span class="java&#45;quote">"The Stand"</span>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This works thanks to Grails' <a href="../guide/single.html#contentNegotiation" class="guide">Content Negotiation</a> features.
</div>
これはGrailsの<a href="../guide/single.html#contentNegotiation" class="guide">コンテントネゴシエーション</a>機能のおかげで動作しています。<p class="paragraph"/><div class="hidden-block">
You can create a new resource by issuing a <code>POST</code> request:
</div>
<code>POST</code>リクエスを発行することで新たなリソースを作成できます:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;X POST &#45;H <span class="java&#45;quote">"Content&#45;Type: application/json"</span> &#45;d '&#123;<span class="java&#45;quote">"title"</span>:<span class="java&#45;quote">"Along Came A Spider"</span>&#125;' localhost:8080/myapp/books
HTTP/1.1 201 Created
Server: Apache&#45;Coyote/1.1
...</pre></div><p class="paragraph"/><div class="hidden-block">
Updating can be done with a <code>PUT</code> request:
</div>
更新には<code>PUT</code>リクエストを使用します:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;X PUT &#45;H <span class="java&#45;quote">"Content&#45;Type: application/json"</span> &#45;d '&#123;<span class="java&#45;quote">"title"</span>:<span class="java&#45;quote">"Along Came A Spider"</span>&#125;' localhost:8080/myapp/books/1
HTTP/1.1 200 OK
Server: Apache&#45;Coyote/1.1
...</pre></div><p class="paragraph"/><div class="hidden-block">
Finally a resource can be deleted with <code>DELETE</code> request:
</div>
最後に、<code>DELETE</code>リクエストでリソースが削除されます:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;X DELETE localhost:8080/myapp/books/1
HTTP/1.1 204 No Content
Server: Apache&#45;Coyote/1.1
...</pre></div><p class="paragraph"/><div class="hidden-block">
As you can see, the <code>Resource</code> transformation enables all of the HTTP method verbs on the resource. You can enable only read-only capabilities by setting the <code>readOnly</code> attribute to true:
</div>
ここまで見てきたように、<code>Resource</code>変換はリソースに対してHTTPメソッドに対応する動作のすべてを有効にします。
<code>readOnly</code>属性をtrueに設定することで読み取り専用にできます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.&#42;<p class="paragraph"/>@Resource(uri='/books', readOnly=<span class="java&#45;keyword">true</span>)
class Book &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
In this case POST, PUT and DELETE requests will be forbidden.
</div>
この場合は、POST、PUT、そしてDELETEリクエストを受付けません。



<h2 id="urlMappings">8.1.2 RESTリソースへのマッピング</h2>
<div class="hidden-block">
If you prefer to keep the declaration of the URL mapping in your <code>UrlMappings.groovy</code> file then simply removing the <code>uri</code> attribute of the <code>Resource</code> transformation and adding the following line to <code>UrlMappings.groovy</code> will suffice:
</div>
もし<code>UrlMappings.groovy</code>内にURLマッピングの宣言を保持したい場合は、単に<code>Resource</code>変換から<code>uri</code>属性を削除して、<code>UrlMappings.groovy</code>へ以下の行を追加するだけです:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/books"</span>(resources:<span class="java&#45;quote">"book"</span>)</pre></div><p class="paragraph"/><div class="hidden-block">
Extending your API to include more end points then becomes trivial:
</div>
APIを拡張して、さらにエンドポイントを追加したい場合は以下のようにします:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/books"</span>(resources:<span class="java&#45;quote">"book"</span>) &#123;
    <span class="java&#45;quote">"/publisher"</span>(controller:<span class="java&#45;quote">"publisher"</span>, method:<span class="java&#45;quote">"GET"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The above example will expose the URI <code>/books/1/publisher</code>.
</div>
上記の例は<code>/books/1/publisher</code>というURIで公開されます。<p class="paragraph"/><div class="hidden-block">
A more detailed explanation on <a href="../guide/single.html#restfulMappings" class="guide">creating RESTful URL mappings</a> can be found in the <a href="../guide/single.html#urlMappings" class="guide">URL Mappings section</a> of the user guide.
</div>
<a href="../guide/single.html#restfulMappings" class="guide">RESTful URLマッピングの作成</a>についてのより詳細な説明は、ユーザガイドの<a href="../guide/single.html#urlMappings" class="guide">URLマッピング</a>内にあります。



<h2 id="linkingToResources">8.1.3 RESTリソースへのリンク</h2>
<div class="hidden-block">
The <code>link</code> tag offers an easy way to link to any domain class resource:
</div>
<code>link</code>タグは、任意のドメインクラスリソースへリンクする簡単な方法を提供します:<p class="paragraph"/><div class="code"><pre>&#60;g:link resource=<span class="java&#45;quote">"$&#123;book&#125;"</span>&#62;My Link&#60;/g:link&#62;</pre></div><p class="paragraph"/>


<h2 id="versioningResources">8.1.4 RESTリソースのバージョニング</h2>
<div class="hidden-block">
A common requirement with a REST API is to expose different versions at the same time. There are a few ways this can be achieved in Grails.
</div>
REST APIの一般的な要件として、同時に異なるバージョンの公開があります。
Grailsでこれを実現するにはいくつかの方法があります。<p class="paragraph"/><div class="hidden-block">h4. Versioning using the URI</div>
<h4>URIを使ったバージョンニング</h4><p class="paragraph"/><div class="hidden-block">A common approach is to use the URI to version APIs (although this approach is discouraged in favour of Hypermedia). For example, you can define the following URL mappings:</div>
一般的な方法は、各バージョンのAPIへのURIを使うことです(しかし、この方法よりはハイパーメディアを使った方法をお勧めします)。
例えば、以下のようにURLマッピングを定義できます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/books/v1"</span>(resources:<span class="java&#45;quote">"book"</span>, namespace:'v1')
<span class="java&#45;quote">"/books/v2"</span>(resources:<span class="java&#45;quote">"book"</span>, namespace:'v2')</pre></div><p class="paragraph"/><div class="hidden-block">That will match the following controllers:</div>
これは以下のコントローラに対応付きます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> myapp.v1<p class="paragraph"/>class BookController &#123;
    <span class="java&#45;keyword">static</span> namespace = 'v1'
&#125;<p class="paragraph"/><span class="java&#45;keyword">package</span> myapp.v2<p class="paragraph"/>class BookController &#123;
    <span class="java&#45;keyword">static</span> namespace = 'v2'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">This approach has the disadvantage of requiring two different URI namespaces for your API.</div>
この方法は、APIに対して異なる2つのURIのネームスペースが必要となるという欠点があります。<p class="paragraph"/><div class="hidden-block">h4. Versioning with the Accept-Version header</div>
<h4>Accept-Versionヘッダを使ったバージョンニング</h4><p class="paragraph"/><div class="hidden-block">As an alternative Grails supports the passing of an <code>Accept-Version</code> header from clients. For example you can define the following URL mappings:</div>
代わりに、Grailsはクライアントからの<code>Accept-Version</code>ヘッダによる制御をサポートしています。
例えば以下のようにURLマッピングを定義できます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/books"</span>(version:'1.0', resources:<span class="java&#45;quote">"book"</span>, namespace:'v1')
<span class="java&#45;quote">"/books"</span>(version:'2.0', resources:<span class="java&#45;quote">"book"</span>, namespace:'v2')</pre></div><p class="paragraph"/><div class="hidden-block">Then in the client simply pass which version you need using the <code>Accept-Version</code> header:</div>
そして、クライアントからは<code>Accept-Version</code>ヘッダを使ってバージョンを渡すだけです:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept&#45;Version: 1.0"</span> &#45;X GET http://localhost:8080/myapp/books</pre></div><p class="paragraph"/><div class="hidden-block">h4. Versioning using Hypermedia / Mime Types</div>
<h4>ハイパーメディア/MIMEタイプを使ったバージョニング</h4><p class="paragraph"/><div class="hidden-block">
Another approach to versioning is to use Mime Type definitions to declare the version of your custom media types (see the section on "Hypermedia as the Engine of Application State" for more information about Hypermedia concepts). For example, in <code>Config.groovy</code> you can declare a custom Mime Type for your resource that includes a version parameter (the 'v' parameter):
</div>
他のバージョニング方法は、MIMEタイプ定義を使い、カスタムメディアタイプとしてバージョンを宣言する方法です(ハイパーメディアのコンセプトについての、より詳しい情報は「アプリケーション状態エンジンとしてのハイパーメディア」を参照してください)。
例えば<code>Config.groovy</code>内に、リソースに対してバージョンパラメータ('v'のパラメータ)を含んだカスタムMIMEタイプを宣言できます:<p class="paragraph"/><div class="code"><pre>grails.mime.types = &#91;
    all: '&#42;/&#42;',
    book: <span class="java&#45;quote">"application/vnd.books.org.book+json;v=1.0"</span>,
    bookv2: <span class="java&#45;quote">"application/vnd.books.org.book+json;v=2.0"</span>,
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block"><blockquote class="warning">
It is critical that place your new mime types after the 'all' Mime Type because if the Content Type of the request cannot be established then the first entry in the map is used for the response. If you have your new Mime Type at the top then Grails will always try and send back your new Mime Type if the requested Mime Type cannot be established.
</blockquote></div>
<blockquote class="warning">
'all'のMIMEタイプの後に、新たなMIMEタイプを宣言しているのには重要な意味があります。
なぜなら、リクエストのコンテンツタイプが不明な場合は、マップ内の最初のエントリがレスポンスのコンテンツタイプとして使われるためです。
もし、新たなMIMEタイプが先頭にあるとすると、リクエストのコンテンツタイプが不明な場合に、Grailsは新たなMIMEタイプを常に送り返すことになります。
</blockquote><p class="paragraph"/><div class="hidden-block">Then override the renderer (see the section on "Customizing Response Rendering" for more information on custom renderers) to send back the custom Mime Type in <code>grails-app/conf/spring/resourses.groovy</code>:</div>
次に、<code>grails-app/conf/spring/resourses.groovy</code>内でカスタムMIMEタイプを返すようにレンダリング設定(カスタムレンダリングのより詳しい情報は「レスポンスレンダリングのカスタマイズ」を参照してください)を上書きします:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.renderer.json.&#42;
<span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.mime.&#42;<p class="paragraph"/>beans = &#123;
    bookRendererV1(JsonRenderer, myapp.v1.Book, <span class="java&#45;keyword">new</span> MimeType(<span class="java&#45;quote">"application/vnd.books.org.book+json"</span>, &#91;v:<span class="java&#45;quote">"1.0"</span>&#93;)) 
    bookRendererV2(JsonRenderer, myapp.v2.Book, <span class="java&#45;keyword">new</span> MimeType(<span class="java&#45;quote">"application/vnd.books.org.book+json"</span>, &#91;v:<span class="java&#45;quote">"2.0"</span>&#93;)) 
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then using the <code>Accept</code> header you can specify which version you need using the Mime Type:</div>
これで、<code>Accept</code>ヘッダでMIMEタイプを使いバージョンを指定できます。<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/vnd.books.org.book+json;v=1.0"</span> &#45;X GET http://localhost:8080/myapp/books</pre></div><p class="paragraph"/><p class="paragraph"/>


<h2 id="restfulControllers">8.1.5 RESTコントローラの実装</h2>
<div class="hidden-block">The <code>Resource</code> transformation is a quick way to get started, but typically you'll want to customize the controller logic, the rendering of the response or extend the API to include additional actions.</div>
<code>Resource</code>変換はREST APIを構築する手っ取り早い方法です。
しかし大抵の場合、レスポンスのレンダリングを変更したり、APIを拡張するなど、コントローラのロジックをカスタマイズしたくなります。



<h2 id="extendingRestfulController">8.1.5.1 RestfulControllerスーパークラスの拡張</h2>
<div class="hidden-block">The easiest way to get started doing so is to create a new controller for your resource that extends the <code>grails.rest.RestfulController</code> super class. For example:</div>
まず始めの簡単な方法は、<code>grails.rest.RestfulController</code>をスーパークラスとして、リソースに対して新たなコントローラを作成する方法です。
例えば:<p class="paragraph"/><div class="code"><pre>class BookController <span class="java&#45;keyword">extends</span> RestfulController &#123;
    <span class="java&#45;keyword">static</span> responseFormats = &#91;'json', 'xml'&#93;
    BookController() &#123;
        <span class="java&#45;keyword">super</span>(Book)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">To customize any logic you can just override the appropriate action. The following table provides the names of the action names and the URIs they map to:</div>
ロジックをカスタマイズするには、カスタマイズが必要なアクションを上書きします。
以下のテーブルは、アクションの名前と、それに対応するURIです:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th>HTTP Method</th><th>URI</th><th>Controller Action</th></tr><tr class="table-odd"><td>GET</td><td>/books</td><td>index</td></tr><tr class="table-even"><td>GET</td><td>/books/create</td><td>create</td></tr><tr class="table-odd"><td>POST</td><td>/books</td><td>save</td></tr><tr class="table-even"><td>GET</td><td>/books/${id}</td><td>show</td></tr><tr class="table-odd"><td>GET</td><td>/books/${id}/edit</td><td>edit</td></tr><tr class="table-even"><td>PUT</td><td>/books/${id}</td><td>update</td></tr><tr class="table-odd"><td>DELETE</td><td>/books/${id}</td><td>delete</td></tr></table><p class="paragraph"/><div class="hidden-block"><blockquote class="note">
Note that the <code>create</code> and <code>edit</code> actions are only needed if the controller exposes an HTML interface. 
</blockquote></div>
<blockquote class="note">
<code>create</code>と<code>edit</code>アクションは、コントローラがHTMLインタフェースを公開する場合にのみ必要です。
</blockquote><p class="paragraph"/><div class="hidden-block">
As an example, if you have a <a href="../guide/single.html#restfulMappings" class="guide">nested resource</a> then you would typically want to query both the parent and the child identifiers. For example, given the following URL mapping:
</div>
例のように<a href="../guide/single.html#restfulMappings" class="guide">ネストしたリソース</a>の場合、大抵は親と子供の識別子が必要になります。
例えば以下のようなURLマッピングの場合:<p class="paragraph"/><div class="code"><pre><span class="java&#45;quote">"/authors"</span>(resources:'author') &#123;
    <span class="java&#45;quote">"/books"</span>(resources:'book')
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You could implement the nested controller as follows:</div>
次のように、ネストに対応したコントローラを実装できます:<p class="paragraph"/><div class="code"><pre>class BookController <span class="java&#45;keyword">extends</span> RestfulController &#123;
    <span class="java&#45;keyword">static</span> responseFormats = &#91;'json', 'xml'&#93;
    BookController() &#123;
        <span class="java&#45;keyword">super</span>(Book)
    &#125;<p class="paragraph"/>    @Override
    Book queryForResource(Serializable id) &#123;
        Book.where &#123;
            id == id &#38;&#38; author.id = params.authorId
        &#125;.find()
    &#125;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The example above subclasses <code>RestfulController</code> and overrides the <code>queryForResource</code> method to customize the query for the resource to take into account the parent resource.</div>
上記の例では、<code>RestfulController</code>のサブクラスで親リソースに対応するため、<code>queryForResource</code>メソッドをオーバーライドしてリソースのクエリをカスタマイズしています。<p class="paragraph"/>



<h2 id="restControllersStepByStep">8.1.5.2 RESTコントローラの実装ステップバイステップ</h2>
<div class="hidden-block">If you don't want to take advantage of the features provided by the <code>RestfulController</code> super class, then you can implement each HTTP verb yourself manually. The first step is to create a controller:</div>
もし、スーパークラスの<code>RestfulController</code>から提供される機能を使用しない場合は、それぞれHTTPメソッドに対応するアクションを自身で実装できます。
最初のステップはコントローラの作成です:<p class="paragraph"/><div class="code"><pre>$ grails create&#45;controller book</pre></div><p class="paragraph"/><div class="hidden-block">Then add some useful imports and enable readOnly by default:</div>
そして、いくつかの便利なインポートを追加し、デフォルトで読み取り専用にします:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.transaction.&#42;
<span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> org.springframework.http.HttpStatus.&#42;
<span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> org.springframework.http.HttpMethod.&#42;<p class="paragraph"/>@Transactional(readOnly = <span class="java&#45;keyword">true</span>)
class BookController &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Recall that each HTTP verb matches a particular Grails action according to the following conventions:</div>
HTTPメソッドのアクションは、以下の規約に従って、それぞれGrailsのアクションに対応付くことを思い出してください:<p class="paragraph"/>
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th>HTTP Method</th><th>URI</th><th>Controller Action</th></tr><tr class="table-odd"><td>GET</td><td>/books</td><td>index</td></tr><tr class="table-even"><td>GET</td><td>/books/${id}</td><td>show</td></tr><tr class="table-odd"><td>GET</td><td>/books/create</td><td>create</td></tr><tr class="table-even"><td>GET</td><td>/books/${id}/edit</td><td>edit</td></tr><tr class="table-odd"><td>POST</td><td>/books</td><td>save</td></tr><tr class="table-even"><td>PUT</td><td>/books/${id}</td><td>update</td></tr><tr class="table-odd"><td>DELETE</td><td>/books/${id}</td><td>delete</td></tr></table><p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The 'create' and 'edit' actions are already required if you plan to implement an HTML interface for the REST resource. They are there in order to render appropriate HTML forms to create and edit a resource. If this is not a requirement they can be discarded.
</blockquote>
</div>
<blockquote class="note">
'create'と'edit'アクションはRESTリソースに対して、HTMLインタフェースを実装する予定がある場合は必要です。
これらはリソースの追加、編集のHTMLフォームを表示するためにあります。
これが必要ない場合は無効にできます。
</blockquote><p class="paragraph"/><div class="hidden-block">The key to implementing REST actions is the <a href="../ref/Controllers/respond.html" class="controllers">respond</a> method introduced in Grails 2.3. The <code>respond</code> method tries to produce the most appropriate response for the requested content type (JSON, XML, HTML etc.)</div>
RESTアクションの実装の鍵は、Grails 2.3で導入された<a href="../ref/Controllers/respond.html" class="controllers">respond</a>メソッドです。
<code>respond</code>メソッドは、リクエストのCotent Type(JSON、XML、XMLなど)に対して、もっとも適切なレスポンスを生成しようとします。<p class="paragraph"/><div class="hidden-block">h4. Implementing the 'index' action</div>
<h4>'index'アクションの実装</h4><p class="paragraph"/><div class="hidden-block">
For example, to implement the <code>index</code> action, simply call the <code>respond</code> method passing the list of objects to respond with: 
</div>
例えば<code>index</code>アクションを実装するには、単にオブジェクトのリストと共に<code>respond</code>メソッドを呼びます:<p class="paragraph"/><div class="code"><pre>def index(<span class="java&#45;object">Integer</span> max) &#123;
    params.max = <span class="java&#45;object">Math</span>.min(max ?: 10, 100)
    respond Book.list(params), model:&#91;bookCount: Book.count()&#93;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Note that in the above example we also use the <code>model</code> argument of the <code>respond</code> method to supply the total count. This is only required if you plan to support pagination via some user interface.</div>
上記の例では、オブジェクトのリストに加えて、合計値を設定するために<code>respond</code>メソッドに<code>model</code>引数を渡しています。
これは、ユーザインタフェースでページングをサポートする場合にのみ必要です。<p class="paragraph"/><div class="hidden-block">The <code>respond</code> method will, using <a href="../guide/single.html#contentNegotiation" class="guide">Content Negotiation</a>, attempt to reply with the most appropriate response given the content type requested by the client (via the ACCEPT header or file extension).</div>
<code>respond</code>メソッドは、<a href="../guide/single.html#contentNegotiation" class="guide">コンテントネゴシエーション</a>を使って、クライントからリクエストされたコンテンツタイプから(ACCEPTヘッダまたはファイル拡張子から)、もっとも適切なレスポンスを返そうとします。<p class="paragraph"/><div class="hidden-block">If the content type is established to be HTML then a model will be produced such that the action above would be the equivalent of writing:</div>
もしコンテンツタイプがHTMLである場合は、上記のアクションは次のように書いた場合と同じような<code>model</code>を生成します:<p class="paragraph"/><div class="code"><pre>def index(<span class="java&#45;object">Integer</span> max) &#123;
    params.max = <span class="java&#45;object">Math</span>.min(max ?: 10, 100)
    &#91;bookList: Book.list(params), bookCount: Book.count()&#93;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">By providing an <code>index.gsp</code> file you can render an appropriate view for the given model. If the content type is something other than HTML then the <code>respond</code> method will attempt to lookup an appropriate <code>grails.rest.render.Renderer</code> instance that is capable of rendering the passed object. This is done by inspecting the <code>grails.rest.render.RendererRegistry</code>.</div>
そして、<code>index.gsp</code>ファイルを提供することで、与えられた<code>model</code>に対するビューが表示できます。
もし、コンテンツタイプがHTMLではない場合、<code>respond</code>メソッドは渡されたオブジェクトをレンダリングできる適切な<code>grails.rest.render.Renderer</code>のインスタンスを探します。
これは<code>grails.rest.render.RendererRegistry</code>から検索されます。<p class="paragraph"/><div class="hidden-block">By default there are already renderers configured for JSON and XML, to find out how to register a custom renderer see the section on "Customizing Response Rendering".</div>
デフォルトではJSONとXMLのレンダラーが設定されています。
カスタムレンダラーの登録の仕方は「レスポンスレンダリングのカスタマイズ」を参照してください。<p class="paragraph"/><div class="hidden-block">h4. Implementing the 'show' action</div>
<h4>'show'アクションの実装</h4><p class="paragraph"/><div class="hidden-block">The <code>show</code> action, which is used to display and individual resource by id, can be implemented in one line of Groovy code (excluding the method signature):</div>
<code>show</code>アクションはidによって個々のリソースを表示するためのものです。
これはGroovyコード1行で実装できます(メソッドのシグネチャを除く):<p class="paragraph"/><div class="code"><pre>def show(Book book) &#123;
    respond book
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
By specifying the domain instance as a parameter to the action Grails will automatically attempt to lookup the domain instance using the <code>id</code> parameter of the request. If the domain instance doesn't exist, then <code>null</code> will be passed into the action. The <code>respond</code> method will return a 404 error if null is passed otherwise once again it will attempt to render an appropriate response. If the format is HTML then an appropriate model will produced. The following action is functionally equivalent to the above action:
</div>
アクションパラメータとして特定のドメインインスタンスを指定すると、Grailsは自動的にリクエストの<code>id</code>パラメータからドメインインスタンスを検索しようとします。
もし、ドメインインスタンスが存在しない場合は、アクションへ<code>null</code>が渡されます。
<code>respond</code>メソッドはnullが渡された場合は404エラーを返します。
nullではない場合は、前と同じように適切なレスポンスを表示しようとします。
もし、フォーマットがHTMLの場合は適切な<code>model</code>を生成します。
以下のアクションは、上記のアクションと機能的に同じです:<p class="paragraph"/><div class="code"><pre>def show(Book book) &#123;
    <span class="java&#45;keyword">if</span>(book == <span class="java&#45;keyword">null</span>) &#123;
        render status:404
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        <span class="java&#45;keyword">return</span> &#91;book: book&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Implementing the 'save' action</div>
<h4>'save'アクションの実装</h4><p class="paragraph"/><div class="hidden-block">
The <code>save</code> action creates new resource representations. To start off, simply define an action that accepts a resource as the first argument and mark it as <code>Transactional</code> with the <code>grails.transaction.Transactional</code> transform:
</div>
<code>save</code>アクションは新たなリソースを保存します。
<code>save</code>アクションを簡単に実装するには、最初の引数にリソースをとるアクションを定義し、そのアクションに<code>grails.transaction.Transactional</code>変換を使って<code>Transactional</code>としてマークします:<p class="paragraph"/><div class="code"><pre>@Transactional
def save(Book book) &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then the first thing to do is check whether the resource has any <a href="../guide/single.html#validation" class="guide">validation errors</a> and if so respond with the errors:</div>
そして、最初にすべきことはリソースに<a href="../guide/single.html#validation" class="guide">バリデーションエラー</a>がないかチェックすることです。
エラーがある場合は<code>errors</code>を応答します:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">if</span>(book.hasErrors()) &#123;
    respond book.errors, view:'create' 
&#125;
<span class="java&#45;keyword">else</span> &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
In the case of HTML the 'create' view will be rendered again so the user can correct the invalid input. In the case of other formats (JSON, XML etc.), the errors object itself will be rendered in the appropriate format and a status code of 422 (UNPROCESSABLE_ENTITY) returned.
</div>
HTMLの場合は'create'ビューが再度表示されます。
そして、ユーザは誤った入力を修正できます。
それ以外のフォーマット(JSON、XMLなど)の場合は、エラーオブジェクト自身が適切なフォーマットで表示され、422(UNPROCESSABLE_ENTITY)のステータスコードが返されます。<p class="paragraph"/><div class="hidden-block">If there are no errors then the resource can be saved and an appropriate response sent:</div>
もし、エラーがない場合は、リソースが保存され、適切なレスポンスが返されます:<p class="paragraph"/><div class="code"><pre>book.save flush:<span class="java&#45;keyword">true</span>
    withFormat &#123;
        html &#123; 
            flash.message = message(code: '<span class="java&#45;keyword">default</span>.created.message', args: &#91;message(code: 'book.label', <span class="java&#45;keyword">default</span>: 'Book'), book.id&#93;)
            redirect book 
        &#125;
        '&#42;' &#123; render status: CREATED &#125;
    &#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the case of HTML a redirect is issued to the originating resource and for other formats a status code of 201 (CREATED) is returned.</div>
HTMLの場合は、オリジナルのリソースへリダイレクトされます。
そして、他のフォーマットでは201(CREATED)のステータスコードが返されます。<p class="paragraph"/><div class="hidden-block">h4. Implementing the 'update' action</div>
<h4>'update'アクションの実装</h4><p class="paragraph"/>
<div class="hidden-block">
The <code>update</code> action updates an existing resource representations and is largely similar to the <code>save</code> action. First define the method signature:
</div>
<code>update</code>アクションは既存のリソースを更新します。
そして、<code>update</code>アクションは<code>save</code>アクションとほとんど同じです。
はじめにメソッドのシグネチャを定義します:<p class="paragraph"/><div class="code"><pre>@Transactional
def update(Book book) &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If the resource exists then Grails will load the resource, otherwise null we passed. In the case of null, you should return a 404:</div>
もしリソースが存在する場合は、Grailsはリソースを読み込み、そうでない場合はnullを渡します。
nullの場合は、404を返すべきです:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">if</span>(book == <span class="java&#45;keyword">null</span>) &#123;
        render status: NOT_FOUND
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        &#8230;
    &#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then once again check for errors <a href="../guide/single.html#validation" class="guide">validation errors</a> and if so respond with the errors:</div>
そして、前と同じようにerrorsに対して<a href="../guide/single.html#validation" class="guide">バリデーションエラー</a>をチェックして、エラーがある場合は<code>errors</code>を応答します:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">if</span>(book.hasErrors()) &#123;
    respond book.errors, view:'edit' 
&#125;
<span class="java&#45;keyword">else</span> &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the case of HTML the 'edit' view will be rendered again so the user can correct the invalid input. In the case of other formats (JSON, XML etc.) the errors object itself will be rendered in the appropriate format and a status code of 422 (UNPROCESSABLE_ENTITY) returned.</div>
HTMLの場合は'edit'ビューが再度表示されます。
そして、ユーザは誤った入力を修正できます。
それ以外のフォーマット(JSON、XMLなど)の場合は、エラーオブジェクト自身が適切なフォーマットで表示され、422(UNPROCESSABLE_ENTITY)のステータスコードが返されます。<p class="paragraph"/><div class="hidden-block">If there are no errors then the resource can be saved and an appropriate response sent:</div>
もし、エラーがない場合は、リソースが保存され、適切なレスポンスが返されます:<p class="paragraph"/><div class="code"><pre>book.save flush:<span class="java&#45;keyword">true</span>
withFormat &#123;
    html &#123; 
        flash.message = message(code: '<span class="java&#45;keyword">default</span>.updated.message', args: &#91;message(code: 'book.label', <span class="java&#45;keyword">default</span>: 'Book'), book.id&#93;)
        redirect book 
    &#125;
    '&#42;' &#123; render status: OK &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the case of HTML a redirect is issued to the originating resource and for other formats a status code of 200 (OK) is returned.</div>
HTMLの場合は、オリジナルのリソースへリダイレクトされ、他のフォーマットでは200(OK)のステータスコードが返されます。<p class="paragraph"/><div class="hidden-block">h4. Implementing the 'delete' action</div>
<h4>'delete'アクションの実装</h4><p class="paragraph"/><div class="hidden-block">The <code>delete</code> action deletes an existing resource. The implementation is largely similar to the <code>update</code> action, expect the <code>delete()</code> method is called instead:</div>
<code>delete</code>アクションは既存のリソースを削除します。
実装は、<code>update</code>アクションとほとんど同じで<code>delete()</code>メソッドを代わりに呼びます:<p class="paragraph"/><div class="code"><pre>book.delete flush:<span class="java&#45;keyword">true</span>
withFormat &#123;
    html &#123; 
        flash.message = message(code: '<span class="java&#45;keyword">default</span>.deleted.message', args: &#91;message(code: 'Book.label', <span class="java&#45;keyword">default</span>: 'Book'), book.id&#93;)
        redirect action:<span class="java&#45;quote">"index"</span>, method:<span class="java&#45;quote">"GET"</span> 
    &#125;
    '&#42;'&#123; render status: NO_CONTENT &#125; 
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Notice that for an HTML response a redirect is issued back to the <code>index</code> action, whilst for other content types a response code 204 (NO_CONTENT) is returned.</div>
HTMLレスポンスでは<code>index</code>アクションへリダイレクトされます。
他のコンテンツタイプに対しては、レスポンスコード204(NO_CONTENT)が返されます。<p class="paragraph"/>


<h2 id="generatingRestControllers">8.1.5.3 スカッフォルドを使用してRESTコントローラを生成</h2>
<div class="hidden-block">To see some of these concepts in action and help you get going the <a href="http://grails.org/plugin/scaffolding" target="blank">Scaffolding plugin</a>, version 2.0 and above, can generate a REST ready controller for you, simply run the command:</div>
アクション内でここまで見てきたコンセプトを得るには、バージョン2.0以上の<a href="http://grails.org/plugin/scaffolding" target="blank">スカッフォルドプラグイン</a>が役に立ちます。
このプラグインは、REST機能が組み込まれたコントローラを生成できます。
これは単にコマンドを実行するだけです:<p class="paragraph"/><div class="code"><pre>$ grails generate&#45;controller &#91;Domain <span class="java&#45;object">Class</span> Name&#93;</pre></div>



<h2 id="renderers">8.1.6 レスポンスレンダリングのカスタマイズ</h2>
<div class="hidden-block">There are several ways to customize response rendering in Grails.</div>
Grailsではレスポンスのレンダリングをカスタマイズする方法がいくつかあります。



<h2 id="defaultRenderers">8.1.6.1 デフォルトレンダラーのカスタマイズ</h2>
<div class="hidden-block">
The default renderers for XML and JSON can be found in the <code>grails.rest.render.xml</code> and <code>grails.rest.render.json</code> packages respectively. These use the Grails converters (<code>grails.converters.XML</code> and <code>grails.converters.JSON</code>) by default for response rendering. 
</div>
XMLとJSONに対するデフォルトのレンダラーは、それぞれ<code>grails.rest.render.xml</code>、<code>grails.rest.render.json</code>パッケージ内にあります。
これらはレスポンスのレンダリングにGrailsのコンバータ(<code>grails.converters.XML</code>と<code>grails.converters.JSON</code>)を使います。<p class="paragraph"/><div class="hidden-block">
You can easily customize response rendering using these default renderers. A common change you may want to make is to include or exclude certain properties from rendering. 
</div>
これらのデフォルトレンダラーを使って簡単にレスポンスのレンダリングをカスタマイズできます。
よく必要となる変更は、レンダリング時に特定のプロパティをインクルード、またはエクスクルードすることです。<p class="paragraph"/><div class="hidden-block">h4. Including or Excluding Properties from Rendering</div>
<h4>レンダリング時のプロパティのインクルードとエクスクルード</h4><p class="paragraph"/><div class="hidden-block">As mentioned previously, Grails maintains a registry of <code>grails.rest.render.Renderer</code> instances. There are some default configured renderers and the ability to register or override renderers for a given domain class or even for a collection of domain classes. To include a particular property from rendering you need to register a custom renderer by defining a bean in <code>grails-app/conf/spring/resources.groovy</code>:</div>
前に説明したように、Grailsは<code>grails.rest.render.Renderer</code>インスタンスをレジストリで管理しています。
デフォルトで設定されているレンダラーがいくつかありますが、与えられたドメインクラス、またはドメインクラスのコレクションに対し、レンダラーの登録や上書きが可能です。
レンダリングで特定のプロパティをインクルードするには、<code>grails-app/conf/spring/resources.groovy</code>内のビーン定義によって、カスタムレンダラーを登録する必要があります:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.xml.&#42;<p class="paragraph"/>beans = &#123;
    bookRenderer(XmlRenderer, Book) &#123;
        includes = &#91;'title'&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block"><blockquote class="note">
The bean name is not important (Grails will scan the application context for all registered renderer beans), but for organizational and readability purposes it is recommended you name it something meaningful.
</blockquote></div>
<blockquote class="note">
ビーンの名前は重要ではありません(Grailsは登録されたすべてのレンダラーのビーンを見つけるために、アプリケーションコンテキストをスキャンします)。
しかし、構造と可読性の理由から、分かりやすい名前を付けておくことをお勧めします。
</blockquote><p class="paragraph"/><div class="hidden-block">
To exclude a property, the <code>excludes</code> property of the <code>XmlRenderer</code> class can be used:
</div>
プロパティをエクスクルードするには、<code>XmlRenderer</code>クラスの<code>exclude</code>プロパティを使います:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.xml.&#42;<p class="paragraph"/>beans = &#123;
    bookRenderer(XmlRenderer, Book) &#123;
        excludes = &#91;'isbn'&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Customizing the Converters</div>
<h4>コンバーターのカスタマイズ</h4><p class="paragraph"/><div class="hidden-block">
As mentioned previously, the default renders use the <code>grails.converters</code> package under the covers. In other words, under the covers they essentially do the following:
</div>
前に説明したように、デフォルトのレンダラーは<code>grails.converters</code>パッケージ配下のクラスを使っています。
これは、パッケージ配下のクラスを使って以下のようにした場合と本質的には同じです:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.converters.&#42;<p class="paragraph"/>&#8230;
render book as XML<p class="paragraph"/>// or render book as JSON</pre></div><p class="paragraph"/><div class="hidden-block">Why the separation between converters and renderers? Well a renderer has more flexibility to use whatever rendering technology you chose. When implementing a custom renderer you could use <a href="http://wiki.fasterxml.com/JacksonHome" target="blank">Jackson</a>, <a href="http://code.google.com/p/google-gson/" target="blank">Gson</a> or any Java library to implement the renderer. Converters on the other hand are very much tied to Grails' own marshalling implementation.</div>
なぜコンバーターとレンダラーが分かれているのでしょうか？
これは、レンダラーにおいて任意のレンダリング技術を採用できるよう、より柔軟性を持たせるためです。
これにより、カスタムレンダラーを実装する際に、<a href="http://wiki.fasterxml.com/JacksonHome" target="blank">Jackson</a>や<a href="http://code.google.com/p/google-gson/" target="blank">Gson</a>、または他のJavaライブラリをレンダラーを実装するために使用できます。



<h2 id="objectMarshallers">8.1.6.2 カスタムオブジェクトマーシャラの登録</h2>
<div class="hidden-block">
Grails' Converters feature the notion of an <a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/ObjectMarshaller.html" class="api">ObjectMarshaller</a> and each type can have a registered <code>ObjectMarshaller</code>. You can register custom <code>ObjectMarshaller</code> instances to completely customize response rendering. For example, you can define the following in <code>BootStrap.init</code>:
</div>
Grailsのコンバーターは、<a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/ObjectMarshaller.html" class="api">オブジェクトマーシャラ</a>の概念を特徴としており、それぞれの型に対して<code>ObjectMarshaller</code>を登録できます。
そして、レスポンスのレンダリングをカスタマイズするためにカスタム<code>ObjectMarshaller</code>インタンスを登録できます。
例えば、<code>BootStrap.init</code>の中で以下のように定義できます:<p class="paragraph"/><div class="code"><pre>XML.registerObjectMarshaller Book, &#123; Book book, XML xml &#45;&#62;
  xml.attribute 'id', book.id
  xml.build &#123;
    title(book.title)
  &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You can customize the formatting of an indvidual value this way too. For example the <a href="http://grails.org/plugin/jodatime" target="blank">JodaTime plugin</a> does the following to support rendering of JodaTime dates in JSON output:</div>
個々の値のフォーマットをカスタマイズする場合もこの方法で可能です。
例えば、<a href="http://grails.org/plugin/jodatime" target="blank">JodaTime plugin</a>は、JSON出力でJadaTime日付のレンダリングをサポートするために次のようにしています:<p class="paragraph"/><div class="code"><pre>JSON.registerObjectMarshaller(DateTime) &#123;
    <span class="java&#45;keyword">return</span> it?.toString(<span class="java&#45;quote">"yyyy&#45;MM&#45;dd'T'HH:mm:ss'Z'"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
In the case of JSON it's often simple to use a map to customize output:
</div>
JSONの場合は、マップを使って簡単に出力をカスタマイズできます:<p class="paragraph"/><div class="code"><pre>JSON.registerObjectMarshaller(Book) &#123;
  def map= &#91;:&#93;
  map&#91;'titl'&#93; = it.title
  map&#91;'auth'&#93; = it.author
  <span class="java&#45;keyword">return</span> map 
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Registering Custom Marshallers via Spring</div>
<h4>Spring経由でカスタムマーシャラを登録する</h4><p class="paragraph"/><div class="hidden-block">Note that if you have many custom marshallers it is recommended you split the registration of these into a separate class:</div>
もし多くのカスタムマーシャラがある場合は、マーシャラの登録をそれぞれ別々のクラスへ分けることがお勧めです:<p class="paragraph"/><div class="code"><pre>class CustomMarshallerRegistrar &#123;<p class="paragraph"/>    @javax.annotation.PostConstruct
    void registerMarshallers() &#123;
        JSON.registerObjectMarshaller(DateTime) &#123;
            <span class="java&#45;keyword">return</span> it?.toString(<span class="java&#45;quote">"yyyy&#45;MM&#45;dd'T'HH:mm:ss'Z'"</span>)
        &#125;        
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then define this class as Spring bean in <code>grails-app/conf/spring/resources.groovy</code>:</div>
そして、このクラスを<code>grails-app/conf/spring/resources.groovy</code>内でSpringビーンとして定義します:<p class="paragraph"/><div class="code"><pre>beans = &#123;
    myCustomMarshallerRegistrar(CustomMarshallerRegistrar)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The <code>PostConstruct</code> annotation will get triggered on startup of your application.</div>
<code>PostConstruct</code>アノテーションはアプリケーション起動時に処理を起動するトリガーになります。



<h2 id="namedObjectMarshallers">8.1.6.3 オブジェクト・マーシャラの名前付き定義</h2>
<div class="hidden-block">It is also possible to register named configurations. For example:</div>
名前付きの設定で登録することもできます。例えば:<p class="paragraph"/><div class="code"><pre>XML.createNamedConfig('publicApi') &#123;
  it.registerObjectMarshaller(Book) &#123; Book book, XML xml &#45;&#62;
    // <span class="java&#45;keyword">do</span> <span class="java&#45;keyword">public</span> API
  &#125;
&#125;
XML.createNamedConfig('adminApi') &#123;
  it.registerObjectMarshaller(Book) &#123; Book book, XML xml &#45;&#62;
    // <span class="java&#45;keyword">do</span> admin API
  &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then when you use either the <code>render</code> or <code>respond</code> methods you can wrap the call in a named configuration if necessary to customize rendering per request:</div>
そして、もしリクエストごとのレンダリングのカスタマイズが必要な場合に、<code>render</code>または<code>respond</code>メソッドのどちらかを使い、名前付き設定でそのメソッド呼び出しをラップできます。<p class="paragraph"/><div class="code"><pre>XML.use( isAdmin ? 'adminApi' : 'publicApi') &#123;
    render book as XML
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">or</div>
または<p class="paragraph"/><div class="code"><pre>XML.use( isAdmin ? 'adminApi' : 'publicApi') &#123;
    respond book 
&#125;</pre></div>



<h2 id="objectMarshallerInterface">8.1.6.4 ObjectMarshallerインターフェイスへの実装</h2>
<div class="hidden-block">For more complex marshallers it is recommended you implement the <a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/ObjectMarshaller.html" class="api">ObjectMarshaller</a> interface. For example given a domain class:</div>
より複雑なマーシャラに対しては、<a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/ObjectMarshaller.html" class="api">ObjectMarshaller</a>インタフェースの実装がお勧めです。<p class="paragraph"/><div class="code"><pre>class Book &#123;
    <span class="java&#45;object">String</span> title
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">By default the output when using:</div>
デフォルトのマーシャラを使ったときの出力は:<p class="paragraph"/><div class="code"><pre>render book as XML</pre></div><p class="paragraph"/><div class="hidden-block">Would look like:</div>
次のようになります:<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;book id=<span class="xml&#45;quote">"1"</span>&#62;</span>
   <span class="xml&#45;tag">&#60;title&#62;</span>The Stand<span class="xml&#45;tag">&#60;/title&#62;</span>
<span class="xml&#45;tag">&#60;/book&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">To write a custom marshaller you can do the following:</div>
カスタムマーシャラを記述するには以下のようにします:<p class="paragraph"/><div class="code"><pre>class BookMarshaller <span class="java&#45;keyword">implements</span> ObjectMarshaller&#60;XML&#62; &#123;<p class="paragraph"/>  <span class="java&#45;keyword">public</span> <span class="java&#45;object">boolean</span> supports(<span class="java&#45;object">Object</span> object) &#123;
    <span class="java&#45;keyword">return</span> object <span class="java&#45;keyword">instanceof</span> Book
  &#125;<p class="paragraph"/>  <span class="java&#45;keyword">public</span> void marshalObject(<span class="java&#45;object">Object</span> object, XML converter) &#123;
    Book book  = (Book)object 
    converter.chars book.title
  &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">And then register the marshaller with:</div>
そして、そのマーシャラを登録します:<p class="paragraph"/><div class="code"><pre>XML.registerObjectMarshaller(<span class="java&#45;keyword">new</span> BookMarshaller())</pre></div><p class="paragraph"/><div class="hidden-block">With the custom <code>ObjectMarshaller</code> in place, the output is now:</div>
カスタム<code>ObjectMarshaller</code>を登録すると、出力は次のようになります:<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;book&#62;</span>The Stand<span class="xml&#45;tag">&#60;/book&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">h4. Customizing the Name of the Root Element</div>
<h4>ルート要素の名前をカスタマイズする</h4><p class="paragraph"/><div class="hidden-block">If you wish the customize the name of the surrounding element, you can implement <a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/NameAwareMarshaller.html" class="api">NameAwareMarshaller</a>:</div>
もし、囲う要素の名前をカスタマイズしたい場合は<a href="http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/converters/marshaller/NameAwareMarshaller.html" class="api">NameAwareMarshaller</a>を実装します。<p class="paragraph"/><div class="code"><pre>class BookMarshaller <span class="java&#45;keyword">implements</span> ObjectMarshaller&#60;XML&#62;,NameAwareMarshaller &#123;<p class="paragraph"/>  ...<p class="paragraph"/>  <span class="java&#45;object">String</span> getElementName(<span class="java&#45;object">Object</span> o) &#123;
    <span class="java&#45;keyword">return</span> 'custom&#45;book'
  &#125;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">With the above change the output would now be:</div>
上記の変更によって、出力は以下のように変わります:<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;custom&#45;book&#62;</span>The Stand<span class="xml&#45;tag">&#60;/custom&#45;book&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">h4. Outputing Markup Using the Converters API or Builder</div>
<h4>コンバータAPIまたはビルダーを使ってマークアップを出力する</h4><p class="paragraph"/><div class="hidden-block">With the passed Converter object you can explicitly code to the Converters API to stream markup to the response:</div>
渡されたコンバータオブジェクトのコンバータAPIを通じて、レスポンスへマークアップを出力するコードをわかりやすくコーディングできます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> void marshalObject(<span class="java&#45;object">Object</span> object, XML converter) &#123;
  Book book = (Book)object<p class="paragraph"/>  converter.attribute 'id', book.id.toString()
  converter.attribute 'date&#45;released', book.dateReleased.toString()<p class="paragraph"/>  converter.startNode 'title'
  converter.chars book.title
  converter.end()<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The above code results in:</div>
上記コードの結果は次のようになります:<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;book id=<span class="xml&#45;quote">"1"</span> date&#45;released=<span class="xml&#45;quote">"..."</span>&#62;</span>
   <span class="xml&#45;tag">&#60;title&#62;</span>The Stand<span class="xml&#45;tag">&#60;/title&#62;</span>
<span class="xml&#45;tag">&#60;/book&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">You can also use a builder notation to achieve a similar result (although the builder notation does not work for <code>CompileStatic</code>):</div>
また、ビルダー記法を使って同じような結果を得ることもできます:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> void marshalObject(<span class="java&#45;object">Object</span> object, XML converter) &#123;
  Book b = (Book)object<p class="paragraph"/>  converter.build &#123;
     book(id: b.id) &#123;
        title b.title
     &#125;
  &#125; 
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Using the convertAnother Method to Recursively Convert Objects</div>
<h4>再帰的にオブジェクトをコンバートするためにconvertAnotherメソッドを使う</h4><p class="paragraph"/><div class="hidden-block">To create more complex responses you can use the <code>convertAnother</code> method to convert associations and other objects:</div>
より複雑なレスポンスを生成するには、関連など他のオブジェクトをコンバートする<code>convertAnother</code>メソッドを使います:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> void marshalObject(<span class="java&#45;object">Object</span> object, XML converter) &#123;
  Book book = (Book)object<p class="paragraph"/>  converter.startNode 'title'
  converter.chars book.title
  converter.end()<p class="paragraph"/>  <span class="java&#45;keyword">if</span> (book.authors) &#123;
    converter.startNode 'authors'
    <span class="java&#45;keyword">for</span>(author in book.authors) &#123;
      converter.convertAnother author
    &#125;    
    converter.end()
  &#125;
&#125;</pre></div>



<h2 id="customRenderers">8.1.6.5 カスタムレンダラーの実装</h2>
<div class="hidden-block">If you want even more control of the rendering or prefer to use your own marshalling techniques then you can implement your own <code>Renderer</code> instance. For example below is a simple implementation that customizes the rendering of the <code>Book</code> class:</div>
もし、さらにレンダリングをコントロールしたい、または独自のマーシャリング技術を使いたいといった場合、自身の<code>Renderer</code>インスタンスを実装できます。
例えば、以下は<code>Book</code>クラスのレンダリングをカスタマイズする簡単な実装例です:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> myapp
<span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.&#42;
<span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.mime.MimeType<p class="paragraph"/>class BookXmlRenderer <span class="java&#45;keyword">extends</span> AbstractRenderer&#60;Book&#62; &#123;
    BookXmlRenderer() &#123;
        <span class="java&#45;keyword">super</span>(Book, &#91;MimeType.XML,MimeType.TEXT_XML&#93; as MimeType&#91;&#93;)
    &#125;<p class="paragraph"/>    void render(Book object, RenderContext context) &#123;
        context.contentType = MimeType.XML.name<p class="paragraph"/>        def xml = <span class="java&#45;keyword">new</span> groovy.xml.MarkupBuilder(context.writer)
        xml.book(id: object.id, title:object.title)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The <code>AbstractRenderer</code> super class has a constructor that takes the class that it renders and the <code>MimeType</code>(s) that are accepted (via the ACCEPT header or file extension) for the renderer.</div>
スーパークラス<code>AbstractRenderer</code>は、表示するクラスと、レンダラーが受け入れる(<code>ACCEPT</code>ヘッダまたはファイル拡張子から取得した)<code>MimeType</code>を(複数)取るコンストラクタを持っています。<p class="paragraph"/><div class="hidden-block">To configure this renderer, simply add it is a bean to <code>grails-app/conf/spring/resources.groovy</code>:</div>
このレンダラーを設定するには、<code>grails-app/conf/spring/resources.groovy</code>へビーンを単に追加します:<p class="paragraph"/><div class="code"><pre>beans = &#123;
    bookRenderer(myapp.BookXmlRenderer)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The result will be that all <code>Book</code> instances will be rendered in the following format:</div>
その結果、すべての<code>Book</code>インスタンスは以下のフォーマットで表示されます:<p class="paragraph"/><div class="code"><pre>&#60;book id=<span class="java&#45;quote">"1"</span> title=<span class="java&#45;quote">"The Stand"</span>/&#62;</pre></div><p class="paragraph"/><div class="hidden-block"><blockquote class="note">
Note that if you change the rendering to a completely different format like the above, then you also need to change the binding if you plan to support POST and PUT requests. Grails will not automatically know how to bind data from a custom XML format to a domain class otherwise. See the section on "Customizing Binding of Resources" for further information.
</blockquote></div>
<blockquote class="note">
もし、POST・PUTリクエストをサポートする予定があり、上記のように完全に異なるフォーマットへレンダリングを変えたい場合は、バインディングもあわせて変更する必要があります。
Grailsは、カスタムXMLフォーマットから他のドメインクラスへ、どうのようにデータをバインドるするかを自動的に知ることはできません。
さらなる情報は「リソースバインディングのカスタマイズ」を参照してください。
</blockquote><p class="paragraph"/><div class="hidden-block">h4. Container Renderers</div>
<h4>コンテナレンダラー</h4><p class="paragraph"/><div class="hidden-block">A <code>grails.rest.render.ContainerRenderer</code> is a renderer that renders responses for containers of objects (lists, maps, collections etc.). The interface is largely the same as the <code>Renderer</code> interface except for the addition of the <code>getComponentType()</code> method, which should return the "contained" type. For example:</div>
<code>grails.rest.render.ContainerRenderer</code>は、オブジェクトのコンテナ(リスト、マップ、コレクションなど)に対してレスポンスを表示するレンダラーです。
このインタフェースは、型パラメータが付与されたコンテナの型を返す<code>getComponentType()</code>メソッドが加えられている以外は<code>Renderer</code>インタフェースとほとんど同じです。
例えば:<p class="paragraph"/><div class="code"><pre>class BookListRenderer <span class="java&#45;keyword">implements</span> ContainerRenderer&#60;List, Book&#62; &#123;
    <span class="java&#45;object">Class</span>&#60;List&#62; getTargetType() &#123; List &#125;
    <span class="java&#45;object">Class</span>&#60;Book&#62; getComponentType() &#123; Book &#125;
    MimeType&#91;&#93; getMimeTypes() &#123; &#91; MimeType.XML&#93; as MimeType&#91;&#93; &#125;
    void render(List object, RenderContext context) &#123;
        ....
    &#125;
&#125;</pre></div><p class="paragraph"/>



<h2 id="gspRenderers">8.1.6.6 GSPを使用したカスタムレンダリング</h2>
<div class="hidden-block">You can also customize rendering on a per action basis using Groovy Server Pages (GSP). For example given the <code>show</code> action mentioned previously:</div>
Groovy Server Pages(GSP)を使ってアクションごとに、レンダリングをカスタマイズすることもできます:<p class="paragraph"/><div class="code"><pre>def show(Book book) &#123;
    respond book
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You could supply a <code>show.xml.gsp</code> file to customize the rendering of the XML:</div>
そして、XMLのレンダリングをカスタマイズするための<code>show.xml.gsp</code>ファイルを用意します:<p class="paragraph"/><div class="code"><pre>&#60;%@page contentType=<span class="java&#45;quote">"application/xml"</span>%&#62;
&#60;book id=<span class="java&#45;quote">"$&#123;book.id&#125;"</span> title=<span class="java&#45;quote">"$&#123;book.title&#125;"</span>/&#62;</pre></div><p class="paragraph"/>


<h2 id="hypermedia">8.1.7 アプリケーション状態エンジンとしてのハイパーメディア</h2>
<div class="hidden-block"><a href="http://en.wikipedia.org/wiki/HATEOAS" target="blank">HATEOS</a>, an abbreviation for Hypermedia as the Engine of Application State, is a common pattern applied to REST architectures that uses hypermedia and linking to define the REST API.</div>
<a href="http://en.wikipedia.org/wiki/HATEOAS" target="blank">HATEOS</a>は、アプリケーション状態エンジンとしてのハイパーメディア(Hypermedia as the Engine of Application State)の略称で、ハイパーメディアとリンク使うRESTアーキテクチャを適用した、REST APIを定義するための共通パターンです。<p class="paragraph"/><div class="hidden-block">Hypermedia (also called Mime or Media Types) are used to describe the state of a REST resource, and links tell clients how to transition to the next state. The format of the response is typically JSON or XML, although standard formats such as <a href="http://tools.ietf.org/html/rfc4287" target="blank">Atom</a> and/or <a href="http://stateless.co/hal_specification.html" target="blank">HAL</a> are frequently used.</div>
ハイパーメディア(MIMEタイプ、またはメディアタイプとも呼ばれる)は、RESTリソースの状態を記述するために使われます。
そして、リンクはどのように次の状態へ遷移すればよいかをクライアントに伝えます。
レスポンスのフォーマットは主にJSONやXMLが使われますが、その中でも<a href="http://tools.ietf.org/html/rfc4287" target="blank">Atom</a>や<a href="http://stateless.co/hal_specification.html" target="blank">HAL</a>のような標準的なフォーマットがよく使われます。<p class="paragraph"/>


<h2 id="hal">8.1.7.1 HALサポート</h2>
<div class="hidden-block"><a href="http://stateless.co/hal_specification.html" target="blank">HAL</a> is a standard exchange format commonly used when developing REST APIs that follow HATEOAS principals. An example HAL document representing a list of orders can be seen below:</div>
<a href="http://stateless.co/hal_specification.html" target="blank">HAL</a>は、HATEOASに沿ったREST APIを開発する際の標準な交換フォーマットとして知られています。
例えば、注文の一覧をHALを使って表現すると、以下のようになります:<p class="paragraph"/><div class="code"><pre>&#123;
    <span class="java&#45;quote">"_links"</span>: &#123;
        <span class="java&#45;quote">"self"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/orders"</span> &#125;,
        <span class="java&#45;quote">"next"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/orders?page=2"</span> &#125;,
        <span class="java&#45;quote">"find"</span>: &#123;
            <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/orders&#123;?id&#125;"</span>,
            <span class="java&#45;quote">"templated"</span>: <span class="java&#45;keyword">true</span>
        &#125;,
        <span class="java&#45;quote">"admin"</span>: &#91;&#123;
            <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/admins/2"</span>,
            <span class="java&#45;quote">"title"</span>: <span class="java&#45;quote">"Fred"</span>
        &#125;, &#123;
            <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/admins/5"</span>,
            <span class="java&#45;quote">"title"</span>: <span class="java&#45;quote">"Kate"</span>
        &#125;&#93;
    &#125;,
    <span class="java&#45;quote">"currentlyProcessing"</span>: 14,
    <span class="java&#45;quote">"shippedToday"</span>: 20,
    <span class="java&#45;quote">"_embedded"</span>: &#123;
        <span class="java&#45;quote">"order"</span>: &#91;&#123;
            <span class="java&#45;quote">"_links"</span>: &#123;
                <span class="java&#45;quote">"self"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/orders/123"</span> &#125;,
                <span class="java&#45;quote">"basket"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/baskets/98712"</span> &#125;,
                <span class="java&#45;quote">"customer"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/customers/7809"</span> &#125;
            &#125;,
            <span class="java&#45;quote">"total"</span>: 30.00,
            <span class="java&#45;quote">"currency"</span>: <span class="java&#45;quote">"USD"</span>,
            <span class="java&#45;quote">"status"</span>: <span class="java&#45;quote">"shipped"</span>
        &#125;, &#123;
            <span class="java&#45;quote">"_links"</span>: &#123;
                <span class="java&#45;quote">"self"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/orders/124"</span> &#125;,
                <span class="java&#45;quote">"basket"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/baskets/97213"</span> &#125;,
                <span class="java&#45;quote">"customer"</span>: &#123; <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"/customers/12369"</span> &#125;
            &#125;,
            <span class="java&#45;quote">"total"</span>: 20.00,
            <span class="java&#45;quote">"currency"</span>: <span class="java&#45;quote">"USD"</span>,
            <span class="java&#45;quote">"status"</span>: <span class="java&#45;quote">"processing"</span>
        &#125;&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Exposing Resources Using HAL </div>
<h4>HALを使ったリソースの公開</h4><p class="paragraph"/><div class="hidden-block">To return HAL instead of regular JSON for a resource you can simply override the renderer in <code>grails-app/conf/spring/resources.groovy</code> with an instance of <code>grails.rest.render.hal.HalJsonRenderer</code> (or <code>HalXmlRenderer</code> for the XML variation):</div>
リソースに対して、いつものJSONの代わりにHALを返すには、<code>grails.rest.render.hal.HalJsonRenderer</code>(XMLの場合は<code>HalXmlRenderer</code>)のインスタンスを使い、<code>grails-app/conf/spring/resources.groovy</code>の中でレンダラーを単に上書きします:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.hal.&#42;
beans = &#123;
    halBookRenderer(HalJsonRenderer, <span class="java&#45;keyword">rest</span>.test.Book)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">With the bean in place requesting the HAL content type will return HAL:</div>
コンテンツタイプがHALのリクエストでは、このビーンがHALを返します:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/hal+json"</span> http://localhost:8080/myapp/books/1<p class="paragraph"/>HTTP/1.1 200 OK
Server: Apache&#45;Coyote/1.1
Content&#45;Type: application/hal+json;charset=ISO&#45;8859&#45;1<p class="paragraph"/>&#123;
  <span class="java&#45;quote">"_links"</span>: &#123;
    <span class="java&#45;quote">"self"</span>: &#123;
      <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"http://localhost:8080/myapp/books/1"</span>,
      <span class="java&#45;quote">"hreflang"</span>: <span class="java&#45;quote">"en"</span>,
      <span class="java&#45;quote">"type"</span>: <span class="java&#45;quote">"application/hal+json"</span>
    &#125;
  &#125;,
  <span class="java&#45;quote">"title"</span>: <span class="java&#45;quote">"&#34;The Stand&#34;"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">To use HAL XML format simply change the renderer:</div>
XMLフォーマットのHALを使うには単にレンダラーを変更します:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.hal.&#42;
beans = &#123;
    halBookRenderer(HalXmlRenderer, <span class="java&#45;keyword">rest</span>.test.Book)
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block">h4. Using Custom Media / Mime Types</div>
<h4>カスタムMIME(メディア)タイプの使用</h4><p class="paragraph"/><div class="hidden-block">If you wish to use a custom Mime Type then you first need to declare the Mime Types in <code>grails-app/conf/Config.groovy</code>:</div>
もし、カスタムMIMEタイプを使いたい場合は、はじめに<code>grails-app/conf/Config.groovy</code>の中でMIMEタイプを宣言する必要があります:<p class="paragraph"/><div class="code"><pre>grails.mime.types = &#91;
    all:      <span class="java&#45;quote">"&#42;/&#42;"</span>,
    book:     <span class="java&#45;quote">"application/vnd.books.org.book+json"</span>,
    bookList: <span class="java&#45;quote">"application/vnd.books.org.booklist+json"</span>,
    &#8230;
&#93;</pre></div><p class="paragraph"/><div class="hidden-block"><blockquote class="warning">
It is critical that place your new mime types after the 'all' Mime Type because if the Content Type of the request cannot be established then the first entry in the map is used for the response. If you have your new Mime Type at the top then Grails will always try and send back your new Mime Type if the requested Mime Type cannot be established.
</blockquote></div>
<blockquote class="warning">
'all'のMIMEタイプの後に、新たなMIMEタイプを宣言しているのには重要な意味があります。
なぜなら、リクエストのコンテンツタイプが不明な場合は、マップ内の最初のエントリがレスポンスのコンテンツタイプとして使われるためです。
もし、新たなMIMEタイプが先頭にあるとすると、リクエストのコンテンツタイプが不明な場合に、Grailsは新たなMIMEタイプを常に送り返すことになります。
</blockquote><p class="paragraph"/><div class="hidden-block">Then override the renderer to return HAL using the custom Mime Types:</div>
そして、カスタムMIMEタイプを使ってHALを返すためにレンダラーを上書きします:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.hal.&#42;
<span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.mime.&#42;<p class="paragraph"/>beans = &#123;
    halBookRenderer(HalJsonRenderer, <span class="java&#45;keyword">rest</span>.test.Book, <span class="java&#45;keyword">new</span> MimeType(<span class="java&#45;quote">"application/vnd.books.org.book+json"</span>, &#91;v:<span class="java&#45;quote">"1.0"</span>&#93;))
    halBookListRenderer(HalJsonCollectionRenderer, <span class="java&#45;keyword">rest</span>.test.Book, <span class="java&#45;keyword">new</span> MimeType(<span class="java&#45;quote">"application/vnd.books.org.booklist+json"</span>, &#91;v:<span class="java&#45;quote">"1.0"</span>&#93;))
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the above example the first bean defines a HAL renderer for a single book instance that returns a Mime Type of <code>application/vnd.books.org.book+json</code>. The second bean defines the Mime Type used to render a collection of books (in this case <code>application/vnd.books.org.booklist+json</code>).</div>
上記の例で、初めのビーンは単一のbookインスタンスに対して、<code>application/vnd.books.org.book+json</code>のMIMEタイプを返すHALのレンダラーを定義しています。
2つ目のビーンはbookのコレクションを表示するために使われるMIMEタイプを定義しています(この場合は<code>application/vnd.books.org.booklist+json</code>)。<p class="paragraph"/><div class="hidden-block">With this in place issuing a request for the new Mime Type returns the necessary HAL:</div>
この新たなMIMEタイプに対してリクエストが投げられると必要なHALを返します:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/vnd.books.org.book+json"</span> http://localhost:8080/myapp/books/1<p class="paragraph"/>HTTP/1.1 200 OK
Server: Apache&#45;Coyote/1.1
Content&#45;Type: application/vnd.books.org.book+json;charset=ISO&#45;8859&#45;1<p class="paragraph"/>
&#123;
  <span class="java&#45;quote">"_links"</span>: &#123;
    <span class="java&#45;quote">"self"</span>: &#123;
      <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"http://localhost:8080/myapp/books/1"</span>,
      <span class="java&#45;quote">"hreflang"</span>: <span class="java&#45;quote">"en"</span>,
      <span class="java&#45;quote">"type"</span>: <span class="java&#45;quote">"application/vnd.books.org.book+json"</span>
    &#125;
  &#125;,
  <span class="java&#45;quote">"title"</span>: <span class="java&#45;quote">"&#34;The Stand&#34;"</span>
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block">h4. Customizing Link Rendering</div>
<h4>リンクレンダリングのカスタマイズ</h4><p class="paragraph"/><div class="hidden-block">An important aspect of HATEOAS is the usage of links that describe the transitions the client can use to interact with the REST API. By default the <code>HalJsonRenderer</code> will automatically create links for you for associations and to the resource itself (using the "self" relationship).</div>
HATEOASの重要な側面は、遷移を表現したリンクの使い方です。
クライアントはREST APIでのやり取りにこれを使えます。
デフォルトで<code>HalJsonRenderer</code>は、関連と("self"関連を使って)自身のリソースへのリンクを自動的に作成します。<p class="paragraph"/><div class="hidden-block">
However you can customize link rendering using the <code>link</code> method that is added to all domain classes annotated with <code>grails.rest.Resource</code> or any class annotated with <code>grails.rest.Linkable</code>. For example, the <code>show</code> action can be modified as follows to provide a new link in the resulting output:
</div>
リンクのレンダリングを、<code>grails.rest.Resource</code>が付与されたドメインクラス、または<code>grails.rest.Linkable</code>が付与されたクラスに追加された<code>link</code>メソッドを使って、カスタマイズすることもできます。
例えば、<code>show</code>アクションで結果を出力する際に新たなリンクを追加するには、以下のように変更します:<p class="paragraph"/><div class="code"><pre>def show(Book book) &#123;
    book.link rel:'publisher', href: g.link(resource:<span class="java&#45;quote">"publisher"</span>, params:&#91;bookId: book.id&#93;)
    respond book
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Which will result in output such as: </div>
この出力結果は次のようになります:<p class="paragraph"/><div class="code"><pre>&#123;
  <span class="java&#45;quote">"_links"</span>: &#123;
    <span class="java&#45;quote">"self"</span>: &#123;
      <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"http://localhost:8080/myapp/books/1"</span>,
      <span class="java&#45;quote">"hreflang"</span>: <span class="java&#45;quote">"en"</span>,
      <span class="java&#45;quote">"type"</span>: <span class="java&#45;quote">"application/vnd.books.org.book+json"</span>
    &#125;
    <span class="java&#45;quote">"publisher"</span>: &#123;
        <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"http://localhost:8080/myapp/books/1/publisher"</span>,
        <span class="java&#45;quote">"hreflang"</span>: <span class="java&#45;quote">"en"</span>
    &#125;
  &#125;,
  <span class="java&#45;quote">"title"</span>: <span class="java&#45;quote">"&#34;The Stand&#34;"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The <code>link</code> method can be passed named arguments that match the properties of the <code>grails.rest.Link</code> class.</div>
この<code>link</code>メソッドは<code>grails.rest.Link</code>クラスのプロパティに一致する名前付き引数を渡せます。



<h2 id="atom">8.1.7.2 Atomサポート</h2>
<div class="hidden-block"><a href="http://tools.ietf.org/html/rfc4287" target="blank">Atom</a> is another standard interchange format used to implement REST APIs. An example of Atom output can be seen below:</div>
<a href="http://tools.ietf.org/html/rfc4287" target="blank">Atom</a>はREST APIを実装するために使われる、もう1つの標準的な変換フォーマットです。
Atomの出力例は次のようになります:<p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;?xml version=<span class="xml&#45;quote">"1.0"</span> encoding=<span class="xml&#45;quote">"utf&#45;8"</span>?&#62;</span>
<span class="xml&#45;tag">&#60;feed xmlns=<span class="xml&#45;quote">"http://www.w3.org/2005/Atom"</span>&#62;</span><p class="paragraph"/> <span class="xml&#45;tag">&#60;title&#62;</span>Example Feed<span class="xml&#45;tag">&#60;/title&#62;</span>
 <span class="xml&#45;tag">&#60;link href=<span class="xml&#45;quote">"http://example.org/"</span>/&#62;</span>
 <span class="xml&#45;tag">&#60;updated&#62;</span>2003&#45;12&#45;13T18:30:02Z<span class="xml&#45;tag">&#60;/updated&#62;</span>
 <span class="xml&#45;tag">&#60;author&#62;</span>
   <span class="xml&#45;tag">&#60;name&#62;</span>John Doe<span class="xml&#45;tag">&#60;/name&#62;</span>
 <span class="xml&#45;tag">&#60;/author&#62;</span>
 <span class="xml&#45;tag">&#60;id&#62;</span>urn:uuid:60a76c80&#45;d399&#45;11d9&#45;b93C&#45;0003939e0af6<span class="xml&#45;tag">&#60;/id&#62;</span><p class="paragraph"/> <span class="xml&#45;tag">&#60;entry&#62;</span>
   <span class="xml&#45;tag">&#60;title&#62;</span>Atom&#45;Powered Robots Run Amok<span class="xml&#45;tag">&#60;/title&#62;</span>
   <span class="xml&#45;tag">&#60;link href=<span class="xml&#45;quote">"http://example.org/2003/12/13/atom03"</span>/&#62;</span>
   <span class="xml&#45;tag">&#60;id&#62;</span>urn:uuid:1225c695&#45;cfb8&#45;4ebb&#45;aaaa&#45;80da344efa6a<span class="xml&#45;tag">&#60;/id&#62;</span>
   <span class="xml&#45;tag">&#60;updated&#62;</span>2003&#45;12&#45;13T18:30:02Z<span class="xml&#45;tag">&#60;/updated&#62;</span>
   <span class="xml&#45;tag">&#60;summary&#62;</span>Some text.<span class="xml&#45;tag">&#60;/summary&#62;</span>
 <span class="xml&#45;tag">&#60;/entry&#62;</span><p class="paragraph"/><span class="xml&#45;tag">&#60;/feed&#62;</span></pre></div><p class="paragraph"/><div class="hidden-block">To use Atom rendering again simply define a custom renderer:</div>
Atomのレンダリングを使うには、これまでと同じようにカスタムレンダラーを登録します:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.<span class="java&#45;keyword">rest</span>.render.atom.&#42;
beans = &#123;
    halBookRenderer(AtomRenderer, <span class="java&#45;keyword">rest</span>.test.Book)
    halBookListRenderer(AtomCollectionRenderer, <span class="java&#45;keyword">rest</span>.test.Book)
&#125;</pre></div>



<h2 id="vndError">8.1.7.3 Vnd.Errorサポート</h2>
<div class="hidden-block"><a href="https://github.com/blongden/vnd.error" target="blank">Vnd.Error</a> is a standardised way of expressing an error response. </div>
<a href="https://github.com/blongden/vnd.error" target="blank">Vnd.Error</a>はエラーレスポンスの表現方法を標準化したものです。<p class="paragraph"/><div class="hidden-block">By default when a validation error occurs when attempting to POST new resources then the errors object will be sent back allow with a 422 respond code:</div>
デフォルトでは、新しいリソースをPOSTする際にバリデーションエラーが発生した場合、エラーオブジェクトが422のレスポンスコードで送り返されます:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/json"</span>  &#45;H <span class="java&#45;quote">"Content&#45;Type: application/json"</span> &#45;X POST &#45;d <span class="java&#45;quote">""</span> http://localhost:8080/myapp/books<p class="paragraph"/>HTTP/1.1 422 Unprocessable Entity
Server: Apache&#45;Coyote/1.1
Content&#45;Type: application/json;charset=ISO&#45;8859&#45;1<p class="paragraph"/>&#123;<span class="java&#45;quote">"errors"</span>:&#91;&#123;<span class="java&#45;quote">"object"</span>:<span class="java&#45;quote">"<span class="java&#45;keyword">rest</span>.test.Book"</span>,<span class="java&#45;quote">"field"</span>:<span class="java&#45;quote">"title"</span>,<span class="java&#45;quote">"rejected&#45;value"</span>:<span class="java&#45;keyword">null</span>,<span class="java&#45;quote">"message"</span>:<span class="java&#45;quote">"Property &#91;title&#93; of class &#91;class <span class="java&#45;keyword">rest</span>.test.Book&#93; cannot be <span class="java&#45;keyword">null</span>"</span>&#125;&#93;&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If you wish to change the format to Vnd.Error then simply register <code>grails.rest.render.errors.VndErrorJsonRenderer</code> bean in <code>grails-app/conf/spring/resources.groovy</code>:</div>
もしフォーマットをVnd.Errorへ変更したい場合は、<code>grails-app/conf/spring/resources.groovy</code>の中に<code>grails.rest.render.errors.VndErrorJsonRenderer</code>ビーンを単に登録します:<p class="paragraph"/>
<div class="code"><pre>beans = &#123;
    vndJsonErrorRenderer(grails.<span class="java&#45;keyword">rest</span>.render.errors.VndErrorJsonRenderer)
    // <span class="java&#45;keyword">for</span> Vnd.Error XML format
    vndXmlErrorRenderer(grails.<span class="java&#45;keyword">rest</span>.render.errors.VndErrorXmlRenderer)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then if you alter the client request to accept Vnd.Error you get an appropriate response:</div>
そして、Vnd.Errorを受け入れるようにクライアントのリクエストを変更すると、次のようにレスポンスを得られます:<p class="paragraph"/><div class="code"><pre>$ curl &#45;i &#45;H <span class="java&#45;quote">"Accept: application/vnd.error+json,application/json"</span> &#45;H <span class="java&#45;quote">"Content&#45;Type: application/json"</span> &#45;X POST &#45;d <span class="java&#45;quote">""</span> http://localhost:8080/myapp/books
HTTP/1.1 200 OK
Server: Apache&#45;Coyote/1.1
Content&#45;Type: application/vnd.error+json;charset=ISO&#45;8859&#45;1<p class="paragraph"/>&#91;
    &#123;
        <span class="java&#45;quote">"logref"</span>: <span class="java&#45;quote">"&#34;book.nullable&#34;"</span>,
        <span class="java&#45;quote">"message"</span>: <span class="java&#45;quote">"Property &#91;title&#93; of class &#91;class <span class="java&#45;keyword">rest</span>.test.Book&#93; cannot be <span class="java&#45;keyword">null</span>"</span>,
        <span class="java&#45;quote">"_links"</span>: &#123;
            <span class="java&#45;quote">"resource"</span>: &#123;
                <span class="java&#45;quote">"href"</span>: <span class="java&#45;quote">"http://localhost:8080/<span class="java&#45;keyword">rest</span>&#45;test/books"</span>
            &#125;
        &#125;
    &#125;
&#93;</pre></div>



<h2 id="binding">8.1.8 リソースバインディングのカスタマイズ</h2>
<div class="hidden-block">The framework provides a sophisticated but simple mechanism for binding REST requests to domain objects and command objects.  One way to take advantage of this is to bind the <code>request</code> property in a controller the <code>properties</code> of a domain class.  Given the following XML as the body of the request, the <code>createBook</code> action will create a new <code>Book</code> and assign "The Stand" to the <code>title</code> property and "Stephen King" to the <code>authorName</code> property.</div>
フレームワークは高機能ですが、ドメインオブジェクトとコマンドオブジェクトへのRESTリクエストのバインディングに関しては、シンプルな作りになっています。
効果的なやり方の1つは、コントローラの中で<code>request</code>プロパティをドメインクラスのプロパティへバインドすることです。
リクエストのボディとして以下のようなXMLを与えた場合、<code>createBook</code>アクションは新しい<code>Book</code>を作成し、"The Stand"を<code>title</code>プロパティへ、"Stephen King"を<code>authorName</code>プロパティへ代入します。<p class="paragraph"/><div class="code"><pre>&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;
&#60;book&#62;
    &#60;title&#62;The Stand&#60;/title&#62;
    &#60;authorName&#62;Stephen King&#60;/authorName&#62;
&#60;/book&#62;</pre></div><p class="paragraph"/><div class="code"><pre>class BookController &#123;<p class="paragraph"/>    def createBook() &#123;
        def book = <span class="java&#45;keyword">new</span> Book()
        book.properties = request<p class="paragraph"/>        // &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If the root element of the XML document contains an <code>id</code> attribute, the <code>id</code> value will be used to retrieve the corresponding persistent instance from the database and then the rest of the document will be bound to the instance.  If no corresponding record is found in the database, the command object reference will be null.</div>
もしXMLドキュメントのルート要素が<code>id</code>属性を含む場合は、その<code>id</code>値はデータベースから対応する永続化インスタンスを検索するために使われます。
そして、ドキュメントの残りはインスタンスへバインドされます。
もし、一致するレコードがデータベース内に見つからない場合は、コマンドオブジェクトの参照はnullになります。<p class="paragraph"/><div class="code"><pre>&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;
&#60;book&#62;
    &#60;title&#62;The Stand&#60;/title&#62;
    &#60;authorName&#62;Stephen King&#60;/authorName&#62;
&#60;/book&#62;</pre></div><p class="paragraph"/><div class="hidden-block">Command objects will automatically be bound with the body of the request:</div>
コマンドオブジェクトにはリクエストのボディが自動的にバインドされます。<p class="paragraph"/><div class="code"><pre>class BookController &#123;
    def createBook(BookCommand book) &#123;<p class="paragraph"/>        // &#8230;
    &#125;
&#125;<p class="paragraph"/>class BookCommand &#123;
    <span class="java&#45;object">String</span> title
    <span class="java&#45;object">String</span> authorName
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If the command object type is a domain class and the root element of the XML document contains an <code>id</code> attribute, the <code>id</code> value will be used to retrieve the corresponding persistent instance from the database and then the rest of the document will be bound to the instance.  If no corresponding record is found in the database, the command object reference will be null.</div>
もし、コマンドオブジェクトの型がドメインクラスで、かつXMLドキュメントのルート要素が<code>id</code>属性を含んでいる場合は、その<code>id</code>値はデータベースから対応する永続化インスタンスを検索するために使われます。
そして、ドキュメントの残りはインスタンスへバインドされます。
もし、一致するレコードがデータベース内に見つからない場合は、コマンドオブジェクトの参照はnullになります。<p class="paragraph"/><div class="code"><pre>&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;
&#60;book id=<span class="java&#45;quote">"42"</span>&#62;
    &#60;title&#62;Walden&#60;/title&#62;
    &#60;authorName&#62;Henry David Thoreau&#60;/authorName&#62;
&#60;/book&#62;</pre></div><p class="paragraph"/><div class="code"><pre>class BookController &#123;
    def updateBook(Book book) &#123;
        // The book will have been retrieved from the database and updated
        // by doing something like <span class="java&#45;keyword">this</span>:
        //
        // book == Book.get('42')
        // <span class="java&#45;keyword">if</span>(book != <span class="java&#45;keyword">null</span>) &#123;
        //    book.properties = request
        // &#125;
        //
        // the code above represents what the framework will
        // have done. There is no need to write that code.<p class="paragraph"/>        // ...<p class="paragraph"/>    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The data binding depends on an instance of the <a href="http://grails.org/doc/latest/api/org/grails/databinding/DataBindingSource.html" class="api">DataBindingSource</a> interface created by an
instance of the <a href="http://grails.org/doc/latest/api/org/grails/databinding/bindingsource/DataBindingSourceCreator.html" class="api">DataBindingSourceCreator</a> interface.  The specific
implementation of <code>DataBindingSourceCreator</code> will be selected based on the <code>contentType</code> of the request.  Several implementations 
are provided to handle common content types.  The default implementations will be fine for most use cases.  The following table 
lists the content types which are supported by the core framework and which <code>DataBindingSourceCreator</code> implementations are used for each.</div>
データバインディングは<a href="http://grails.org/doc/latest/api/org/grails/databinding/bindingsource/DataBindingSourceCreator.html" class="api">DataBindingSourceCreator</a>インタフェースのインスタンスによって作られる<a href="http://grails.org/doc/latest/api/org/grails/databinding/DataBindingSource.html" class="api">DataBindingSource</a>インタフェースのインスタンスに依存しています。
<code>DataBindingSourceCreator</code>の具体的な実装はリクエストの<code>contentType</code>を元に選択されます。
主要なコンテンツタイプをハンドリングするためにいくつかの実装が提供されています。
大抵の場合にこのデフォルト実装で十分なはずです。
以下のテーブルのコンテンツタイプ一覧がコアフレームワークによってサポートされており、それぞれ対応する<code>DataBindingSourceCreator</code>の実装が使われます。<p class="paragraph"/><div class="hidden-block"><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th>Content Type(s)</th><th>Bean Name</th><th>DataBindingSourceCreator Impl.</th></tr><tr class="table-odd"><td>application/xml, text/xml</td><td>xmlDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.XmlDataBindingSourceCreator</td></tr><tr class="table-even"><td>application/json, text/json</td><td>jsonDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.JsonDataBindingSourceCreator</td></tr><tr class="table-odd"><td>application/hal+json</td><td>halJsonDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.HalJsonDataBindingSourceCreator</td></tr><tr class="table-even"><td>application/hal+xml</td><td>halXmlDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.HalXmlDataBindingSourceCreator</td></tr></table></div>
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th>コンテンツタイプ</th><th>ビーン名</th><th>DataBindingSourceCreator実装</th></tr><tr class="table-odd"><td>application/xml, text/xml</td><td>xmlDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.XmlDataBindingSourceCreator</td></tr><tr class="table-even"><td>application/json, text/json</td><td>jsonDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.JsonDataBindingSourceCreator</td></tr><tr class="table-odd"><td>application/hal+json</td><td>halJsonDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.HalJsonDataBindingSourceCreator</td></tr><tr class="table-even"><td>application/hal+xml</td><td>halXmlDataBindingSourceCreator</td><td>org.codehaus.groovy.grails.web.binding.bindingsource.HalXmlDataBindingSourceCreator</td></tr></table><p class="paragraph"/><div class="hidden-block">In order provide your own <code>DataBindingSourceCreator</code> for any of those content types, write a class which implements
<code>DataBindingSourceCreator</code> and register an instance of that class in the Spring application context.  If you
are replacing one of the existing helpers, use the corresponding bean name from above.  If you are providing a
helper for a content type other than those accounted for by the core framework, the bean name may be anything that
you like but you should take care not to conflict with one of the bean names above.</div>
これらのコンテンツタイプに対して、独自の<code>DataBindingSourceCreator</code>を提供するには、<code>DataBindingSourceCreator</code>の実装クラスを書き、Springのアプリケーションコンテキスト内にそのクラスのインスタンスを登録します。
既存のヘルパーを置き換える場合は、上記のビーン名に対応する名前を使います。
もし、これらコアフレームによって提供される以外のコンテンツタイプのヘルパーを提供する場合、ビーンの名前は何でも好きに設定可能ですが、上記のビーン名と競合しないように注意してください。<p class="paragraph"/><div class="hidden-block">The <code>DataBindingSourceCreator</code> interface defines just 2 methods:</div>
<code>DataBindingSourceCreator</code>インタフェースは2つのメソッドを定義しています:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> org.grails.databinding.bindingsource<p class="paragraph"/><span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.mime.MimeType
<span class="java&#45;keyword">import</span> org.grails.databinding.DataBindingSource<p class="paragraph"/>/&#42;&#42;
 &#42; A factory <span class="java&#45;keyword">for</span> DataBindingSource instances
 &#42; 
 &#42; @since 2.3
 &#42; @see DataBindingSourceRegistry
 &#42; @see DataBindingSource
 &#42;
 &#42;/
<span class="java&#45;keyword">interface</span> DataBindingSourceCreator &#123;<p class="paragraph"/>    /&#42;&#42;
     &#42; <code><span class="java&#45;keyword">return</span> All of the &#123;</code>link MimeType&#125; supported by <span class="java&#45;keyword">this</span> helper
     &#42;/
    MimeType&#91;&#93; getMimeTypes()<p class="paragraph"/>    /&#42;&#42;
     &#42; Creates a DataBindingSource suitable <span class="java&#45;keyword">for</span> binding bindingSource to bindingTarget
     &#42; 
     &#42; @param mimeType a mime type
     &#42; @param bindingTarget the target of the data binding
     &#42; @param bindingSource the value being bound
     &#42; @<span class="java&#45;keyword">return</span> a DataBindingSource
     &#42;/
    DataBindingSource createDataBindingSource(MimeType mimeType, <span class="java&#45;object">Object</span> bindingTarget, <span class="java&#45;object">Object</span> bindingSource)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block"><a href="http://grails.org/doc/latest/api/org/grails/databinding/bindingsource/AbstractRequestbodyDataBindingSourceCreator.html" class="api">AbstractRequestBodyDataBindingSourceCreator</a>
is an abstract class designed to be extended to simplify writing custom <code>DataBindingSourceCreator</code> classes.  Classes which
extend <code>AbstractRequestbodyDatabindingSourceCreator</code> need to implement a method named <code>createBindingSource</code>
which accepts an <code>InputStream</code> as an argument and returns a <code>DataBindingSource</code> as well as implementing the <code>getMimeTypes</code>
method described in the <code>DataBindingSourceCreator</code> interface above.  The <code>InputStream</code> argument to <code>createBindingSource</code>
provides access to the body of the request.</div>
<a href="http://grails.org/doc/latest/api/org/grails/databinding/bindingsource/AbstractRequestbodyDataBindingSourceCreator.html" class="api">AbstractRequestBodyDataBindingSourceCreator</a>はこのクラスを拡張することで、簡単に独自の<code>DataBindingSourceCreator</code>クラスを書けるよう設計された抽象クラスです。
<code>AbstractRequestbodyDatabindingSourceCreator</code>を継承したクラスは、引数として<code>InputStream</code>を受け取り<code>DataBindingSource</code>を返す、<code>createBindingSource</code>という名前のメソッドを実装する必要があります。
また、上記の<code>DataBindingSourceCreator</code>インタフェース内で宣言された<code>getMimeTypes</code>メソッドの実装が必要です。
<code>createBindingSource</code>への<code>InputStream</code>の引数は、リクエストボディへのアクセスを提供します。<p class="paragraph"/><div class="hidden-block">The code below shows a simple implementation.</div>
次のコードに簡単な実装例を示します。<p class="paragraph"/>
<div class="code"><pre>// src/groovy/com/demo/myapp/databinding/MyCustomDataBindingSourceCreator.groovy
<span class="java&#45;keyword">package</span> com.demo.myapp.databinding<p class="paragraph"/><span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.mime.MimeType
<span class="java&#45;keyword">import</span> org.grails.databinding.DataBindingSource
<span class="java&#45;keyword">import</span> org.grails.databinding.SimpleMapDataBindingSource
<span class="java&#45;keyword">import</span> org.grails.databinding.bindingsource.AbstractRequestBodyDataBindingSourceCreator<p class="paragraph"/>/&#42;&#42;
 &#42; A custom DataBindingSourceCreator capable of parsing key value pairs out of
 &#42; a request body containing a comma separated list of key:value pairs like:
 &#42;
 &#42; name:Herman,age:99,town:STL
 &#42;
 &#42;/
class MyCustomDataBindingSourceCreator <span class="java&#45;keyword">extends</span> AbstractRequestBodyDataBindingSourceCreator &#123;<p class="paragraph"/>    @Override
    <span class="java&#45;keyword">public</span> MimeType&#91;&#93; getMimeTypes() &#123;
        &#91;<span class="java&#45;keyword">new</span> MimeType('text/custom+demo+csv')&#93; as MimeType&#91;&#93;
    &#125;<p class="paragraph"/>    @Override
    <span class="java&#45;keyword">protected</span> DataBindingSource createBindingSource(InputStream inputStream) &#123;
        def map = &#91;:&#93;<p class="paragraph"/>        def reader = <span class="java&#45;keyword">new</span> InputStreamReader(inputStream)<p class="paragraph"/>        // <span class="java&#45;keyword">this</span> is an obviously naive parser and is intended
        // <span class="java&#45;keyword">for</span> demonstration purposes only.<p class="paragraph"/>        reader.eachLine &#123; line &#45;&#62;
            def keyValuePairs = line.split(',')
            keyValuePairs.each &#123; keyValuePair &#45;&#62;
                <span class="java&#45;keyword">if</span>(keyValuePair?.trim()) &#123;
                    def keyValuePieces = keyValuePair.split(':')
                    def key = keyValuePieces&#91;0&#93;.trim()
                    def value = keyValuePieces&#91;1&#93;.trim()
                    map&#91;key&#93; = value
                &#125;
            &#125;
        &#125;<p class="paragraph"/>        // create and <span class="java&#45;keyword">return</span> a DataBindingSource which contains the parsed data
        <span class="java&#45;keyword">new</span> SimpleMapDataBindingSource(map)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">An instance of <code>MyCustomDataSourceCreator</code> needs to be registered in the spring application context.</div>
<code>MyCustomDataSourceCreator</code>のインスタンスはSpringのアプリケーションコンテキスト内に登録が必要です。<p class="paragraph"/><div class="code"><pre>// grails&#45;app/conf/spring/resources.groovy
beans = &#123;<p class="paragraph"/>    myCustomCreator com.demo.myapp.databinding.MyCustomDataBindingSourceCreator<p class="paragraph"/>    // &#8230;
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block">With that in place the framework will use the <code>myCustomCreator</code> bean any time a <code>DataBindingSourceCreator</code> is needed
to deal with a request which has a <code>contentType</code> of "text/custom+demo+csv".</div>
上記のようにすることで、フレームワークは"text/custom+demo+csv"の<code>contentType</code>を持ったリクエストを処理する<code>DataBindingSourceCreator</code>が必要な場合に、<code>myCustomCreator</code>ビーンを使います。



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/theWebLayer.html">&lt;&lt; <strong>7</strong><span>Web&#12524;&#12452;&#12516;</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/async.html"><strong>9</strong><span>&#38750;&#21516;&#26399;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Command%20Line/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/add-proxy.html">add-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/alias.html">alias</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/bootstrap.html">bootstrap</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/bug-report.html">bug-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/clean.html">clean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/clear-proxy.html">clear-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/compile.html">compile</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/console.html">console</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-app.html">create-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-controller.html">create-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-domain-class.html">create-domain-class</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-filters.html">create-filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-hibernate-cfg-xml.html">create-hibernate-cfg-xml</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-integration-test.html">create-integration-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-multi-project-build.html">create-multi-project-build</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-plugin.html">create-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-pom.html">create-pom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-scaffold-controller.html">create-scaffold-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-script.html">create-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-service.html">create-service</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-tag-lib.html">create-tag-lib</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-unit-test.html">create-unit-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/dependency-report.html">dependency-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/doc.html">doc</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-all.html">generate-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-controller.html">generate-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-views.html">generate-views</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/help.html">help</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/init.html">init</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-dependency.html">install-dependency</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-plugin.html">install-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-templates.html">install-templates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/integrate-with.html">integrate-with</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/interactive.html">interactive</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/list-plugin-updates.html">list-plugin-updates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/list-plugins.html">list-plugins</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/migrate-docs.html">migrate-docs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/package-plugin.html">package-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/package.html">package</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/plugin-info.html">plugin-info</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/refresh-dependencies.html">refresh-dependencies</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/remove-proxy.html">remove-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-app.html">run-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-script.html">run-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-war.html">run-war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/schema-export.html">schema-export</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/set-proxy.html">set-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/set-version.html">set-version</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/shell.html">shell</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/stats.html">stats</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/stop-app.html">stop-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/test-app.html">test-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/uninstall-plugin.html">uninstall-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/upgrade.html">upgrade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/war.html">war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/wrapper.html">wrapper</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Constraints</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Constraints/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Constraints/attributes.html">attributes</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/bindable.html">bindable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/blank.html">blank</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/creditCard.html">creditCard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/email.html">email</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/inList.html">inList</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/matches.html">matches</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/max.html">max</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/maxSize.html">maxSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/min.html">min</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/minSize.html">minSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/notEqual.html">notEqual</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/nullable.html">nullable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/range.html">range</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/scale.html">scale</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/size.html">size</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/unique.html">unique</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/url.html">url</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/validator.html">validator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/widget.html">widget</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Controllers</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Controllers/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Controllers/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/afterInterceptor.html">afterInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/allowedMethods.html">allowedMethods</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/beforeInterceptor.html">beforeInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/bindData.html">bindData</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/chain.html">chain</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/defaultAction.html">defaultAction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/forward.html">forward</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/grailsApplication.html">grailsApplication</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/namespace.html">namespace</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/redirect.html">redirect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/respond.html">respond</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/responseFormats.html">responseFormats</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/session.html">session</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/withForm.html">withForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/withFormat.html">withFormat</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Database Mapping</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/autoImport.html">autoImport</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/autoTimestamp.html">autoTimestamp</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/batchSize.html">batchSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/cache.html">cache</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/cascade.html">cascade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/column.html">column</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/comment.html">comment</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/discriminator.html">discriminator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/dynamicInsert.html">dynamicInsert</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/dynamicUpdate.html">dynamicUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/fetch.html">fetch</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/id.html">id</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/ignoreNotFound.html">ignoreNotFound</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/indexColumn.html">indexColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/insertable.html">insertable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/joinTable.html">joinTable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/lazy.html">lazy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/order.html">order</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/sort.html">sort</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/table.html">table</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/type.html">type</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/updateable.html">updateable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/version.html">version</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Classes</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/addTo.html">addTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/attach.html">attach</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/belongsTo.html">belongsTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/clearErrors.html">clearErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/constraints.html">constraints</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/count.html">count</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/countBy.html">countBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/createCriteria.html">createCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/delete.html">delete</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/discard.html">discard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/embedded.html">embedded</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/errors.html">errors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/executeQuery.html">executeQuery</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/executeUpdate.html">executeUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/exists.html">exists</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/fetchMode.html">fetchMode</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/find.html">find</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAllBy.html">findAllBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAllWhere.html">findAllWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findBy.html">findBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findWhere.html">findWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/first.html">first</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/get.html">get</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getAll.html">getAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getDirtyPropertyNames.html">getDirtyPropertyNames</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getPersistentValue.html">getPersistentValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasMany.html">hasMany</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasOne.html">hasOne</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/ident.html">ident</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/instanceOf.html">instanceOf</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/isAttached.html">isAttached</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/isDirty.html">isDirty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/last.html">last</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/list.html">list</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/listOrderBy.html">listOrderBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/load.html">load</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/lock.html">lock</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/mapWith.html">mapWith</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/mappedBy.html">mappedBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/mapping.html">mapping</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/merge.html">merge</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/namedQueries.html">namedQueries</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/properties.html">properties</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/read.html">read</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/refresh.html">refresh</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/removeFrom.html">removeFrom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/save.html">save</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/transients.html">transients</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/validate.html">validate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/where.html">where</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/whereAny.html">whereAny</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withCriteria.html">withCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withNewSession.html">withNewSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withSession.html">withSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withTransaction.html">withTransaction</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Plug-ins</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Plug-ins/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/URL%20mappings.html">URL mappings</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/codecs.html">codecs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/controllers.html">controllers</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/core.html">core</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/dataSource.html">dataSource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/domainClasses.html">domainClasses</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/filters.html">filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/hibernate.html">hibernate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/i18n.html">i18n</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/logging.html">logging</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/scaffolding.html">scaffolding</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/services.html">services</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/servlets.html">servlets</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/web%20flow.html">web flow</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Services</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Services/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Services/scope.html">scope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Services/transactional.html">transactional</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Servlet API</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tag Libraries</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/pageScope.html">pageScope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Tags/actionSubmit.html">actionSubmit</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/actionSubmitImage.html">actionSubmitImage</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/applyLayout.html">applyLayout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/checkBox.html">checkBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/collect.html">collect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/cookie.html">cookie</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/country.html">country</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/countrySelect.html">countrySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/createLink.html">createLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/createLinkTo.html">createLinkTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/currencySelect.html">currencySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/datePicker.html">datePicker</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/each.html">each</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/eachError.html">eachError</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/else.html">else</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/elseif.html">elseif</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/external.html">external</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/field.html">field</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/fieldValue.html">fieldValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/form.html">form</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formRemote.html">formRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatBoolean.html">formatBoolean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatDate.html">formatDate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatNumber.html">formatNumber</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/grep.html">grep</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/header.html">header</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/hiddenField.html">hiddenField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/if.html">if</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/img.html">img</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/include.html">include</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/isAvailable.html">isAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/isNotAvailable.html">isNotAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/javascript.html">javascript</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/join.html">join</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutBody.html">layoutBody</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutHead.html">layoutHead</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutTitle.html">layoutTitle</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/localeSelect.html">localeSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/message.html">message</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/meta.html">meta</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/pageProperty.html">pageProperty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/paginate.html">paginate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/passwordField.html">passwordField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/radio.html">radio</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/radioGroup.html">radioGroup</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteField.html">remoteField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteFunction.html">remoteFunction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteLink.html">remoteLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/renderErrors.html">renderErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/resource.html">resource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/select.html">select</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/set.html">set</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/setProvider.html">setProvider</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/sortableColumn.html">sortableColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/submitButton.html">submitButton</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/submitToRemote.html">submitToRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/textArea.html">textArea</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/textField.html">textField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/timeZoneSelect.html">timeZoneSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/unless.html">unless</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/uploadForm.html">uploadForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/while.html">while</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. <br/>[注意]このGrails日本語ドキュメントは、有志による翻訳というよりは意訳なドキュメントです。 Grails日本語ドキュメントに関するお問い合わせ、ドキュメントプロジェクトに参加したい等の問い合わせは。 twitter: @tyama 迄<br/>
    Sponsored by <a href="http://springsource.com">SpringSource</a> 
</div>

<script type="text/javascript" src="../../js/docs.js"></script>

</body>
</html>
