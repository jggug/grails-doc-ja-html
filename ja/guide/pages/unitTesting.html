<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>11.1 &#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488; 2.3.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>&#12452;&#12531;&#12488;&#12525;&#12480;&#12463;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>&#12473;&#12479;&#12540;&#12488;&#12460;&#12452;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/upgradingFromPreviousVersionsOfGrails.html"><strong>3</strong><span>Grails&#19979;&#20301;&#12496;&#12540;&#12472;&#12519;&#12531;&#12363;&#12425;&#12398;&#26356;&#26032;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/conf.html"><strong>4</strong><span>&#35373;&#23450;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/commandLine.html"><strong>5</strong><span>&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/GORM.html"><strong>6</strong><span>O/R&#12510;&#12483;&#12500;&#12531;&#12464; (GORM)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/theWebLayer.html"><strong>7</strong><span>Web&#12524;&#12452;&#12516;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/async.html"><strong>8</strong><span>&#38750;&#21516;&#26399;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/validation.html"><strong>9</strong><span>&#12496;&#12522;&#12487;&#12540;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/services.html"><strong>10</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>11</strong><span>&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>12</strong><span>&#22269;&#38555;&#21270;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>13</strong><span>&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/plugins.html"><strong>14</strong><span>&#12503;&#12521;&#12464;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/webServices.html"><strong>15</strong><span>Web&#12469;&#12540;&#12499;&#12473;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/spring.html"><strong>16</strong><span>Grails&#12392;Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/hibernate.html"><strong>17</strong><span>Grails&#12392;Hibernate</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/scaffolding.html"><strong>18</strong><span>&#12473;&#12459;&#12483;&#12501;&#12457;&#12523;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/deployment.html"><strong>19</strong><span>&#12487;&#12503;&#12525;&#12452;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>20</strong><span>Grails&#12395;&#36002;&#29486;&#12377;&#12427;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/traslateReport.html"><strong>21</strong><span>&#32763;&#35379;&#12524;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="http://grails.org" target="_blank"><img alt="Grails Logo" title="The Grails Framework" src="../../../img/grails.png" border="0"/></a></span>
        
        
        <span id="sponsor"><a href="http://springsource.com" target="_blank"><img alt="SpringSource Logo" title="SpringSource - Weapons for the War on Java Complexity" src="../../../img/springsource-logo.png" border="0"/></a></span>
        
    </div>
    <p>See the light - agile, industrial strength, rapid web application development made easy</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/services.html">&lt;&lt; <strong>10</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/i18n.html"><strong>12</strong><span>&#22269;&#38555;&#21270;</span> >></a></div>
                


                <div class="project">
                    <h1>11.1 &#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488; - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith</p>

                    <p><strong>Version:</strong> 2.3.0.BUILD-SNAPSHOT</p>

                    
                    <p><strong>Translated by:</strong> T.Yamamoto, Japanese Grails Doc Translating Team. <br/>【注意】このドキュメントの内容はスナップショットバージョンを元に*意訳*されているため、一部現行バージョンでは未対応の機能もあります。</p>
                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTestingControllers"><strong>11.1</strong><span>&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTestingTagLibraries"><strong>11.2</strong><span>&#12479;&#12464;&#12521;&#12452;&#12502;&#12521;&#12522;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTestingDomains"><strong>11.3</strong><span>&#12489;&#12513;&#12452;&#12531;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTestingFilters"><strong>11.4</strong><span>&#12501;&#12451;&#12523;&#12479;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTestingURLMappings"><strong>11.5</strong><span>URL&#12510;&#12483;&#12500;&#12531;&#12464;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#mockingCollaborators"><strong>11.6</strong><span>&#12514;&#12483;&#12461;&#12531;&#12464;&#12467;&#12521;&#12508;&#12524;&#12540;&#12479;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#mockingCodecs"><strong>11.7</strong><span>Mocking Codecs</span></a>
                    </div>
                    
                </div>
                

                
<a name="9.1 Unit Testing"><!-- Legacy link --></a>
<h2 id="unitTesting">11.1 ユニットテスト</h2>
<div class="hidden-block">
Unit testing are tests at the "unit" level. In other words you are testing individual methods or blocks of code without consideration for surrounding infrastructure. Unit tests are typically run without the presence of physical resources that involve I/O such databases, socket connections or files. This is to ensure they run as quick as possible since quick feedback is important.
</div><p class="paragraph"/>Unitテストは"単体"レベルのテストです。具体的には、環境周りを考慮せずに個々のメソッドやブロック単位で行うテストのことです。Unitテストは基本的にデータベース、ネットワーク接続、ファイルなどのI/Oを必要とする物理リソースを必要としません。素早いフィードバックを得られるように、Unitテストの実行時間はできる限り短くしてください。<p class="paragraph"/><div class="hidden-block">
<h4>The Test Mixins</h4>
</div><p class="paragraph"/><h4>テストMixin</h4><p class="paragraph"/><div class="hidden-block">
Since Grails 2.0, a collection of unit testing mixins is provided by Grails that lets you enhance the behavior of a typical JUnit 3, JUnit 4 or Spock test. The following sections cover the usage of these mixins.
</div><p class="paragraph"/>Grails 2.0以降、MixinのUnitテストライブラリがGrailsによって提供されており、代表的なJUnit 3、JUnit 4、Spockを使用したテストの実行をサポートします。以下の節では、Mixinの使い方について記載しています。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The previous JUnit 3-style <code>GrailsUnitTestCase</code> class hierarchy is still present in Grails for backwards compatibility, but is now deprecated. The previous documentation on the subject can be found in the <a href="http://grails.org/doc/1.3.x/guide/9.%20Testing.html" target="blank">Grails 1.3.x documentation</a>
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
以前の<code>GrailsUnitTestCase</code>クラスを継承するJUnit 3スタイルは、下位バージョンとの互換性のためにGrailsにまだ存在しています。しかし今は非推奨です。過去のドキュメントは<a href="http://grails.org/doc/1.3.x/guide/9.%20Testing.html" target="blank">Grails 1.3.x ドキュメンテーション</a>で見つけることができます。
</blockquote><p class="paragraph"/><div class="hidden-block">
You won't normally have to import any of the testing classes because Grails does that for you. But if you find that your IDE for example can't find the classes, here they all are:
</div><p class="paragraph"/>Grailsは自動でテストクラスをインポートするため、全てのテストクラスをインポートしなくても問題ありません。しかし、IDEでテストクラスを探せないことがあるかもしれないので、下記にそれらすべてのテストクラスを列挙します。
<ul class="star">
<li><code>grails.test.mixin.TestFor</code></li>
<li><code>grails.test.mixin.TestMixin</code></li>
<li><code>grails.test.mixin.Mock</code></li>
<li><code>grails.test.mixin.support.GrailsUnitTestMixin</code></li>
<li><code>grails.test.mixin.domain.DomainClassUnitTestMixin</code></li>
<li><code>grails.test.mixin.services.ServiceUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.ControllerUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.FiltersUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.GroovyPageUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code></li>
<li><code>grails.test.mixin.webflow/WebFlowUnitTestMixin</code></li>
</ul><p class="paragraph"/><div class="hidden-block">
Note that you're only ever likely to use the first two explicitly. The rest are there for reference.
</div>
常に明示的に使うのは最初の２つのクラスだけであることに注意してください。残りはリファレンスのために列挙しています。<p class="paragraph"/><div class="hidden-block">
<h4>Test Mixin Basics</h4>
</div><p class="paragraph"/><h4>テストMixinの基本</h4><p class="paragraph"/><div class="hidden-block">
Most testing can be achieved via the <code>TestFor</code> annotation in combination with the <code>Mock</code> annotation for mocking collaborators. For example, to test a controller and associated domains you would define the following:
</div><p class="paragraph"/>ほとんどのテストは、モックを使用するため<code>Mock</code>アノテーションと<code>TestFor</code>アノテーションを組み合わせて使用します。例えば、コントローラーとドメインをテストするためには次のように定義します。<p class="paragraph"/><div class="code"><pre>&#64;TestFor(BookController)
&#64;Mock(&#91;Book, Author, BookService&#93;)</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>TestFor</code> annotation defines the class under test and will automatically create a field for the type of class under test. For example in the above case a "controller" field will be present, however if <code>TestFor</code> was defined for a service a "service" field would be created and so on.
</div><p class="paragraph"/><code>TestFor</code>アノテーションは、テスト対象のクラスを定義することで自動的にクラスタイプのフィールドを生成します。例えば、上記の場合、"controller"フィールドを生成します。また、もし<code>TestFor</code>にサービスが定義されている場合、"service"フィールドが生成されます。<p class="paragraph"/><div class="hidden-block">
The <code>Mock</code> annotation creates mock version of any collaborators. There is an in-memory implementation of GORM that will simulate most interactions with the GORM API. For those interactions that are not automatically mocked you can use the built in support for defining mocks and stubs programmatically. For example:
</div><p class="paragraph"/><code>Mock</code>アノテーションは複数の種類のモックを生成します。ほとんどのGORM APIの振る舞いをシミュレートするインメモリのGORM実装があります。自動でモック化されない振る舞いに対しては、ビルトインされているモック、スタブの作成機能が使用できます。例えば、次の通りです。<p class="paragraph"/>
<div class="code"><pre>void testSearch() &#123;
      def control = mockFor(SearchService)
      control.demand.searchWeb &#123; <span class="java&#45;object">String</span> q &#45;&#62; &#91;'mock results'&#93; &#125;
      control.demand.<span class="java&#45;keyword">static</span>.logResults &#123; List results &#45;&#62;  &#125;
      controller.searchService = control.createMock()
      controller.search()<p class="paragraph"/>      assert controller.response.text.contains <span class="java&#45;quote">"Found 1 results"</span>
&#125;</pre></div>


<a name="9.1.1 Unit Testing Controllers"><!-- Legacy link --></a>
<h2 id="unitTestingControllers">11.1.1 コントローラユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
You use the <code>grails.test.mixin.TestFor</code> annotation to unit test controllers. Using <code>TestFor</code> in this manner activates the <code>grails.test.mixin.web.ControllerUnitTestMixin</code> and its associated API. For example:
</div><p class="paragraph"/>コントローラUnitテストには、<code>grails.test.mixin.TestFor</code>アノテーションを使用します。このように<code>TestFor</code>を使用することで、<code>grails.test.mixin.web.ControllerUnitTestMixin</code>とその関連APIが有効になります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.TestFor<p class="paragraph"/>@TestFor(SimpleController)
class SimpleControllerTests &#123;
    void testSomething() &#123;<p class="paragraph"/>    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Adding the <code>TestFor</code> annotation to a controller causes a new <code>controller</code> field to be automatically created for the controller under test.
</div><p class="paragraph"/><code>TestFor</code>アノテーションにコントローラを追加することにより、<code>controller</code>フィールドにテスト対象のコントローラが自動的に生成されます。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The <code>TestFor</code> annotation will also automatically annotate any public methods starting with "test" with JUnit 4's @Test annotation. If any of your test method don't start with "test" just add this manually
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
<code>TestFor</code>アノテーションは"test"から始まるパブリックなメソッドに自動的にJUnit4の<code>Testアノテーションを付与します。もしテストメソッドが"test"で始まらない場合は</code>Testアノテーションを手動で付与してください。
</blockquote><p class="paragraph"/><div class="hidden-block">
To test the simplest "Hello World"-style example you can do the following:
</div><p class="paragraph"/>最もシンプルなHello World形式のテストは次の通りです。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def hello() &#123;
        render <span class="java&#45;quote">"hello"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testHello() &#123;
    controller.hello()<p class="paragraph"/>    assert response.text == 'hello'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>response</code> object is an instance of <code>GrailsMockHttpServletResponse</code> (from the package <code>org.codehaus.groovy.grails.plugins.testing</code>) which extends Spring's <code>MockHttpServletResponse</code> class and has a number of useful methods for inspecting the state of the response.
</div><p class="paragraph"/><code>response</code>オブジェクトは、<code>GrailsMockHttpServletResponse</code>（<code>org.codehaus.groovy.grails.plugins.testing</code>パッケージに含まれている）のインスタンスです。Springの<code>MockHttpServletResponse</code>クラスを継承しており、レスポンスの状態を調べる便利なメソッドを定義しています。<p class="paragraph"/><div class="hidden-block">
For example to test a redirect you can use the <code>redirectedUrl</code> property:
</div><p class="paragraph"/>例えば、リダイレクトをテストするには<code>redirectedUrl</code>プロパティを使用できます。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def index() &#123;
        redirect action: 'hello'
    &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testIndex() &#123;
    controller.index()<p class="paragraph"/>    assert response.redirectedUrl == '/simple/hello'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Many actions make use of the parameter data associated with the request. For example, the 'sort', 'max', and 'offset' parameters are quite common. Providing these in the test is as simple as adding appropriate values to a special <code>params</code> variable:
</div><p class="paragraph"/>ほとんどのアクションはリクエストに設定されたパラメータを使用します。例えば、'sort'、'max'、'offset'といったパラメータが一般的です。これらのパラメータをテストで利用するには<code>params</code>変数に値を代入するだけで簡単に設定できます。<p class="paragraph"/><div class="code"><pre>void testList() &#123;
    params.sort = <span class="java&#45;quote">"name"</span>
    params.max = 20
    params.offset = 0<p class="paragraph"/>    controller.list()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You can even control what type of request the controller action sees by setting the <code>method</code> property of the mock request:
</div><p class="paragraph"/>リクエストの<code>method</code>プロパティにリクエストタイプを設定することにより、リクエストタイプ毎のコントローラのアクションを確認できます。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    request.method = <span class="java&#45;quote">"POST"</span>
    controller.save()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This is particularly important if your actions do different things depending on the type of the request. Finally, you can mark a request as AJAX like so:
</div><p class="paragraph"/>リクエストタイプに応じてアクションが違った挙動をする場合、これは非常に重要です。さらに、次のようにAjaxとしてリクエストを作ることもできます。<p class="paragraph"/><div class="code"><pre>void testGetPage() &#123;
    request.method = <span class="java&#45;quote">"POST"</span>
    request.makeAjaxRequest()
    controller.getPage()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You only need to do this though if the code under test uses the <code>xhr</code> property on the request.
</div><p class="paragraph"/>テスト対象コードのリクエストで<code>xhr</code>プロパティを使用してたとしても、これを実行するだけです。<p class="paragraph"/><div class="hidden-block">
<h4>Testing View Rendering</h4>
</div><p class="paragraph"/><h4>ビューのレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
To test view rendering you can inspect the state of the controller's <code>modelAndView</code> property (an instance of <code>org.springframework.web.servlet.ModelAndView</code>) or you can use the <code>view</code> and <code>model</code> properties provided by the mixin:
</div><p class="paragraph"/>コントローラの<code>modelAndView</code>プロパティ（<code>org.springframework.web.servlet.ModelAndView</code>のインスタンス）、または、Mixinで提供されている<code>view</code>と<code>model</code>プロパティを使用することにより、ビューのレンダリングをテストすることができます。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def home() &#123;
        render view: <span class="java&#45;quote">"homePage"</span>, model: &#91;title: <span class="java&#45;quote">"Hello World"</span>&#93;
    &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testIndex() &#123;
    controller.home()<p class="paragraph"/>    assert view == <span class="java&#45;quote">"/simple/homePage"</span>
    assert model.title == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Note that the view string is the absolute view path, so it starts with a '/' and will include path elements, such as the directory named after the action's controller.
</div><p class="paragraph"/>viewの文字列は絶対パスであることに注意してください。これは、'/'から始まり、動作するコントローラの名前から決まるディレクトリ名などがパスとして含まれます。<p class="paragraph"/><div class="hidden-block">
<h4>Testing Template Rendering</h4>
</div><p class="paragraph"/><h4>テンプレートレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
Unlike view rendering, template rendering will actually attempt to write the template directly to the response rather than returning a <code>ModelAndView</code> hence it requires a different approach to testing.
</div><p class="paragraph"/>テンプレートのレンダリングは<code>ModelAndView</code>を返すのではなく、レスポンスにテンプレートの内容を直接書き込みます。そのため、ビューのレンダリングとは異なるテストのアプローチが必要になります。<p class="paragraph"/><div class="hidden-block">
Consider the following controller action:
</div><p class="paragraph"/>次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    def display() &#123;
        render template:<span class="java&#45;quote">"snippet"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
In this example the controller will look for a template in <code>grails-app/views/simple/_snippet.gsp</code>. You can test this as follows:
</div><p class="paragraph"/>この例では、コントローラは<code>grails-app/views/simple/_snippet.gsp</code>にあるテンプレートを探します。そして、次のようにテストをします。<p class="paragraph"/><div class="code"><pre>void testDisplay() &#123;
    controller.display()
    assert response.text == 'contents of template'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
However, you may not want to render the real template, but just test that is was rendered. In this case you can provide mock Groovy Pages:
</div><p class="paragraph"/>テンプレートをレンダリングしたくない場合にも、テストでは実際にテンプレートがレンダリングされます。このような場合はGroovy Pagesのモックが使用できます。<p class="paragraph"/><div class="code"><pre>void testDisplay() &#123;
    views&#91;'/simple/_snippet.gsp'&#93; = 'mock contents'
    controller.display()
    assert response.text == 'mock contents'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Actions Which Return A Map</h4>
</div><p class="paragraph"/><h4>マップを返すアクションをテスト</h4><p class="paragraph"/><div class="hidden-block">
When a controller action returns a <code>java.util.Map</code> that <code>Map</code> may be inspected directly to assert that it contains the expected data:
</div><p class="paragraph"/>コントローラアクションが<code>java.util.Map</code>を返す場合は、<code>Map</code>に期待したデータが含まれているか直接検証できます。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    def showBookDetails() &#123;
        &#91;title: 'The Nature Of Necessity', author: 'Alvin Plantinga'&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(SimpleController)
class SimpleControllerTests &#123;<p class="paragraph"/>    void testShowBookDetails() &#123;
        def model = controller.showBookDetails()<p class="paragraph"/>        assert model.author == 'Alvin Plantinga'
    &#125;
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block">
<h4>Testing XML and JSON Responses</h4>
</div><p class="paragraph"/><h4>XMLとJSONレスポンスのテスト</h4><p class="paragraph"/><div class="hidden-block">
XML and JSON response are also written directly to the response. Grails' mocking capabilities provide some conveniences for testing XML and JSON response. For example consider the following action:
</div><p class="paragraph"/>XMLとJSONのレスポンスもまた、直接レスポンスに書き込まれます。Grailsのモック機構は、XMLとJSONのレスポンスをテストするために便利な機能をいくつか提供しています。<p class="paragraph"/><div class="code"><pre>def renderXml() &#123;
    render(contentType:<span class="java&#45;quote">"text/xml"</span>) &#123;
        book(title:<span class="java&#45;quote">"Great"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This can be tested using the <code>xml</code> property of the response:
</div><p class="paragraph"/>次の例は、レスポンスの<code>xml</code>プロパティを使ってテストしています。<p class="paragraph"/><div class="code"><pre>void testRenderXml() &#123;
    controller.renderXml()
    assert <span class="java&#45;quote">"&#60;book title='Great'/&#62;"</span> == response.text
    assert <span class="java&#45;quote">"Great"</span> == response.xml.@title.text()
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>xml</code> property is a parsed result from Groovy's <a href="http://groovy.codehaus.org/Reading+XML+using+Groovy's+XmlSlurper" target="blank">XmlSlurper</a> class which is very convenient for parsing XML.
</div><p class="paragraph"/><code>xml</code>プロパティは、XMLをパースするためにとても便利なGroovyの<a href="http://groovy.codehaus.org/Reading+XML+using+Groovys+XmlSlurper" target="blank">XmlSlurper</a> でパースされた結果です。<p class="paragraph"/><div class="hidden-block">
Testing JSON responses is pretty similar, instead you use the <code>json</code> property:
</div><p class="paragraph"/><code>json</code>プロパティを使うだけで、JSONレスポンスのテストもかなり似ています。<p class="paragraph"/><div class="code"><pre>// controller action
def renderJson() &#123;
    render(contentType:<span class="java&#45;quote">"text/json"</span>) &#123;
        book = <span class="java&#45;quote">"Great"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test
void testRenderJson() &#123;<p class="paragraph"/>    controller.renderJson()<p class="paragraph"/>    assert '&#123;<span class="java&#45;quote">"book"</span>:<span class="java&#45;quote">"Great"</span>&#125;' == response.text
    assert <span class="java&#45;quote">"Great"</span> == response.json.book
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>json</code> property is an instance of <code>org.codehaus.groovy.grails.web.json.JSONElement</code> which is a map-like structure that is useful for parsing JSON responses.
</div><p class="paragraph"/><code>json</code>プロパティは、JSONレスポンスをパースするために便利な<code>org.codehaus.groovy.grails.web.json.JSONElement</code>のインスタンスでマップライクな構造をもっています。<p class="paragraph"/><div class="hidden-block">
<h4>Testing XML and JSON Requests</h4>
</div><p class="paragraph"/><h4>XMLとJSONリクエストのテスト</h4><p class="paragraph"/><div class="hidden-block">
Grails provides various convenient ways to automatically parse incoming XML and JSON packets. For example you can bind incoming JSON or XML requests using Grails' data binding:
</div><p class="paragraph"/>Grailsは、入力されるXMLとJSONパケットを自動的にパースするためのいろいろな便利な方法を提供しています。例えば、入力されるJSONかXMLリクエストをGrailsのデータバインディングを使ってバインドできます。<p class="paragraph"/><div class="code"><pre>def consumeBook() &#123;
    def b = <span class="java&#45;keyword">new</span> Book(params&#91;'book'&#93;)<p class="paragraph"/>    render b.title
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this Grails provides an easy way to specify an XML or JSON packet via the <code>xml</code> or <code>json</code> properties. For example the above action can be tested by specifying a String containing the XML:
</div><p class="paragraph"/>次のテストでは、<code>xml</code>や<code>json</code>プロパティを用いてXMLやJSONリクエストを設定しています。例えば、上記のアクションはXMLの文字列を設定することによってテストができます。<p class="paragraph"/><div class="code"><pre>void testConsumeBookXml() &#123;
    request.xml = '&#60;book&#62;&#60;title&#62;The Shining&#60;/title&#62;&#60;/book&#62;'
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Or alternatively a domain instance can be specified and it will be auto-converted into the appropriate XML request:
</div><p class="paragraph"/>もしくは、ドメインインスタンスを設定することで、適切なXMLリクエストに自動変換してテストをします。<p class="paragraph"/><div class="code"><pre>void testConsumeBookXml() &#123;
    request.xml = <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Shining"</span>)
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The same can be done for JSON requests:
</div><p class="paragraph"/>JSONリクエストでも同じようにテストできます。<p class="paragraph"/><div class="code"><pre>void testConsumeBookJson() &#123;
    request.json = <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Shining"</span>)
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
If you prefer not to use Grails' data binding but instead manually parse the incoming XML or JSON that can be tested too. For example consider the controller action below:
</div><p class="paragraph"/>もし、Grailsのデータバインディングを使用したくない場合は、入力されるXMLまたはJSONを手動でパースする必要がありますが、このような場合も同じようにテストできます。次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>def consume() &#123;
    request.withFormat &#123;
        xml &#123;
            render request.XML.@title
        &#125;
        json &#123;
            render request.JSON.title
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test the XML request you can specify the XML as a string:
</div><p class="paragraph"/>XMLリクエストをテストするためには、XMLの文字列を設定します。<p class="paragraph"/><div class="code"><pre>void testConsumeXml() &#123;
    request.xml = '&#60;book title=<span class="java&#45;quote">"The Stand"</span> /&#62;'<p class="paragraph"/>    controller.consume()<p class="paragraph"/>    assert response.text == 'The Stand'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
And, of course, the same can be done for JSON:
</div><p class="paragraph"/>もちろん、同じことがJSONでもできます。<p class="paragraph"/><div class="code"><pre>void testConsumeJson() &#123;
    request.json = '&#123;title:<span class="java&#45;quote">"The Stand"</span>&#125;'
    controller.consume()<p class="paragraph"/>    assert response.text == 'The Stand'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Spring Beans</h4>
</div><p class="paragraph"/><h4>Springビーンのテスト</h4><p class="paragraph"/><div class="hidden-block">
When using <code>TestFor</code> only a subset of the Spring beans available to a running Grails application are available. If you wish to make additional beans available you can do so with the <code>defineBeans</code> method of <code>GrailsUnitTestMixin</code>:
</div><p class="paragraph"/><code>TestFor</code>を使用した場合は、Grailsアプリケーションを実行するのに必要なSpringビーンのサブセットだけが利用できます。もし、利用できるビーンを追加したい場合は、<code>GrailsUnitTestMixin</code>の<code>defineBeans</code>メソッドを使うことにより、ビーンを追加できます。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    SimpleService simpleService
    def hello() &#123;
        render simpleService.sayHello()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testBeanWiring() &#123;
    defineBeans &#123;
        simpleService(SimpleService)
    &#125;<p class="paragraph"/>    controller.hello()<p class="paragraph"/>    assert response.text == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The controller is auto-wired by Spring just like in a running Grails application. Autowiring even occurs if you instantiate subsequent instances of the controller:
</div><p class="paragraph"/>コントローラは実行中のGrailsアプリケーションのように、Springによって自動的にビーンが注入されます。もしコントローラを後でインスタンス化した場合も自動的に注入されます。<p class="paragraph"/><div class="code"><pre>void testAutowiringViaNew() &#123;
    defineBeans &#123;
        simpleService(SimpleService)
    &#125;<p class="paragraph"/>    def controller1 = <span class="java&#45;keyword">new</span> SimpleController()
    def controller2 = <span class="java&#45;keyword">new</span> SimpleController()<p class="paragraph"/>    assert controller1.simpleService != <span class="java&#45;keyword">null</span>
    assert controller2.simpleService != <span class="java&#45;keyword">null</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Mime Type Handling</h4>
</div><p class="paragraph"/><h4>MIME Typeの制御のテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test mime type handling and the <code>withFormat</code> method quite simply by setting the response's <code>format</code> attribute:
</div><p class="paragraph"/>MIME Typeの制御と<code>withFormat</code>メソッドは、レスポンスの<code>format</code>属性を設定することにより簡単にテストができます。<p class="paragraph"/><div class="code"><pre>// controller action
def sayHello() &#123;
    def data = &#91;Hello:<span class="java&#45;quote">"World"</span>&#93;
    withFormat &#123;
        xml &#123; render data as XML &#125;
        html data
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test
void testSayHello() &#123;
    response.format = 'xml'
    controller.sayHello()<p class="paragraph"/>    <span class="java&#45;object">String</span> expected = '&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;' +
                      '&#60;map&#62;&#60;entry key=<span class="java&#45;quote">"Hello"</span>&#62;World&#60;/entry&#62;&#60;/map&#62;'<p class="paragraph"/>    assert expected == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Duplicate Form Submissions</h4>
</div><p class="paragraph"/><h4>フォームの２重送信テスト</h4><p class="paragraph"/><div class="hidden-block">
Testing duplicate form submissions is a little bit more involved. For example if you have an action that handles a form such as:
</div><p class="paragraph"/>フォームの２重送信のテストは少し複雑になります。例えば、次のようなフォームを処理するアクションがあるとします。<p class="paragraph"/><div class="code"><pre>def handleForm() &#123;
    withForm &#123;
        render <span class="java&#45;quote">"Good"</span>
    &#125;.invalidToken &#123;
        render <span class="java&#45;quote">"Bad"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
you want to verify the logic that is executed on a good form submission and the logic that is executed on a duplicate submission. Testing the bad submission is simple. Just invoke the controller:
</div><p class="paragraph"/>ここでフォームの送信が成功する場合と、２重送信となる場合のロジックを検証したいとします。２重送信となる場合のテストは、単にコントローラをすることで簡単に実行できます。<p class="paragraph"/><div class="code"><pre>void testDuplicateFormSubmission() &#123;
    controller.handleForm()
    assert <span class="java&#45;quote">"Bad"</span> == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Testing the successful submission requires providing an appropriate <code>SynchronizerToken</code>:
</div><p class="paragraph"/>フォームの送信が成功する場合のテストは適切な<code>SynchronizerToken</code>が必要となります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.servlet.mvc.SynchronizerToken
...<p class="paragraph"/>void testValidFormSubmission() &#123;
    def token = SynchronizerToken.store(session)
    params&#91;SynchronizerToken.KEY&#93; = token.currentToken.toString()<p class="paragraph"/>    controller.handleForm()
    assert <span class="java&#45;quote">"Good"</span> == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
If you test both the valid and the invalid request in the same test be sure to reset the response between executions of the controller:
</div><p class="paragraph"/>もし、有効/無効のリクエストを両方ともテストしたい場合、コントローラのメソッド実行の間で、レスポンスをリセットしてください。<p class="paragraph"/><div class="code"><pre>controller.handleForm() // first execution
&#8230;
response.reset()
&#8230;
controller.handleForm() // second execution</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing File Upload</h4>
</div><p class="paragraph"/><h4>ファイルアップロードのテスト</h4><p class="paragraph"/><div class="hidden-block">
You use the <code>GrailsMockMultipartFile</code> class to test file uploads. For example consider the following controller action:
</div><p class="paragraph"/>ファイルアップロードをテストするためには、<code>GrailsMockMultipartFile</code>クラスを使います。例えば、次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>def uploadFile() &#123;
    MultipartFile file = request.getFile(<span class="java&#45;quote">"myFile"</span>)
    file.transferTo(<span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/local/disk/myFile"</span>))
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this action you can register a <code>GrailsMockMultipartFile</code> with the request:
</div><p class="paragraph"/>このアクションをテストするには、リクエストに<code>GrailsMockMultipartFile</code>を設定してください。<p class="paragraph"/><div class="code"><pre>void testFileUpload() &#123;
    <span class="java&#45;keyword">final</span> file = <span class="java&#45;keyword">new</span> GrailsMockMultipartFile(<span class="java&#45;quote">"myFile"</span>, <span class="java&#45;quote">"foo"</span>.bytes)
    request.addFile(file)
    controller.uploadFile()<p class="paragraph"/>    assert file.targetFileLocation.path == <span class="java&#45;quote">"/local/disk/myFile"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>GrailsMockMultipartFile</code> constructor arguments are the name and contents of the file. It has a mock implementation of the <code>transferTo</code> method that simply records the <code>targetFileLocation</code> and doesn't write to disk.
</div><p class="paragraph"/><code>GrailsMockMultipartFile</code>のコンストラクタの引数はファイル名とファイルの内容です。これは<code>transferTo</code>のモック実装をもっており、ファイルには書き込まずに<code>targetFileLocation</code>として値を保持します。<p class="paragraph"/><div class="hidden-block">
<h4>Testing Command Objects</h4>
</div><p class="paragraph"/><h4>Commnadオブジェクトのテスト</h4><p class="paragraph"/><div class="hidden-block">
Special support exists for testing command object handling with the <code>mockCommandObject</code> method. For example consider the following action:
</div><p class="paragraph"/><code>mockCommandObject</code>メソッドにはCommandオブジェクトの処理をテストするための特別な機能があります。例えば、次のアクションを見てください。<p class="paragraph"/><div class="code"><pre>def handleCommand(SimpleCommand simple) &#123;
    <span class="java&#45;keyword">if</span> (simple.hasErrors()) &#123;
        render <span class="java&#45;quote">"Bad"</span>
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        render <span class="java&#45;quote">"Good"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this you mock the command object, populate it and then validate it as follows:
</div><p class="paragraph"/>これをテストするために、次のようにCommandオブジェクトをモック化した上で、データを投入して検証してください。<p class="paragraph"/><div class="code"><pre>void testInvalidCommand() &#123;
    def cmd = mockCommandObject(SimpleCommand)
    cmd.name = '' // doesn't allow blank names<p class="paragraph"/>    cmd.validate()
    controller.handleCommand(cmd)<p class="paragraph"/>    assert response.text == 'Bad'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Calling Tag Libraries</h4>
</div><p class="paragraph"/><h4>タグライブラリの呼び出しテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test calling tag libraries using <code>ControllerUnitTestMixin</code>, although the mechanism for testing the tag called varies from tag to tag. For example to test a call to the <code>message</code> tag, add a message to the <code>messageSource</code>. Consider the following action:
</div><p class="paragraph"/>タグごとに必要となるテストの方法は異なりますが、タグライブラリの呼びしは<code>ControllerUnitTestMixin</code>を使用することでテストできます。例えば、<code>message</code>タグを呼び出すテストでは、<code>messageSource</code>にメッセージを加えます。次のアクションを見てください。<p class="paragraph"/><div class="code"><pre>def showMessage() &#123;
    render g.message(code: <span class="java&#45;quote">"foo.bar"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This can be tested as follows:
</div><p class="paragraph"/>これは次のようにテストをします。<p class="paragraph"/><div class="code"><pre>void testRenderBasicTemplateWithTags() &#123;
    messageSource.addMessage(<span class="java&#45;quote">"foo.bar"</span>, request.locale, <span class="java&#45;quote">"Hello World"</span>)<p class="paragraph"/>    controller.showMessage()<p class="paragraph"/>    assert response.text == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div>


<a name="9.1.2 Unit Testing Tag Libraries"><!-- Legacy link --></a>
<h2 id="unitTestingTagLibraries">11.1.2 タグライブラリユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
Tag libraries and GSP pages can be tested with the <code>grails.test.mixin.web.GroovyPageUnitTestMixin</code> mixin. To use the mixin declare which tag library is under test with the <code>TestFor</code> annotation:
</div><p class="paragraph"/>タグライブラリとGSPは、<code>grails.test.mixin.web.GroovyPageUnitTestMixin</code>のMixinでテストできます。Mixinを使用するために、タグライブラリを<code>TestFor</code>アノテーションの中に宣言します。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleTagLib)
class SimpleTagLibTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Note that if you are testing invocation of a custom tag from a controller you can combine the <code>ControllerUnitTestMixin</code> and the <code>GroovyPageUnitTestMixin</code> using the <code>Mock</code> annotation:
</div><p class="paragraph"/>もし、コントローラからカスタムタグの呼び出しをテストする場合、<code>Mock</code>アノテーションを使用して<code>ControllerUnitTestMixin</code>と<code>GroovyPageUnitTestMixin</code>を組み合わせることができます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(SimpleTagLib)
class GroovyPageUnitTestMixinTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Custom Tags</h4>
</div><p class="paragraph"/><h4>カスタムタグのテスト</h4><p class="paragraph"/><div class="hidden-block">
The core Grails tags don't need to be enabled during testing, however custom tag libraries do. The <code>GroovyPageUnitTestMixin</code> class provides a <code>mockTagLib()</code> method that you can use to mock a custom tag library. For example consider the following tag library:
</div><p class="paragraph"/>Grailsコアのタグはテスト中に有効にする必要はありませんが、カスタムタグライブラリは有効にする必要があります。<code>GroovyPageUnitTestMixin</code>クラスは、カスタムタグライブラリをモック化するために使える<code>mockTagLib()</code>メソッドを提供しています。<p class="paragraph"/><div class="code"><pre>class SimpleTagLib &#123;<p class="paragraph"/>    <span class="java&#45;keyword">static</span> namespace = 's'<p class="paragraph"/>    def hello = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"Hello $&#123;attrs.name ?: 'World'&#125;"</span>
    &#125;<p class="paragraph"/>    def bye = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"Bye $&#123;attrs.author.name ?: 'World'&#125;"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You can test this tag library by using <code>TestFor</code> and supplying the name of the tag library:
</div><p class="paragraph"/><code>TestFor</code>を使用し、タグライブラリの名前を記載することによって、上記のタグライブラリをテストできます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleTagLib)
class SimpleTagLibTests &#123;
    void testHelloTag() &#123;
        assert applyTemplate('&#60;s:hello /&#62;') == 'Hello World'
        assert applyTemplate('&#60;s:hello name=<span class="java&#45;quote">"Fred"</span> /&#62;') == 'Hello Fred'
        assert applyTemplate('&#60;s:bye author=<span class="java&#45;quote">"&#36;&#123;author&#125;"</span> /&#62;', &#91;author: <span class="java&#45;keyword">new</span> Author(name: 'Fred')&#93;) == 'Bye Fred'
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Alternatively, you can use the <code>TestMixin</code> annotation and mock multiple tag libraries using the <code>mockTagLib()</code> method:
</div><p class="paragraph"/>代わりに、<code>TestMixin</code>アノテーションと<code>mockTagLib()</code>メソッドにより、複数のタグライブラリをモック化することができます。<p class="paragraph"/><div class="code"><pre>@grails.test.mixin.TestMixin(GroovyPageUnitTestMixin)
class MultipleTagLibraryTests &#123;<p class="paragraph"/>    @Test
    void testMuliple() &#123;
        mockTagLib(FirstTagLib)
        mockTagLib(SecondTagLib)<p class="paragraph"/>        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>GroovyPageUnitTestMixin</code> provides convenience methods for asserting that the template output equals or matches an expected value.
</div><p class="paragraph"/><code>GroovyPageUnitTestMixin</code>はテンプレート出力が期待した値と同じであることを検証するために便利なメソッドを提供しています。<p class="paragraph"/><div class="code"><pre>@grails.test.mixin.TestMixin(GroovyPageUnitTestMixin)
class MultipleTagLibraryTests &#123;<p class="paragraph"/>    @Test
    void testMuliple() &#123;
        mockTagLib(FirstTagLib)
        mockTagLib(SecondTagLib)
        assertOutputEquals ('Hello World', '&#60;s:hello /&#62;')
        assertOutputMatches (/.&#42;Fred.&#42;/, '&#60;s:hello name=<span class="java&#45;quote">"Fred"</span> /&#62;')
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing View and Template Rendering</h4>
</div><p class="paragraph"/><h4>表示とテンプレートのレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test rendering of views and templates in <code>grails-app/views</code> via the <code>render(Map)</code> method provided by <code>GroovyPageUnitTestMixin</code> :
</div><p class="paragraph"/><code>GroovyPageUnitTestMixin</code>で提供されている<code>render(Map)</code>メソッドを使って<code>grails-app/views</code>内にあるビューとテンプレートのレンダリングをテストできます。<p class="paragraph"/><div class="code"><pre>def result = render(template: <span class="java&#45;quote">"/simple/hello"</span>)
assert result == <span class="java&#45;quote">"Hello World"</span></pre></div><p class="paragraph"/><div class="hidden-block">
This will attempt to render a template found at the location <code>grails-app/views/simple/_hello.gsp</code>. Note that if the template depends on any custom tag libraries you need to call <code>mockTagLib</code> as described in the previous section.
</div><p class="paragraph"/>これは、<code>grails-app/views/simple/_hello.gsp</code>に配置されているテンプレートをレンダリングします。もしテンプレートがいくつかのカスタムタグライブラリに依存している場合、前の節で記載した<code>mockTagLib</code>を呼び出す必要があります。


<a name="9.1.3 Unit Testing Domains"><!-- Legacy link --></a>
<h2 id="unitTestingDomains">11.1.3 ドメインユニットテスト</h2>
<div class="hidden-block">
<h4>Overview</h4>
</div>
<h4>概要</h4><p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The mocking support described here is best used when testing non-domain artifacts that use domain classes, to let you focus on testing the artifact without needing a database. But when testing persistence it's best to use integration tests which configure Hibernate and use a database.
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
モック機能のサポートは、非ドメインクラスがドメインクラスを使用している場合に、データベースを必要とせず、テストに集中できるという意味では最適な方法です。しかし、ドメインの永続化のテストを行いたい場合はHibernateとデータベースを使用するIntegrationテストが最適な方法です。
</blockquote><p class="paragraph"/><div class="hidden-block">
Domain class interaction can be tested without involving a database connection using <code>DomainClassUnitTestMixin</code>. This implementation mimics the behavior of GORM against an in-memory <code>ConcurrentHashMap</code> implementation. Note that this has limitations compared to a real GORM implementation. The following features of GORM for Hibernate can only be tested within an integration test:
</div><p class="paragraph"/>ドメインクラスとしての振る舞いは<code>DomainClassUnitTestMixin</code>を使用することで、データベースを必要とせずにテストを行うことができます。この実装はGORMの振る舞いを擬似した、メモリ上の<code>ConcurrentHashMap</code>です。この実装は実際のGORMの動作と比べて制限があることに注意してください。以下のHibernateに対するGORMの機能はIntegrationテストでのみテストできます。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li>String-based HQL queries</li>
<li>composite identifiers</li>
<li>dirty checking methods</li>
<li>any direct interaction with Hibernate</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li>文字列ベースのHQLクエリ</li>
<li>複合主キー</li>
<li>dirtyチェックメソッド</li>
<li>Hibernateの直接操作</li>
</ul><p class="paragraph"/><div class="hidden-block">
However a large, commonly-used portion of the GORM API can be mocked using <code>DomainClassUnitTestMixin</code> including:
</div><p class="paragraph"/>上記以外の、よく使用されるGORM APIの大部分は<code>DomainClassUnitTestMixin</code>を使用することでモック化することができます。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li>Simple persistence methods like <code>save()</code>, <code>delete()</code> etc.</li>
<li>Dynamic Finders</li>
<li>Named Queries</li>
<li>Query-by-example</li>
<li>GORM Events</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>save()</code>や<code>delete()</code>といった永続化メソッド</li>
<li>ダイナミックファインダー</li>
<li>名前付きクエリ</li>
<li>Exampleによるクエリ</li>
<li>GORMのイベント</li>
</ul><p class="paragraph"/><div class="hidden-block">
If something isn't supported then <code>GrailsUnitTestMixin</code>'s <code>mockFor</code> method can come in handy to mock the missing pieces. Alternatively you can write an integration test which bootstraps the complete Grails environment at a cost of test execution time.
</div><p class="paragraph"/>もしサポートされてないない部分があった場合でも、<code>GrailsUnitTestMixin</code>の<code>mockFor</code>メソッドを使用することで足りない部分をモック化することができます。または、テストの実行時間はかかりますが、完全にGrails環境が立ち上がるIntegrationテストを使用することもできます。<p class="paragraph"/><div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
<code>DomainClassUnitTestMixin</code> is typically used in combination with testing either a controller, service or tag library where the domain is a mock collaborator defined by the <code>Mock</code> annotation:
</div><p class="paragraph"/><code>DomainClassUnitTestMixin</code>は、通常コントローラやサービス、またはタグライブラリといった、<code>Mock</code>アノテーションでドメインがモックとして協調動作する必要がある場所で使用されます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(SimpleController)
@Mock(Simple)
class SimpleControllerTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The example above tests the <code>SimpleController</code> class and mocks the behavior of the <code>Simple</code> domain class as well. For example consider a typical scaffolded <code>save</code> controller action:
</div><p class="paragraph"/>上記の例では<code>SimpleController</code>のテストで<code>Simple</code>ドメインクラスとして振る舞うモックを宣言しています。例えば典型的なスキャフォルドで生成されたコントローラの<code>save</code>アクションについて考えてみます。<p class="paragraph"/><div class="code"><pre>class BookController &#123;
    def save() &#123;
        def book = <span class="java&#45;keyword">new</span> Book(params)
        <span class="java&#45;keyword">if</span> (book.save(flush: <span class="java&#45;keyword">true</span>)) &#123;
            flash.message = message(
                    code: '<span class="java&#45;keyword">default</span>.created.message',
                    args: &#91;message(code: 'book.label',
                                   <span class="java&#45;keyword">default</span>: 'Book'), book.id&#93;)&#125;<span class="java&#45;quote">"
            redirect(action: "</span>show<span class="java&#45;quote">", id: book.id)
        &#125;
        <span class="java&#45;keyword">else</span> &#123;
            render(view: "</span>create", model: &#91;bookInstance: book&#93;)
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Tests for this action can be written as follows:
</div><p class="paragraph"/>このアクションに対するテストは次のように書けます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(BookController)
@Mock(Book)
class BookControllerTests &#123;<p class="paragraph"/>    void testSaveInvalidBook() &#123;
        controller.save()<p class="paragraph"/>        assert model.bookInstance != <span class="java&#45;keyword">null</span>
        assert view == '/book/create'
    &#125;<p class="paragraph"/>    void testSaveValidBook() &#123;
        params.title = <span class="java&#45;quote">"The Stand"</span>
        params.pages = <span class="java&#45;quote">"500"</span><p class="paragraph"/>        controller.save()<p class="paragraph"/>        assert response.redirectedUrl == '/book/show/1'
        assert flash.message != <span class="java&#45;keyword">null</span>
        assert Book.count() == 1
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<code>Mock</code> annotation also supports a list of mock collaborators if you have more than one domain to mock:
</div><p class="paragraph"/>複数のドメインのモックが必要な場合は<code>Mock</code>アノテーションにリストで指定することができます。<p class="paragraph"/><div class="code"><pre>@TestFor(BookController)
@Mock(&#91;Book, Author&#93;)
class BookControllerTests &#123;
   &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Alternatively you can also use the <code>DomainClassUnitTestMixin</code> directly with the <code>TestMixin</code> annotation:
</div><p class="paragraph"/>別の方法として<code>TestMixin</code>アノテーションに直接<code>DomainClassUnitTestMixin</code>を指定する方法もあります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.domain.DomainClassUnitTestMixin<p class="paragraph"/>@TestFor(BookController)
@TestMixin(DomainClassUnitTestMixin)
class BookControllerTests &#123;
   &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
And then call the <code>mockDomain</code> method to mock domains during your test:
</div><p class="paragraph"/>そしてテストの中でドメインをモック化する<code>mockDomain</code>メソッドを呼び出します。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    mockDomain(Author)
    mockDomain(Book)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>mockDomain</code> method also includes an additional parameter that lets you pass a Map of Maps to configure a domain, which is useful for fixture-like data:
</div><p class="paragraph"/><code>mockDomain</code>メソッドは、ドメインを構築するマップの一覧を与えることで、データのフィクスチャを生成するような使い方もできます。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    mockDomain(Book, &#91;
            &#91;title: <span class="java&#45;quote">"The Stand"</span>, pages: 1000&#93;,
            &#91;title: <span class="java&#45;quote">"The Shining"</span>, pages: 400&#93;,
            &#91;title: <span class="java&#45;quote">"Along Came a Spider"</span>, pages: 300&#93; &#93;)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Constraints</h4>
</div><p class="paragraph"/><h4>制約のテスト</h4><p class="paragraph"/><div class="hidden-block">
Your constraints contain logic and that logic is highly susceptible to bugs - the kind of bugs that can be tricky to track down (particularly as by default <code>save()</code> doesn't throw an exception when it fails). If your answer is that it's too hard or fiddly, that is no longer an excuse. Enter the <code>mockForConstraintsTests()</code> method.
</div><p class="paragraph"/>制約にロジックが含まれている場合は、そのロジックは非常にバグを生みやすく、またそのバグの追跡は簡単なものではありません(特にデフォルトで<code>save()</code>が処理が失敗した場合でも例外をスローしないということもあります)。もしそのような面倒な解析に時間を取られたくない場合は、<code>mockForConstraintsTests()</code>メソッドを使用してください。<p class="paragraph"/><div class="hidden-block">
This method is like a much reduced version of the <code>mockDomain()</code> method that simply adds a <code>validate()</code> method to a given domain class. All you have to do is mock the class, create an instance with populated data, and then call <code>validate()</code>. You can then access the <code>errors</code> property to determine if validation failed. So if all we are doing is mocking the <code>validate()</code> method, why the optional list of test instances? That is so that we can test the <code>unique</code> constraint as you will soon see.
</div><p class="paragraph"/>このメソッドは<code>mockDoman()</code>メソッドの縮小版のようなもので、単に与えられたドメインクラスに対して<code>validate()</code>メソッドを追加します。やるべきことはクラスをモック化し、必要なデータと共にインスタンスを生成して、<code>validate()</code>を呼び出すだけです。<code>errors</code>プロパティを参照することで、検証が失敗したかどうかを確かめられます。<p class="paragraph"/>また、なぜ<code>mockForConstraintsTests()</code>に追加でテスト用のインスタンスが指定できるようになっているのでしょうか？モック化された<code>validate</code>メソッドを呼ぶだけならば必要なさそうですが、これは<code>unique</code>制約のテストを行えるようにするためです。<p class="paragraph"/><div class="hidden-block">
So, suppose we have a simple domain class:
</div><p class="paragraph"/>次のようなドメインクラスがあったとします。<p class="paragraph"/><div class="code"><pre>class Book &#123;<p class="paragraph"/>    <span class="java&#45;object">String</span> title
    <span class="java&#45;object">String</span> author<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        title blank: <span class="java&#45;keyword">false</span>, unique: <span class="java&#45;keyword">true</span>
        author blank: <span class="java&#45;keyword">false</span>, minSize: 5
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Don't worry about whether the constraints are sensible (they're not!), they are for demonstration only. To test these constraints we can do the following:
</div><p class="paragraph"/>この制約は単なる例で、本来この制約が正しいかどうかは気にしないでください。この制約のテストは次のように行えます。<p class="paragraph"/><div class="code"><pre>@TestFor(Book)
class BookTests &#123;
    void testConstraints() &#123;<p class="paragraph"/>        def existingBook = <span class="java&#45;keyword">new</span> Book(
                title: <span class="java&#45;quote">"Misery"</span>,
                author: <span class="java&#45;quote">"Stephen King"</span>)<p class="paragraph"/>        mockForConstraintsTests(Book, &#91;existingBook&#93;)<p class="paragraph"/>        // validation should fail <span class="java&#45;keyword">if</span> both properties are <span class="java&#45;keyword">null</span>
        def book = <span class="java&#45;keyword">new</span> Book()<p class="paragraph"/>        assert !book.validate()
        assert <span class="java&#45;quote">"nullable"</span> == book.errors&#91;<span class="java&#45;quote">"title"</span>&#93;.code
        assert <span class="java&#45;quote">"nullable"</span> == book.errors&#91;<span class="java&#45;quote">"author"</span>&#93;.code<p class="paragraph"/>        // So let's demonstrate the unique and minSize constraints<p class="paragraph"/>        book = <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"Misery"</span>, author: <span class="java&#45;quote">"JK"</span>)
        assert !book.validate()
        assert <span class="java&#45;quote">"unique"</span> == book.errors&#91;<span class="java&#45;quote">"title"</span>&#93;.code
        assert <span class="java&#45;quote">"minSize"</span> == book.errors&#91;<span class="java&#45;quote">"author"</span>&#93;.code<p class="paragraph"/>        // Validation should pass!
        book = <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"The Shining"</span>, author: <span class="java&#45;quote">"Stephen King"</span>)
        assert book.validate()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You can probably look at that code and work out what's happening without any further explanation. The one thing we will explain is the way the <code>errors</code> property is used. First, is a real Spring <code>Errors</code> instance, so you can access all the properties and methods you would normally expect. Second, this particular <code>Errors</code> object also has map/property access as shown. Simply specify the name of the field you are interested in and the map/property access will return the name of the constraint that was violated. Note that it is the constraint name, not the message code (as you might expect).
</div><p class="paragraph"/>おそらくコードを見れば、特に説明しなくても何が起きているのが想像できると思います。そのひとつは<code>errors</code>プロパティの使用方法です。これは本物のSpringの<code>Errors</code>インスタンスで、既存のプロパティとメソッドにアクセス可能かつ、マップ/プロパティ形式でアクセスすることができる特別な<code>Errors</code>オブジェクトです。この機能は単に確認したいフィールドの名前をマップ/プロパティ形式で指定すると制約違反のあった名前を返します。返す値は制約の名前で、メッセージコードの値ではないことに注意してください。<p class="paragraph"/><div class="hidden-block">
That's it for testing constraints. One final thing we would like to say is that testing the constraints in this way catches a common error: typos in the "constraints" property name! It is currently one of the hardest bugs to track down normally, and yet a unit test for your constraints will highlight the problem straight away.
</div><p class="paragraph"/>制約に関してはここまでです。最後に言いたいことは"constraints"という名前のタイプミスを見つけられるということです！これは通常発見するのが非常に難しいバグですが、制約のテストを行うことですぐに問題を明らかにできます。


<a name="9.1.4 Unit Testing Filters"><!-- Legacy link --></a>
<h2 id="unitTestingFilters">11.1.4 フィルタユニットテスト</h2>
Unit testing filters is typically a matter of testing a controller where a filter is a mock collaborator. For example consider the following filters class:<p class="paragraph"/><div class="code"><pre>class CancellingFilters &#123;
    def filters = &#123;
        all(controller:<span class="java&#45;quote">"simple"</span>, action:<span class="java&#45;quote">"list"</span>) &#123;
            before = &#123;
                redirect(controller:<span class="java&#45;quote">"book"</span>)
                <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span>
            &#125;
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>This filter interceptors the <code>list</code> action of the <code>simple</code> controller and redirects to the <code>book</code> controller. To test this filter you start off with a test that targets the <code>SimpleController</code> class and add the <code>CancellingFilters</code> as a mock collaborator:<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(CancellingFilters)
class SimpleControllerTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/>You can then implement a test that uses the <code>withFilters</code> method to wrap the call to an action in filter execution:<p class="paragraph"/><div class="code"><pre>void testInvocationOfListActionIsFiltered() &#123;
    withFilters(action:<span class="java&#45;quote">"list"</span>) &#123;
        controller.list()
    &#125;
    assert response.redirectedUrl == '/book'
&#125;</pre></div><p class="paragraph"/>Note that the <code>action</code> parameter is required because it is unknown what the action to invoke is until the action is actually called. The <code>controller</code> parameter is optional and taken from the controller under test. If it is another controller you are testing then you can specify it:<p class="paragraph"/><div class="code"><pre>withFilters(controller:<span class="java&#45;quote">"book"</span>,action:<span class="java&#45;quote">"list"</span>) &#123;
    controller.list()
&#125;</pre></div>


<a name="9.1.5 Unit Testing URL Mappings"><!-- Legacy link --></a>
<h2 id="unitTestingURLMappings">11.1.5 URLマッピングユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
Testing URL mappings can be done with the <code>TestFor</code> annotation testing a particular URL mappings class. For example to test the default URL mappings you can do the following:
</div><p class="paragraph"/>URLマッピングをテストするには、<code>TestFor</code>アノテーションを使用します。例えば、デフォルトのURLマッピングをテストするためには次のように使用します。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.example.AuthorController
<span class="java&#45;keyword">import</span> org.example.SimpleController<p class="paragraph"/>@TestFor(UrlMappings)
@Mock(&#91;AuthorController, SimpleController&#93;)
class UrlMappingsTests &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
As you can see, any controller that is the target of a URL mapping that you're testing  <em class="italic">must</em>  be added to the <code>&#64;Mock</code> annotation.
</div><p class="paragraph"/>上記のように、テストを実施するURLマッピングの対象となるコントローラには<code>Mock</code>アノテーションを追加しなければなりません。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
Note that since the default <code>UrlMappings</code> class is in the default package your test must also be in the default package
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
<code>UrlMappings</code>クラスがデフォルトパッケージの中にあるので、あなたが実行するテストもデフォルトパッケージの中になければいけません。
</blockquote><p class="paragraph"/><div class="hidden-block">
With that done there are a number of useful methods that are defined by the <code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code> for testing URL mappings. These include:
</div><p class="paragraph"/>URLマッピングをテストするために<code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code>には以下のような便利なメソッドが定義されています。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertForwardUrlMapping</code> - Asserts a URL mapping is forwarded for the given controller class (note that controller will need to be defined as a mock collaborate for this to work)</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertForwardUrlMapping</code> - 指定したコントローラクラスにフォワードするURLマッピングを検証する（コントローラはモックコラボレータとして定義される必要があることに注意してください）</li>
</ul><p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertReverseUrlMapping</code> - Asserts that the given URL is produced when reverse mapping a link to a given controller and action</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertReverseUrlMapping</code> - 指定したURLが、与えられたコントローラとアクションからリバースマッピングしたリンクとして生成されるか検証する</li>
</ul><p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertUrlMapping</code> - Asserts a URL mapping is valid for the given URL. This combines the <code>assertForwardUrlMapping</code> and <code>assertReverseUrlMapping</code> assertions</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertUrlMapping</code> - 指定したURLに対応するURLマッピングの妥当性を検証する。これは、<code>assertForwardUrlMapping</code>と<code>assertReverseUrlMapping</code>を組み合わせたものです。</li>
</ul><p class="paragraph"/><div class="hidden-block">
<h4>Asserting Forward URL Mappings</h4>
</div><p class="paragraph"/><h4>URLマッピングの転送の検証</h4><p class="paragraph"/><div class="hidden-block">
You use <code>assertForwardUrlMapping</code> to assert that a given URL maps to a given controller. For example, consider the following URL mappings:
</div><p class="paragraph"/>指定したURLが、期待したコントローラにマップされるか検証するために<code>assertForwardUrlMapping</code>が使用できます。例えば、以下のようなURLマッピングについて考えてみます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">static</span> mappings = &#123;
    <span class="java&#45;quote">"/action1"</span>(controller: <span class="java&#45;quote">"simple"</span>, action: <span class="java&#45;quote">"action1"</span>)
    <span class="java&#45;quote">"/action2"</span>(controller: <span class="java&#45;quote">"simple"</span>, action: <span class="java&#45;quote">"action2"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The following test can be written to assert these URL mappings:
</div><p class="paragraph"/>このようなURLマッピングのテストは次のように書けます。<p class="paragraph"/><div class="code"><pre>void testUrlMappings() &#123;<p class="paragraph"/>    assertForwardUrlMapping(<span class="java&#45;quote">"/action1"</span>, controller: 'simple',
                                        action: <span class="java&#45;quote">"action1"</span>)<p class="paragraph"/>    assertForwardUrlMapping(<span class="java&#45;quote">"/action2"</span>, controller: 'simple',
                                        action: <span class="java&#45;quote">"action2"</span>)<p class="paragraph"/>    shouldFail &#123;
        assertForwardUrlMapping(<span class="java&#45;quote">"/action2"</span>, controller: 'simple',
                                            action: <span class="java&#45;quote">"action1"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Assert Reverse URL Mappings</h4>
</div><p class="paragraph"/><h4>URLマッピングのリバース検証</h4><p class="paragraph"/><div class="hidden-block">
You use <code>assertReverseUrlMapping</code> to check that correct links are produced for your URL mapping when using the <code>link</code> tag in GSP views. An example test is largely identical to the previous listing except you use <code>assertReverseUrlMapping</code> instead of <code>assertForwardUrlMapping</code>. Note that you can combine these 2 assertions with <code>assertUrlMapping</code>.
</div><p class="paragraph"/>GSPのビューで<code>link</code>タグを使用した場合に、URLマッピングから生成されるリンクを確認(チェック)するために<code>assertReverseUrlMapping</code>を使用できます。
<code>assertReverseUrlMapping</code>の代わりに<code>assertForwardUrlMapping</code>を使用する以外は上記の例とほとんど同じです。
<code>assertUrlMapping</code>はこれら2つのアサーションを組み合わせた検証が出来ます。<p class="paragraph"/><div class="hidden-block">
<h4>Simulating Controller Mapping</h4>
</div><p class="paragraph"/><h4>コントローラのマッピングをシミュレート</h4><p class="paragraph"/><div class="hidden-block">
In addition to the assertions to check the validity of URL mappings you can also simulate mapping to a controller by using your <code>UrlMappings</code> as a mock collaborator and the <code>mapURI</code> method. For example:
</div><p class="paragraph"/>URLマッピングの妥当性をチェックするためのアサーションに加えて、<code>UrlMappings</code>をモックとして指定し<code>mapURI</code>メソッドを使用することで、コントローラへのマッピングをシミュレートすることができます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(UrlMappings)
class SimpleControllerTests &#123;<p class="paragraph"/>    void testControllerMapping() &#123;<p class="paragraph"/>        SimpleController controller = mapURI('/simple/list')
        assert controller != <span class="java&#45;keyword">null</span><p class="paragraph"/>        def model = controller.list()
        assert model != <span class="java&#45;keyword">null</span>
    &#125;
&#125;</pre></div>


<a name="9.1.6 Mocking Collaborators"><!-- Legacy link --></a>
<h2 id="mockingCollaborators">11.1.6 モッキングコラボレータ</h2>
<div class="hidden-block">
Beyond the specific targeted mocking APIs there is also an all-purpose <code>mockFor()</code> method that is available when using the <code>TestFor</code> annotation. The signature of <code>mockFor</code> is:
</div>
ドメインをモックするなど特定の目的をもったモックAPIの他に、汎用的に使える<code>mockFor()</code>メソッドがあります。これは<code>TestFor</code>アノテーションを使用している場合にも使用できます。<code>mockFor</code>は以下のように使用します。<p class="paragraph"/><div class="code"><pre>mockFor(class, loose = <span class="java&#45;keyword">false</span>)</pre></div><p class="paragraph"/><div class="hidden-block">
This is general-purpose mocking that lets you set up either strict or loose demands on a class.
</div>
<code>mockFor</code>を使用したモックでは、demand(要求)がstrict(厳密)、またはloose(緩やか)のどちらであるかを指定する必要があります。<p class="paragraph"/><div class="hidden-block">
This method is surprisingly intuitive to use. By default it will create a strict mock control object (one for which the order in which methods are called is important) that you can use to specify demands:
</div>
デフォルトではstrictなモック制御オブジェクト(メソッドの呼び出し順序をチェックする)として生成し、demandを次のように指定します。<p class="paragraph"/><div class="code"><pre>def strictControl = mockFor(MyService)
strictControl.demand.someMethod(0..2) &#123; <span class="java&#45;object">String</span> arg1, <span class="java&#45;object">int</span> arg2 &#45;&#62; &#8230; &#125;
strictControl.demand.<span class="java&#45;keyword">static</span>.aStaticMethod &#123;&#45;&#62; &#8230; &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Notice that you can mock static as well as instance methods by using the "static" property. You then specify the name of the method to mock, with an optional range argument. This range determines how many times you expect the method to be called, and if the number of invocations falls outside of that range (either too few or too many) then an assertion error will be thrown. If no range is specified, a default of "1..1" is assumed, i.e. that the method must be called exactly once.
</div>
"static"プロパティを使用することで、インスタンスメソッド同様にstaticなメソッドをモックすることができます。また、モックするメソッドには、必要に応じてrange(範囲)を引数に指定できます。このrangeは期待するメソッドの呼び出し回数を表しており、もし呼び出し回数がこの範囲を外れた場合(多すぎたり、少なすぎたりした場合)は、アサーションエラーがスローされます。rangeを指定しなかった場合は、デフォルトで"1..1"が指定され、メソッドが1度だけ呼び出されること意味しています。<p class="paragraph"/><div class="hidden-block">
The last part of a demand is a closure representing the implementation of the mock method. The closure arguments must match the number and types of the mocked method, but otherwise you are free to add whatever you want in the body.
</div>
demandの最後の引数は、モックの実装を表すクロージャです。クロージャの引数は、モックするメソッドの引数の数と型が一致している必要がありますが、それ以外は自由に中身を実装できます。<p class="paragraph"/><div class="hidden-block">
Call <code>mockControl.createMock()</code> to get an actual mock instance of the class that you are mocking. You can call this multiple times to create as many mock instances as you need. And once you have executed the test method, call <code>mockControl.verify()</code> to check that the expected methods were called.
</div>
モッククラスの定義が完了した後に、<code>mockControl.createMock()</code>メソッドを呼ぶことで、モックインスタンスを作成します。複数のモックインスタンスが必要な場合は、必要なだけこのメソッドを呼び出すことで、複数のモックインスタンスが作成できます。また期待するメソッドの呼び出しを検証するには<code>mockControl.verify()</code>を呼び出してください。<p class="paragraph"/><div class="hidden-block">
Grails mocks also provide a <code>demandExplicit</code> method that can be used in place of demand.  This will check the mocked class's metaClass and throw an ExplicitDemandException if a method with that name and signature doesn't exist. For example, given the service:
</div>
Grailsのモックは、demandの代わりに<code>demandExplicit</code>メソッドも提供しています。これはモックするクラスのmetaClassをチェックし、もしそのメソッドの名前、シグネチャが存在しない場合に、ExplicitDemandExceptionをスローします。例えば次のようなサービスがあるとします。<p class="paragraph"/><div class="code"><pre>class MyService &#123;
    def someMethod(<span class="java&#45;object">String</span> s) &#123; &#8230; &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The following mocking works the same as demand
</div>
demandと同じようにモックできます。<p class="paragraph"/><div class="code"><pre>def strictControl = mockFor(MyService)
//Works just like the demand method since method signature exists on the class
strictControl.demandExplicit.someMethod(1) &#123; <span class="java&#45;object">String</span> arg1  &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
While this mocking throws an ExplicitDemandException when the test is run.
</div>
以下はメソッドのシグネイチャが存在しないため、テストを実行した際にExplicitDemandExceptionをスローします。
<div class="code"><pre>def strictControl = mockFor(MyService)
//Throws ExplicitDemandException because method signature doesn't exist
strictControl.demandExplicit.someMethod(1) &#123; <span class="java&#45;object">String</span> arg1, <span class="java&#45;object">String</span> arg2  &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Using demandExplicit should be the preferred method for mocking as it is more likely to catch issues when changing method signatures.  Use demand when the method to be mocked is added dynamically, otherwise use demandExplicit.
</div>
demandExplicitを使用することで、メソッドのシグネチャを変更した際に、問題を検出しやすくなります。このため、動的に追加されるメソッドに対してはdemandを使用し、そうでなければdemandExplicitを使用してください。<p class="paragraph"/><div class="hidden-block">
Lastly, the call:
</div>
最後に以下のコードを見てください。<p class="paragraph"/><div class="code"><pre>def looseControl = mockFor(MyService, <span class="java&#45;keyword">true</span>)</pre></div><p class="paragraph"/><div class="hidden-block">
will create a mock control object that has only loose expectations, i.e. the order that methods are invoked does not matter.
</div>
これはlooseなモック制御オブジェクトを作成します。別の言い方をすると、これにより呼び出し順序をチェックしなくなります。


<a name="9.1.7 Mocking Codecs"><!-- Legacy link --></a>
<h2 id="mockingCodecs">11.1.7 Mocking Codecs</h2>
<div class="hidden-block">
The <code>GrailsUnitTestMixin</code> provides a <code>mockCodec</code> method for mocking <a href="../guide/single.html#codecs" class="guide">custom codecs</a> which may be invoked while a unit test is running.
</div><p class="paragraph"/><code>GrailsUnitTestMixin</code>は<a href="../guide/single.html#codecs" class="guide">カスタムコーデック</a>のモックを生成するための<code>mockCodec</code>メソッドを提供しています。このメソッドはユニットテストの実施中に呼び出される可能性があります。<p class="paragraph"/><div class="code"><pre>mockCodec(MyCustomCodec)</pre></div><p class="paragraph"/><div class="hidden-block">
Failing to mock a codec which is invoked while a unit test is running may result in a MissingMethodException.
</div><p class="paragraph"/>コーデックのモック生成に失敗している場合は、ユニットテストが<code>MissingMethodException</code>で終了する可能性があります。



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/services.html">&lt;&lt; <strong>10</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/i18n.html"><strong>12</strong><span>&#22269;&#38555;&#21270;</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Command%20Line/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/add-proxy.html">add-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/alias.html">alias</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/bootstrap.html">bootstrap</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/bug-report.html">bug-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/clean.html">clean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/clear-proxy.html">clear-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/compile.html">compile</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/console.html">console</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-app.html">create-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-controller.html">create-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-domain-class.html">create-domain-class</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-filters.html">create-filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-hibernate-cfg-xml.html">create-hibernate-cfg-xml</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-integration-test.html">create-integration-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-multi-project-build.html">create-multi-project-build</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-plugin.html">create-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-pom.html">create-pom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-scaffold-controller.html">create-scaffold-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-script.html">create-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-service.html">create-service</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-tag-lib.html">create-tag-lib</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/create-unit-test.html">create-unit-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/dependency-report.html">dependency-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/doc.html">doc</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-all.html">generate-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-controller.html">generate-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/generate-views.html">generate-views</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/help.html">help</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/init.html">init</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-dependency.html">install-dependency</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-plugin.html">install-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/install-templates.html">install-templates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/integrate-with.html">integrate-with</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/interactive.html">interactive</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/list-plugin-updates.html">list-plugin-updates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/list-plugins.html">list-plugins</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/migrate-docs.html">migrate-docs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/package-plugin.html">package-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/package.html">package</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/plugin-info.html">plugin-info</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/refresh-dependencies.html">refresh-dependencies</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/remove-proxy.html">remove-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-app.html">run-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-script.html">run-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/run-war.html">run-war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/schema-export.html">schema-export</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/set-proxy.html">set-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/set-version.html">set-version</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/shell.html">shell</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/stats.html">stats</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/stop-app.html">stop-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/test-app.html">test-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/uninstall-plugin.html">uninstall-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/upgrade.html">upgrade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/war.html">war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/wrapper.html">wrapper</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Constraints</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Constraints/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Constraints/attributes.html">attributes</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/bindable.html">bindable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/blank.html">blank</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/creditCard.html">creditCard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/email.html">email</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/inList.html">inList</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/matches.html">matches</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/max.html">max</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/maxSize.html">maxSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/min.html">min</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/minSize.html">minSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/notEqual.html">notEqual</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/nullable.html">nullable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/range.html">range</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/scale.html">scale</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/size.html">size</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/unique.html">unique</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/url.html">url</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/validator.html">validator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Constraints/widget.html">widget</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Controllers</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Controllers/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Controllers/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/afterInterceptor.html">afterInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/allowedMethods.html">allowedMethods</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/beforeInterceptor.html">beforeInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/bindData.html">bindData</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/chain.html">chain</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/defaultAction.html">defaultAction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/forward.html">forward</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/grailsApplication.html">grailsApplication</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/redirect.html">redirect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/session.html">session</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/withForm.html">withForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Controllers/withFormat.html">withFormat</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Database Mapping</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/autoImport.html">autoImport</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/autoTimestamp.html">autoTimestamp</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/batchSize.html">batchSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/cache.html">cache</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/cascade.html">cascade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/column.html">column</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/comment.html">comment</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/discriminator.html">discriminator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/dynamicInsert.html">dynamicInsert</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/dynamicUpdate.html">dynamicUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/fetch.html">fetch</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/id.html">id</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/ignoreNotFound.html">ignoreNotFound</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/indexColumn.html">indexColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/insertable.html">insertable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/joinTable.html">joinTable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/lazy.html">lazy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/order.html">order</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/sort.html">sort</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/table.html">table</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/type.html">type</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/updateable.html">updateable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Database%20Mapping/version.html">version</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Classes</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/addTo.html">addTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/attach.html">attach</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/belongsTo.html">belongsTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/clearErrors.html">clearErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/constraints.html">constraints</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/count.html">count</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/countBy.html">countBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/createCriteria.html">createCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/delete.html">delete</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/discard.html">discard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/embedded.html">embedded</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/errors.html">errors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/executeQuery.html">executeQuery</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/executeUpdate.html">executeUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/exists.html">exists</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/fetchMode.html">fetchMode</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/find.html">find</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAllBy.html">findAllBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findAllWhere.html">findAllWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findBy.html">findBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findWhere.html">findWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/first.html">first</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/get.html">get</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getAll.html">getAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getDirtyPropertyNames.html">getDirtyPropertyNames</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/getPersistentValue.html">getPersistentValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasMany.html">hasMany</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/hasOne.html">hasOne</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/ident.html">ident</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/instanceOf.html">instanceOf</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/isAttached.html">isAttached</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/isDirty.html">isDirty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/last.html">last</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/list.html">list</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/listOrderBy.html">listOrderBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/load.html">load</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/lock.html">lock</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/mappedBy.html">mappedBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/mapping.html">mapping</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/merge.html">merge</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/namedQueries.html">namedQueries</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/properties.html">properties</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/read.html">read</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/refresh.html">refresh</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/removeFrom.html">removeFrom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/save.html">save</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/transients.html">transients</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/validate.html">validate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/where.html">where</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/whereAny.html">whereAny</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withCriteria.html">withCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withNewSession.html">withNewSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withSession.html">withSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withTransaction.html">withTransaction</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Plug-ins</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Plug-ins/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/URL%20mappings.html">URL mappings</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/codecs.html">codecs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/controllers.html">controllers</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/core.html">core</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/dataSource.html">dataSource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/domainClasses.html">domainClasses</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/filters.html">filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/hibernate.html">hibernate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/i18n.html">i18n</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/logging.html">logging</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/scaffolding.html">scaffolding</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/services.html">services</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/servlets.html">servlets</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Plug-ins/web%20flow.html">web flow</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Services</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Services/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Services/scope.html">scope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Services/transactional.html">transactional</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Servlet API</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Servlet%20API/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tag Libraries</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/pageScope.html">pageScope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tag%20Libraries/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Tags/actionSubmit.html">actionSubmit</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/actionSubmitImage.html">actionSubmitImage</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/applyLayout.html">applyLayout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/checkBox.html">checkBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/collect.html">collect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/cookie.html">cookie</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/country.html">country</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/countrySelect.html">countrySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/createLink.html">createLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/createLinkTo.html">createLinkTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/currencySelect.html">currencySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/datePicker.html">datePicker</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/each.html">each</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/eachError.html">eachError</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/else.html">else</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/elseif.html">elseif</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/external.html">external</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/field.html">field</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/fieldValue.html">fieldValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/form.html">form</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formRemote.html">formRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatBoolean.html">formatBoolean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatDate.html">formatDate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/formatNumber.html">formatNumber</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/grep.html">grep</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/header.html">header</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/hiddenField.html">hiddenField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/if.html">if</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/img.html">img</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/include.html">include</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/isAvailable.html">isAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/isNotAvailable.html">isNotAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/javascript.html">javascript</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/join.html">join</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutBody.html">layoutBody</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutHead.html">layoutHead</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/layoutTitle.html">layoutTitle</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/localeSelect.html">localeSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/message.html">message</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/meta.html">meta</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/pageProperty.html">pageProperty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/paginate.html">paginate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/passwordField.html">passwordField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/radio.html">radio</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/radioGroup.html">radioGroup</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteField.html">remoteField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteFunction.html">remoteFunction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/remoteLink.html">remoteLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/renderErrors.html">renderErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/resource.html">resource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/select.html">select</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/set.html">set</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/setProvider.html">setProvider</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/sortableColumn.html">sortableColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/submitButton.html">submitButton</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/submitToRemote.html">submitToRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/textArea.html">textArea</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/textField.html">textField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/timeZoneSelect.html">timeZoneSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/unless.html">unless</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/uploadForm.html">uploadForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/while.html">while</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. <br/>[注意]このGrails日本語ドキュメントは、有志による翻訳というよりは意訳なドキュメントです。 Grails日本語ドキュメントに関するお問い合わせ、ドキュメントプロジェクトに参加したい等の問い合わせは。 twitter: @tyama 迄<br/>
    Sponsored by <a href="http://springsource.com">SpringSource</a> 
</div>

<script type="text/javascript" src="../../js/docs.js"></script>

</body>
</html>
