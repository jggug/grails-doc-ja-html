<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>12 &#12486;&#12473;&#12488; 2.3.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>&#12452;&#12531;&#12488;&#12525;&#12480;&#12463;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>2</strong><span>&#12473;&#12479;&#12540;&#12488;&#12460;&#12452;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/upgradingFromPreviousVersionsOfGrails.html"><strong>3</strong><span>Grails&#19979;&#20301;&#12496;&#12540;&#12472;&#12519;&#12531;&#12363;&#12425;&#12398;&#26356;&#26032;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/conf.html"><strong>4</strong><span>&#35373;&#23450;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/commandLine.html"><strong>5</strong><span>&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/GORM.html"><strong>6</strong><span>O/R&#12510;&#12483;&#12500;&#12531;&#12464; (GORM)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/theWebLayer.html"><strong>7</strong><span>Web&#12524;&#12452;&#12516;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/webServices.html"><strong>8</strong><span>Web&#12469;&#12540;&#12499;&#12473;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/async.html"><strong>9</strong><span>&#38750;&#21516;&#26399;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/validation.html"><strong>10</strong><span>&#12496;&#12522;&#12487;&#12540;&#12471;&#12519;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/services.html"><strong>11</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/testing.html"><strong>12</strong><span>&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/i18n.html"><strong>13</strong><span>&#22269;&#38555;&#21270;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/security.html"><strong>14</strong><span>&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/plugins.html"><strong>15</strong><span>&#12503;&#12521;&#12464;&#12452;&#12531;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/spring.html"><strong>16</strong><span>Grails&#12392;Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/hibernate.html"><strong>17</strong><span>Grails&#12392;Hibernate</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/scaffolding.html"><strong>18</strong><span>&#12473;&#12459;&#12483;&#12501;&#12457;&#12523;&#12489;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/deployment.html"><strong>19</strong><span>&#12487;&#12503;&#12525;&#12452;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/contributing.html"><strong>20</strong><span>Grails&#12395;&#36002;&#29486;&#12377;&#12427;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/traslateReport.html"><strong>21</strong><span>&#32763;&#35379;&#12524;&#12509;&#12540;&#12488;</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="http://grails.org" target="_blank"><img alt="Grails Logo" title="The Grails Framework" src="../../img/grails.png" border="0"/></a></span>
        
        
        <span id="sponsor"><a href="http://springsource.com" target="_blank"><img alt="SpringSource Logo" title="SpringSource - Weapons for the War on Java Complexity" src="../../img/springsource-logo.png" border="0"/></a></span>
        
    </div>
    <p>See the light - agile, industrial strength, rapid web application development made easy</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/services.html">&lt;&lt; <strong>11</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/i18n.html"><strong>13</strong><span>&#22269;&#38555;&#21270;</span> >></a></div>
                


                <div class="project">
                    <h1>12 &#12486;&#12473;&#12488; - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith</p>

                    <p><strong>Version:</strong> 2.3.0.BUILD-SNAPSHOT</p>

                    
                    <p><strong>Translated by:</strong> T.Yamamoto, Japanese Grails Doc Translating Team. Special thanks to NTT Software. <br/>【注意】このドキュメントの内容はスナップショットバージョンを元に*意訳*されているため、一部現行バージョンでは未対応の機能もあります。</p>
                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#unitTesting"><strong>12.1</strong><span>&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#unitTestingControllers"><strong>12.1.1</strong><span>&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12398;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#unitTestingTagLibraries"><strong>12.1.2</strong><span>&#12479;&#12464;&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#unitTestingDomains"><strong>12.1.3</strong><span>&#12489;&#12513;&#12452;&#12531;&#12398;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#unitTestingFilters"><strong>12.1.4</strong><span>&#12501;&#12451;&#12523;&#12479;&#12398;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#unitTestingURLMappings"><strong>12.1.5</strong><span>URL&#12510;&#12483;&#12500;&#12531;&#12464;&#12398;&#12518;&#12491;&#12483;&#12488;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#mockingCollaborators"><strong>12.1.6</strong><span>&#12467;&#12521;&#12508;&#12524;&#12540;&#12479;&#12398;&#12514;&#12483;&#12463;&#21270;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#mockingCodecs"><strong>12.1.7</strong><span>&#12467;&#12540;&#12487;&#12483;&#12463;&#12398;&#12514;&#12483;&#12463;&#21270;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#integrationTesting"><strong>12.2</strong><span>&#12452;&#12531;&#12486;&#12464;&#12524;&#12540;&#12471;&#12519;&#12531;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#functionalTesting"><strong>12.3</strong><span>&#12501;&#12449;&#12531;&#12463;&#12471;&#12519;&#12490;&#12523;&#12486;&#12473;&#12488;</span></a>
                    </div>
                    
                </div>
                

                
<a name="12. Testing"><!-- Legacy link --></a>
<h1 id="testing">12 テスト</h1>
<div class="hidden-block">Automated testing is a key part of Grails. Hence, Grails provides many ways to making testing easier from low level unit testing to high level functional tests. This section details the different capabilities that Grails offers for testing.</div>
自動化テストはGrailsにおいて重要な機能です。Grailsではユニットテストからファンクショナルテストまで、簡単にテスト生成できる様々な方法を提供しています。この章ではGrailsがテストのために提供している機能について詳しく説明します。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
Grails 1.3.x and below used the <code>grails.test.GrailsUnitTestCase</code> class hierarchy for testing in a JUnit 3 style. Grails 2.0.x and above deprecates these test harnesses in favour of mixins that can be applied to a range of different kinds of tests (JUnit 3, Junit 4, Spock etc.) without subclassing
</blockquote></div>
<blockquote class="note">
Grails 1.3.X以下のバージョンでは、JUnit 3スタイルのテストのために<code>grails.test.GrailsUnitTestCase</code>のクラスを継承するようになっていましたが、Grails 2.0.X 以上のバージョンではサブクラスを作ることなく異なる種類のテスト(Junit 3, Junit4, Spock など)を実施可能なMixinsベースのテストを推奨しています。
</blockquote><p class="paragraph"/><div class="hidden-block">The first thing to be aware of is that all of the <code>create-&#42;</code> and <code>generate-&#42;</code> commands create <code>unit</code> or <code>integration</code> tests automatically. For example if you run the <a href="../ref/Command Line/create-controller.html" class="commandLine">create-controller</a> command as follows:</div>
まずはじめに全ての<code>create-&#42;</code>や<code>generate-&#42;</code>のコマンドは<code>unit</code>もしくは<code>integration</code>テストを自動的に生成します。例えば、<a href="../ref/Command Line/create-controller.html" class="commandLine">create-controller</a>コマンドを以下のように実行したとします。:<p class="paragraph"/><div class="code"><pre>grails create&#45;controller com.acme.app.simple</pre></div><p class="paragraph"/><div class="hidden-block">Grails will create a controller at <code>grails-app/controllers/com/acme/app/SimpleController.groovy</code>, and also a unit test at <code>test/unit/com/acme/app/SimpleControllerTests.groovy</code>. What Grails won't do however is populate the logic inside the test! That is left up to you.</div>
Grailsは<code>grails-app/controllers/com/acme/app/SimpleController.groovy</code>にコントローラを、<code>test/unit/com/acme/app/SimpleControllerTests.groovy</code>にユニットテストを作ります。しかしながら、Grailsはテストの中のロジックは作成しません！それはあなたに任されています。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
The default class name suffix is <code>Tests</code> but as of Grails 1.2.2, the suffix of <code>Test</code> is also supported.
</blockquote></div>
<blockquote class="note">
デフォルトのクラス名の最後には<code>Tests</code>を付けます。しかし、Grails 1.2.2からは<code>Test</code>のサフィックスもサポートしています。
</blockquote><p class="paragraph"/><div class="hidden-block">h4. Running Tests</div>
<h4>テストの実行</h4><p class="paragraph"/><div class="hidden-block">Tests are run with the <a href="../ref/Command Line/test-app.html" class="commandLine">test-app</a> command:</div>
テストは<a href="../ref/Command Line/test-app.html" class="commandLine">test-app</a>コマンドにより実行されます。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app</pre></div><p class="paragraph"/><div class="hidden-block">The command will produce output such as:</div>
このコマンドは以下のような出力を行います。:<p class="paragraph"/><div class="code"><pre>&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
Running Unit Tests&#8230;
Running test FooTests...FAILURE
Unit Tests Completed in 464ms &#8230;
&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;<p class="paragraph"/>Tests failed: 0 errors, 1 failures</pre></div><p class="paragraph"/><div class="hidden-block">whilst showing the reason for each test failure.</div>
それぞれのテストの失敗理由が表示されます。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
You can force a clean before running tests by passing <code>-clean</code> to the <code>test-app</code> command.
</blockquote></div>
<blockquote class="note">
<code>test-app</code>コマンドに<code>-clean</code>を付与することにより、テスト実行前に強制的にテスト実行環境をクリーンにすることができます。
</blockquote><p class="paragraph"/><div class="hidden-block">Grails writes both plain text and HTML test reports to the <code>target/test-reports</code> directory, along with the original XML files. The HTML reports are generally the best ones to look at.</div>
Grailsは<code>target/test-reports</code>ディレクトリにオリジナルのXMLファイルとともにプレインテキストとHTMLのテストレポートの両方を出力します。最も見栄えがよいのはHTMLレポートです。<p class="paragraph"/><div class="hidden-block">Using Grails' <a href="../guide/single.html#interactiveMode" class="guide">interactive mode</a> confers some distinct advantages when executing tests. First, the tests will execute significantly faster on the second and subsequent runs. Second, a shortcut is available to open the HTML reports in your browser:</div>
Grailsの<a href="../guide/single.html#interactiveMode" class="guide">対話モード</a>をテスト実行時に使うことにはいくつかのメリットがあります。まず2回目以降のテスト実行が大幅に高速化されます。次にHTMLレポートをブラウザで開くショートカットが利用可能になります。:<p class="paragraph"/><div class="code"><pre>open test&#45;report</pre></div><p class="paragraph"/><div class="hidden-block">You can also run your unit tests from within most IDEs.</div>
またほとんどのIDEで<code>unit</code>テストを実行できます。<p class="paragraph"/><div class="hidden-block">h4. Targeting Tests</div>
<h4>テストを指定する</h4><p class="paragraph"/><div class="hidden-block">You can selectively target the test(s) to be run in different ways. To run all tests for a controller named <code>SimpleController</code> you would run:</div>
いくつかのやり方でテストを指定することができます。<code>SimpleController</code>と名付けられたコントローラの全てのテストを実行したい場合には以下のように指定します。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app SimpleController</pre></div><p class="paragraph"/><div class="hidden-block">This will run any tests for the class named <code>SimpleController</code>. Wildcards can be used...</div>
以下のコマンドは<code>SimpleController</code>という名前に対応する全てのテストを実行します。ワイルドカードを利用することも可能です。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app &#42;Controller</pre></div><p class="paragraph"/><div class="hidden-block">This will test all classes ending in <code>Controller</code>. Package names can optionally be specified...</div>
以下は<code>Controller</code>でクラス名が終わる全てのクラスのテストを実行します。パッケージ名も指定可能です。<p class="paragraph"/><div class="code"><pre>grails test&#45;app some.org.&#42;Controller</pre></div><p class="paragraph"/><div class="hidden-block">or to run all tests in a package...</div>
この例では、パッケージ内の全てのテストを実行します。<p class="paragraph"/><div class="code"><pre>grails test&#45;app some.org.&#42;</pre></div><p class="paragraph"/><div class="hidden-block">or to run all tests in a package including subpackages...</div>
この例では、あるサブパッケージを含むパッケージの全てのテストを実行します。<p class="paragraph"/><div class="code"><pre>grails test&#45;app some.org.&#42;&#42;.&#42;</pre></div><p class="paragraph"/><div class="hidden-block">You can also target particular test methods...</div>
特定のテストメソッドだけを指定することもできます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app SimpleController.testLogin</pre></div><p class="paragraph"/><div class="hidden-block">This will run the <code>testLogin</code> test in the <code>SimpleController</code> tests. You can specify as many patterns in combination as you like...</div>
以下のコマンドは<code>SimpleController</code>テストの中にある<code>testLogin</code>テストを実行します。いくつかのパターンを組合せて好きなように指定できます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app some.org.&#42; SimpleController.testLogin BookController</pre></div><p class="paragraph"/><div class="hidden-block">h4. Targeting Test Types and/or Phases</div>
<h4>テスト種別とテストフェーズの条件によるテストの指定</h4><p class="paragraph"/><div class="hidden-block">In addition to targeting certain tests, you can also target test  <em class="italic">types</em>  and/or  <em class="italic">phases</em>  by using the <code>phase:type</code> syntax.</div>
あるテストを指定するのに加えて、<code>テストフェーズ:テスト種別</code>の記法により  <em class="italic">テスト種別</em>  と  <em class="italic">テストフェーズ</em>  を条件として指定できます。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
Grails organises tests by phase and by type. A test phase relates to the state of the Grails application during the tests, and the type relates to the testing mechanism.<p class="paragraph"/>Grails comes with support for 4 test phases (<code>unit</code>, <code>integration</code>, <code>functional</code> and <code>other</code>) and JUnit test types for the <code>unit</code> and <code>integration</code> phases. These test types have the same name as the phase.<p class="paragraph"/>Testing plugins may provide new test phases or new test types for existing phases. Refer to the plugin documentation.
</blockquote></div>
<blockquote class="note">
Grailsはテストフェーズとテスト種別によりテストを体系化しています。テストフェーズはGrailsアプリケーションにおけるどの状態のテストを行っているかを表しており、テスト種別はテストを行う機構に関連しています。<p class="paragraph"/>Grailsは4つのテストフェーズ(<code>unit</code>, <code>integration</code>, <code>functional</code>そして<code>other</code>)と<code>unit</code>と<code>integration</code>の各テストフェーズに対応したJUnitのテスト種別をサポートしています。これらのテスト種別はそのテストフェーズと同じ名前になっています。<p class="paragraph"/>テストプラグインにより既存のテストフェーズに新しいテストフェーズもしくはテスト種別を追加することができます。詳しくはプラグインのドキュメントを参照してください。
</blockquote><p class="paragraph"/><div class="hidden-block">To execute the JUnit <code>integration</code> tests you can run:</div>
JUnitの<code>integration</code>テストを実行するには以下のように実行します:<p class="paragraph"/><div class="code"><pre>grails test&#45;app integration:integration</pre></div><p class="paragraph"/><div class="hidden-block">Both <code>phase</code> and <code>type</code> are optional. Their absence acts as a wildcard. The following command will run all test types in the <code>unit</code> phase:</div>
<code>テストフェーズ</code>と<code>テスト種別</code>の指定は任意です。もし指定をしなかった場合には全てが該当します。以下のコマンドでは<code>unit</code>テストフェーズの全てのテスト種別のテストを実行します。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app unit:</pre></div><p class="paragraph"/><div class="hidden-block">The Grails <a href="http://grails.org/plugin/spock" target="blank">Spock Plugin</a> is one plugin that adds new test types to Grails. It adds a <code>spock</code> test type to the <code>unit</code>, <code>integration</code> and <code>functional</code> phases. To run all spock tests in all phases you would run the following:</div>
Grails <a href="http://grails.org/plugin/spock" target="blank">Spockプラグイン</a>プラグインを用いることでGrailsで新しいテスト種別が使えるようになります。<code>spock</code>テスト種別が<code>unit</code>、<code>integration</code>そして<code>functional</code>テストフェーズで使えるようになります。全てのテストフェーズで全ての<code>spock</code>テストを実行するには次のように実行します。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app :spock</pre></div><p class="paragraph"/><div class="hidden-block">To run the all of the spock tests in the <code>functional</code> phase you would run...</div>
<code>functional</code>フェーズの全ての<code>spock</code>テストを実行するには次のように実行します。<p class="paragraph"/><div class="code"><pre>grails test&#45;app functional:spock</pre></div><p class="paragraph"/><div class="hidden-block">More than one pattern can be specified...</div>
1つ以上のテストパターンを指定できます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app unit:spock integration:spock</pre></div><p class="paragraph"/><div class="hidden-block">h4. Targeting Tests in Types and/or Phases</div>
<h4>テスト種別とテストフェーズを用いたテストの指定</h4><p class="paragraph"/><div class="hidden-block">Test and type/phase targetting can be applied at the same time:</div>
名前によるテスト指定と、テスト種別やテストフェーズによるテスト指定は同時に適応可能です。:<p class="paragraph"/><div class="code"><pre>grails test&#45;app integration: unit: some.org.&#42;&#42;.&#42;</pre></div><p class="paragraph"/><div class="hidden-block">This would run all tests in the <code>integration</code> and <code>unit</code> phases that are in the package <code>some.org</code> or a subpackage.</div>
この例では、<code>some.org</code>のパッケージかサブパッケージの中で<code>integration</code>と<code>unit</code>フェーズの全てのテストが実行されるでしょう。

<a name="12.1 Unit Testing"><!-- Legacy link --></a>
<h2 id="unitTesting">12.1 ユニットテスト</h2>
<div class="hidden-block">
Unit testing are tests at the "unit" level. In other words you are testing individual methods or blocks of code without consideration for surrounding infrastructure. Unit tests are typically run without the presence of physical resources that involve I/O such databases, socket connections or files. This is to ensure they run as quick as possible since quick feedback is important.
</div><p class="paragraph"/>Unitテストは"単体"レベルのテストです。具体的には、環境周りを考慮せずに個々のメソッドやブロック単位で行うテストのことです。Unitテストは基本的にデータベース、ネットワーク接続、ファイルなどのI/Oを必要とする物理リソースを必要としません。素早いフィードバックを得られるように、Unitテストの実行時間はできる限り短くしてください。<p class="paragraph"/><div class="hidden-block">
<h4>The Test Mixins</h4>
</div><p class="paragraph"/><h4>テストMixin</h4><p class="paragraph"/><div class="hidden-block">
Since Grails 2.0, a collection of unit testing mixins is provided by Grails that lets you enhance the behavior of a typical JUnit 3, JUnit 4 or Spock test. The following sections cover the usage of these mixins.
</div><p class="paragraph"/>Grails 2.0以降、MixinのUnitテストライブラリがGrailsによって提供されており、代表的なJUnit 3、JUnit 4、Spockを使用したテストの実行をサポートします。以下の節では、Mixinの使い方について記載しています。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The previous JUnit 3-style <code>GrailsUnitTestCase</code> class hierarchy is still present in Grails for backwards compatibility, but is now deprecated. The previous documentation on the subject can be found in the <a href="http://grails.org/doc/1.3.x/guide/9.%20Testing.html" target="blank">Grails 1.3.x documentation</a>
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
以前の<code>GrailsUnitTestCase</code>クラスを継承するJUnit 3スタイルは、下位バージョンとの互換性のためにGrailsにまだ存在しています。しかし今は非推奨です。過去のドキュメントは<a href="http://grails.org/doc/1.3.x/guide/9.%20Testing.html" target="blank">Grails 1.3.x ドキュメンテーション</a>で見つけることができます。
</blockquote><p class="paragraph"/><div class="hidden-block">
You won't normally have to import any of the testing classes because Grails does that for you. But if you find that your IDE for example can't find the classes, here they all are:
</div><p class="paragraph"/>Grailsは自動でテストクラスをインポートするため、全てのテストクラスをインポートしなくても問題ありません。しかし、IDEでテストクラスを探せないことがあるかもしれないので、下記にそれらすべてのテストクラスを列挙します。
<ul class="star">
<li><code>grails.test.mixin.TestFor</code></li>
<li><code>grails.test.mixin.TestMixin</code></li>
<li><code>grails.test.mixin.Mock</code></li>
<li><code>grails.test.mixin.support.GrailsUnitTestMixin</code></li>
<li><code>grails.test.mixin.domain.DomainClassUnitTestMixin</code></li>
<li><code>grails.test.mixin.services.ServiceUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.ControllerUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.FiltersUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.GroovyPageUnitTestMixin</code></li>
<li><code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code></li>
<li><code>grails.test.mixin.webflow/WebFlowUnitTestMixin</code></li>
</ul><p class="paragraph"/><div class="hidden-block">
Note that you're only ever likely to use the first two explicitly. The rest are there for reference. 
</div>
常に明示的に使うのは最初の２つのクラスだけであることに注意してください。残りはリファレンスのために列挙しています。<p class="paragraph"/><div class="hidden-block">
<h4>Test Mixin Basics</h4>
</div><p class="paragraph"/><h4>テストMixinの基本</h4><p class="paragraph"/><div class="hidden-block">
Most testing can be achieved via the <code>TestFor</code> annotation in combination with the <code>Mock</code> annotation for mocking collaborators. For example, to test a controller and associated domains you would define the following:
</div><p class="paragraph"/>ほとんどのテストは、モックを使用するため<code>Mock</code>アノテーションと<code>TestFor</code>アノテーションを組み合わせて使用します。例えば、コントローラーとドメインをテストするためには次のように定義します。<p class="paragraph"/><div class="code"><pre>&#64;TestFor(BookController)
&#64;Mock(&#91;Book, Author, BookService&#93;)</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>TestFor</code> annotation defines the class under test and will automatically create a field for the type of class under test. For example in the above case a "controller" field will be present, however if <code>TestFor</code> was defined for a service a "service" field would be created and so on.
</div><p class="paragraph"/><code>TestFor</code>アノテーションは、テスト対象のクラスを定義することで自動的にクラスタイプのフィールドを生成します。例えば、上記の場合、"controller"フィールドを生成します。また、もし<code>TestFor</code>にサービスが定義されている場合、"service"フィールドが生成されます。<p class="paragraph"/><div class="hidden-block">
The <code>Mock</code> annotation creates mock version of any collaborators. There is an in-memory implementation of GORM that will simulate most interactions with the GORM API. For those interactions that are not automatically mocked you can use the built in support for defining mocks and stubs programmatically. For example:
</div><p class="paragraph"/><code>Mock</code>アノテーションは複数の種類のモックを生成します。ほとんどのGORM APIの振る舞いをシミュレートするインメモリのGORM実装があります。自動でモック化されない振る舞いに対しては、ビルトインされているモック、スタブの作成機能が使用できます。例えば、次の通りです。<p class="paragraph"/>
<div class="code"><pre>void testSearch() &#123;
      def control = mockFor(SearchService)
      control.demand.searchWeb &#123; <span class="java&#45;object">String</span> q &#45;&#62; &#91;'mock results'&#93; &#125;
      control.demand.<span class="java&#45;keyword">static</span>.logResults &#123; List results &#45;&#62;  &#125;
      controller.searchService = control.createMock()
      controller.search()<p class="paragraph"/>      assert controller.response.text.contains <span class="java&#45;quote">"Found 1 results"</span>
&#125;</pre></div>


<a name="12.1.1 Unit Testing Controllers"><!-- Legacy link --></a>
<h2 id="unitTestingControllers">12.1.1 コントローラのユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
You use the <code>grails.test.mixin.TestFor</code> annotation to unit test controllers. Using <code>TestFor</code> in this manner activates the <code>grails.test.mixin.web.ControllerUnitTestMixin</code> and its associated API. For example:
</div><p class="paragraph"/>コントローラUnitテストには、<code>grails.test.mixin.TestFor</code>アノテーションを使用します。このように<code>TestFor</code>を使用することで、<code>grails.test.mixin.web.ControllerUnitTestMixin</code>とその関連APIが有効になります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.TestFor<p class="paragraph"/>@TestFor(SimpleController)
class SimpleControllerTests &#123;
    void testSomething() &#123;<p class="paragraph"/>    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Adding the <code>TestFor</code> annotation to a controller causes a new <code>controller</code> field to be automatically created for the controller under test.
</div><p class="paragraph"/><code>TestFor</code>アノテーションにコントローラを追加することにより、<code>controller</code>フィールドにテスト対象のコントローラが自動的に生成されます。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The <code>TestFor</code> annotation will also automatically annotate any public methods starting with "test" with JUnit 4's @Test annotation. If any of your test method don't start with "test" just add this manually
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
<code>TestFor</code>アノテーションは"test"から始まるパブリックなメソッドに自動的にJUnit4の<code>Testアノテーションを付与します。もしテストメソッドが"test"で始まらない場合は</code>Testアノテーションを手動で付与してください。
</blockquote><p class="paragraph"/><div class="hidden-block">
To test the simplest "Hello World"-style example you can do the following:
</div><p class="paragraph"/>最もシンプルなHello World形式のテストは次の通りです。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def hello() &#123;
        render <span class="java&#45;quote">"hello"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testHello() &#123;
    controller.hello()<p class="paragraph"/>    assert response.text == 'hello'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>response</code> object is an instance of <code>GrailsMockHttpServletResponse</code> (from the package <code>org.codehaus.groovy.grails.plugins.testing</code>) which extends Spring's <code>MockHttpServletResponse</code> class and has a number of useful methods for inspecting the state of the response.
</div><p class="paragraph"/><code>response</code>オブジェクトは、<code>GrailsMockHttpServletResponse</code>（<code>org.codehaus.groovy.grails.plugins.testing</code>パッケージに含まれている）のインスタンスです。Springの<code>MockHttpServletResponse</code>クラスを継承しており、レスポンスの状態を調べる便利なメソッドを定義しています。<p class="paragraph"/><div class="hidden-block">
For example to test a redirect you can use the <code>redirectedUrl</code> property:
</div><p class="paragraph"/>例えば、リダイレクトをテストするには<code>redirectedUrl</code>プロパティを使用できます。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def index() &#123;
        redirect action: 'hello'
    &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testIndex() &#123;
    controller.index()<p class="paragraph"/>    assert response.redirectedUrl == '/simple/hello'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Many actions make use of the parameter data associated with the request. For example, the 'sort', 'max', and 'offset' parameters are quite common. Providing these in the test is as simple as adding appropriate values to a special <code>params</code> variable:
</div><p class="paragraph"/>ほとんどのアクションはリクエストに設定されたパラメータを使用します。例えば、'sort'、'max'、'offset'といったパラメータが一般的です。これらのパラメータをテストで利用するには<code>params</code>変数に値を代入するだけで簡単に設定できます。<p class="paragraph"/><div class="code"><pre>void testList() &#123;
    params.sort = <span class="java&#45;quote">"name"</span>
    params.max = 20
    params.offset = 0<p class="paragraph"/>    controller.list()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You can even control what type of request the controller action sees by setting the <code>method</code> property of the mock request:
</div><p class="paragraph"/>リクエストの<code>method</code>プロパティにリクエストタイプを設定することにより、リクエストタイプ毎のコントローラのアクションを確認できます。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    request.method = <span class="java&#45;quote">"POST"</span>
    controller.save()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This is particularly important if your actions do different things depending on the type of the request. Finally, you can mark a request as AJAX like so:
</div><p class="paragraph"/>リクエストタイプに応じてアクションが違った挙動をする場合、これは非常に重要です。さらに、次のようにAjaxとしてリクエストを作ることもできます。<p class="paragraph"/><div class="code"><pre>void testGetPage() &#123;
    request.method = <span class="java&#45;quote">"POST"</span>
    request.makeAjaxRequest()
    controller.getPage()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You only need to do this though if the code under test uses the <code>xhr</code> property on the request.
</div><p class="paragraph"/>テスト対象コードのリクエストで<code>xhr</code>プロパティを使用してたとしても、これを実行するだけです。<p class="paragraph"/><div class="hidden-block">
<h4>Testing View Rendering</h4>
</div><p class="paragraph"/><h4>ビューのレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
To test view rendering you can inspect the state of the controller's <code>modelAndView</code> property (an instance of <code>org.springframework.web.servlet.ModelAndView</code>) or you can use the <code>view</code> and <code>model</code> properties provided by the mixin:
</div><p class="paragraph"/>コントローラの<code>modelAndView</code>プロパティ（<code>org.springframework.web.servlet.ModelAndView</code>のインスタンス）、または、Mixinで提供されている<code>view</code>と<code>model</code>プロパティを使用することにより、ビューのレンダリングをテストすることができます。<p class="paragraph"/><div class="code"><pre>// Test class
class SimpleController &#123;
    def home() &#123;
        render view: <span class="java&#45;quote">"homePage"</span>, model: &#91;title: <span class="java&#45;quote">"Hello World"</span>&#93;
    &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testIndex() &#123;
    controller.home()<p class="paragraph"/>    assert view == <span class="java&#45;quote">"/simple/homePage"</span>
    assert model.title == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Note that the view string is the absolute view path, so it starts with a '/' and will include path elements, such as the directory named after the action's controller.
</div><p class="paragraph"/>viewの文字列は絶対パスであることに注意してください。これは、'/'から始まり、動作するコントローラの名前から決まるディレクトリ名などがパスとして含まれます。<p class="paragraph"/><div class="hidden-block">
<h4>Testing Template Rendering</h4>
</div><p class="paragraph"/><h4>テンプレートレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
Unlike view rendering, template rendering will actually attempt to write the template directly to the response rather than returning a <code>ModelAndView</code> hence it requires a different approach to testing.
</div><p class="paragraph"/>テンプレートのレンダリングは<code>ModelAndView</code>を返すのではなく、レスポンスにテンプレートの内容を直接書き込みます。そのため、ビューのレンダリングとは異なるテストのアプローチが必要になります。<p class="paragraph"/><div class="hidden-block">
Consider the following controller action:
</div><p class="paragraph"/>次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    def display() &#123;
        render template:<span class="java&#45;quote">"snippet"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
In this example the controller will look for a template in <code>grails-app/views/simple/_snippet.gsp</code>. You can test this as follows:
</div><p class="paragraph"/>この例では、コントローラは<code>grails-app/views/simple/_snippet.gsp</code>にあるテンプレートを探します。そして、次のようにテストをします。<p class="paragraph"/><div class="code"><pre>void testDisplay() &#123;
    controller.display()
    assert response.text == 'contents of template'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
However, you may not want to render the real template, but just test that is was rendered. In this case you can provide mock Groovy Pages:
</div><p class="paragraph"/>テンプレートをレンダリングしたくない場合にも、テストでは実際にテンプレートがレンダリングされます。このような場合はGroovy Pagesのモックが使用できます。<p class="paragraph"/><div class="code"><pre>void testDisplay() &#123;
    views&#91;'/simple/_snippet.gsp'&#93; = 'mock contents'
    controller.display()
    assert response.text == 'mock contents'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Actions Which Return A Map</h4>
</div><p class="paragraph"/><h4>マップを返すアクションをテスト</h4><p class="paragraph"/><div class="hidden-block">
When a controller action returns a <code>java.util.Map</code> that <code>Map</code> may be inspected directly to assert that it contains the expected data:
</div><p class="paragraph"/>コントローラアクションが<code>java.util.Map</code>を返す場合は、<code>Map</code>に期待したデータが含まれているか直接検証できます。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    def showBookDetails() &#123;
        &#91;title: 'The Nature Of Necessity', author: 'Alvin Plantinga'&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(SimpleController)
class SimpleControllerTests &#123;<p class="paragraph"/>    void testShowBookDetails() &#123;
        def model = controller.showBookDetails()<p class="paragraph"/>        assert model.author == 'Alvin Plantinga'
    &#125;
&#125;</pre></div><p class="paragraph"/>
<div class="hidden-block">
<h4>Testing XML and JSON Responses</h4>
</div><p class="paragraph"/><h4>XMLとJSONレスポンスのテスト</h4><p class="paragraph"/><div class="hidden-block">
XML and JSON response are also written directly to the response. Grails' mocking capabilities provide some conveniences for testing XML and JSON response. For example consider the following action:
</div><p class="paragraph"/>XMLとJSONのレスポンスもまた、直接レスポンスに書き込まれます。Grailsのモック機構は、XMLとJSONのレスポンスをテストするために便利な機能をいくつか提供しています。<p class="paragraph"/><div class="code"><pre>def renderXml() &#123;
    render(contentType:<span class="java&#45;quote">"text/xml"</span>) &#123;
        book(title:<span class="java&#45;quote">"Great"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This can be tested using the <code>xml</code> property of the response:
</div><p class="paragraph"/>次の例は、レスポンスの<code>xml</code>プロパティを使ってテストしています。<p class="paragraph"/><div class="code"><pre>void testRenderXml() &#123;
    controller.renderXml()
    assert <span class="java&#45;quote">"&#60;book title='Great'/&#62;"</span> == response.text
    assert <span class="java&#45;quote">"Great"</span> == response.xml.@title.text()
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>xml</code> property is a parsed result from Groovy's <a href="http://groovy.codehaus.org/Reading+XML+using+Groovy's+XmlSlurper" target="blank">XmlSlurper</a> class which is very convenient for parsing XML.
</div><p class="paragraph"/><code>xml</code>プロパティは、XMLをパースするためにとても便利なGroovyの<a href="http://groovy.codehaus.org/Reading+XML+using+Groovys+XmlSlurper" target="blank">XmlSlurper</a> でパースされた結果です。<p class="paragraph"/><div class="hidden-block">
Testing JSON responses is pretty similar, instead you use the <code>json</code> property:
</div><p class="paragraph"/><code>json</code>プロパティを使うだけで、JSONレスポンスのテストもかなり似ています。<p class="paragraph"/><div class="code"><pre>// controller action
def renderJson() &#123;
    render(contentType:<span class="java&#45;quote">"application/json"</span>) &#123;
        book = <span class="java&#45;quote">"Great"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test
void testRenderJson() &#123;<p class="paragraph"/>    controller.renderJson()<p class="paragraph"/>    assert '&#123;<span class="java&#45;quote">"book"</span>:<span class="java&#45;quote">"Great"</span>&#125;' == response.text
    assert <span class="java&#45;quote">"Great"</span> == response.json.book
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>json</code> property is an instance of <code>org.codehaus.groovy.grails.web.json.JSONElement</code> which is a map-like structure that is useful for parsing JSON responses.
</div><p class="paragraph"/><code>json</code>プロパティは、JSONレスポンスをパースするために便利な<code>org.codehaus.groovy.grails.web.json.JSONElement</code>のインスタンスでマップライクな構造をもっています。<p class="paragraph"/><div class="hidden-block">
<h4>Testing XML and JSON Requests</h4>
</div><p class="paragraph"/><h4>XMLとJSONリクエストのテスト</h4><p class="paragraph"/><div class="hidden-block">
Grails provides various convenient ways to automatically parse incoming XML and JSON packets. For example you can bind incoming JSON or XML requests using Grails' data binding:
</div><p class="paragraph"/>Grailsは、入力されるXMLとJSONパケットを自動的にパースするためのいろいろな便利な方法を提供しています。例えば、入力されるJSONかXMLリクエストをGrailsのデータバインディングを使ってバインドできます。<p class="paragraph"/><div class="code"><pre>def consumeBook() &#123;
    def b = <span class="java&#45;keyword">new</span> Book(params&#91;'book'&#93;)<p class="paragraph"/>    render b.title
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this Grails provides an easy way to specify an XML or JSON packet via the <code>xml</code> or <code>json</code> properties. For example the above action can be tested by specifying a String containing the XML:
</div><p class="paragraph"/>次のテストでは、<code>xml</code>や<code>json</code>プロパティを用いてXMLやJSONリクエストを設定しています。例えば、上記のアクションはXMLの文字列を設定することによってテストができます。<p class="paragraph"/><div class="code"><pre>void testConsumeBookXml() &#123;
    request.xml = '&#60;book&#62;&#60;title&#62;The Shining&#60;/title&#62;&#60;/book&#62;'
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Or alternatively a domain instance can be specified and it will be auto-converted into the appropriate XML request:
</div><p class="paragraph"/>もしくは、ドメインインスタンスを設定することで、適切なXMLリクエストに自動変換してテストをします。<p class="paragraph"/><div class="code"><pre>void testConsumeBookXml() &#123;
    request.xml = <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Shining"</span>)
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The same can be done for JSON requests:
</div><p class="paragraph"/>JSONリクエストでも同じようにテストできます。<p class="paragraph"/><div class="code"><pre>void testConsumeBookJson() &#123;
    request.json = <span class="java&#45;keyword">new</span> Book(title:<span class="java&#45;quote">"The Shining"</span>)
    controller.consumeBook()<p class="paragraph"/>    assert response.text == 'The Shining'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
If you prefer not to use Grails' data binding but instead manually parse the incoming XML or JSON that can be tested too. For example consider the controller action below:
</div><p class="paragraph"/>もし、Grailsのデータバインディングを使用したくない場合は、入力されるXMLまたはJSONを手動でパースする必要がありますが、このような場合も同じようにテストできます。次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>def consume() &#123;
    request.withFormat &#123;
        xml &#123;
            render request.XML.@title
        &#125;
        json &#123;
            render request.JSON.title
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test the XML request you can specify the XML as a string:
</div><p class="paragraph"/>XMLリクエストをテストするためには、XMLの文字列を設定します。<p class="paragraph"/><div class="code"><pre>void testConsumeXml() &#123;
    request.xml = '&#60;book title=<span class="java&#45;quote">"The Stand"</span> /&#62;'<p class="paragraph"/>    controller.consume()<p class="paragraph"/>    assert response.text == 'The Stand'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
And, of course, the same can be done for JSON:
</div><p class="paragraph"/>もちろん、同じことがJSONでもできます。<p class="paragraph"/><div class="code"><pre>void testConsumeJson() &#123;
    request.json = '&#123;title:<span class="java&#45;quote">"The Stand"</span>&#125;'
    controller.consume()<p class="paragraph"/>    assert response.text == 'The Stand'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Spring Beans</h4>
</div><p class="paragraph"/><h4>Springビーンのテスト</h4><p class="paragraph"/><div class="hidden-block">
When using <code>TestFor</code> only a subset of the Spring beans available to a running Grails application are available. If you wish to make additional beans available you can do so with the <code>defineBeans</code> method of <code>GrailsUnitTestMixin</code>:
</div><p class="paragraph"/><code>TestFor</code>を使用した場合は、Grailsアプリケーションを実行するのに必要なSpringビーンのサブセットだけが利用できます。もし、利用できるビーンを追加したい場合は、<code>GrailsUnitTestMixin</code>の<code>defineBeans</code>メソッドを使うことにより、ビーンを追加できます。<p class="paragraph"/><div class="code"><pre>class SimpleController &#123;
    SimpleService simpleService
    def hello() &#123;
        render simpleService.sayHello()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>void testBeanWiring() &#123;
    defineBeans &#123;
        simpleService(SimpleService)
    &#125;<p class="paragraph"/>    controller.hello()<p class="paragraph"/>    assert response.text == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The controller is auto-wired by Spring just like in a running Grails application. Autowiring even occurs if you instantiate subsequent instances of the controller:
</div><p class="paragraph"/>コントローラは実行中のGrailsアプリケーションのように、Springによって自動的にビーンが注入されます。もしコントローラを後でインスタンス化した場合も自動的に注入されます。<p class="paragraph"/><div class="code"><pre>void testAutowiringViaNew() &#123;
    defineBeans &#123;
        simpleService(SimpleService)
    &#125;<p class="paragraph"/>    def controller1 = <span class="java&#45;keyword">new</span> SimpleController()
    def controller2 = <span class="java&#45;keyword">new</span> SimpleController()<p class="paragraph"/>    assert controller1.simpleService != <span class="java&#45;keyword">null</span>
    assert controller2.simpleService != <span class="java&#45;keyword">null</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Mime Type Handling</h4>
</div><p class="paragraph"/><h4>MIME Typeの制御のテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test mime type handling and the <code>withFormat</code> method quite simply by setting the response's <code>format</code> attribute:
</div><p class="paragraph"/>MIME Typeの制御と<code>withFormat</code>メソッドは、レスポンスの<code>format</code>属性を設定することにより簡単にテストができます。<p class="paragraph"/><div class="code"><pre>// controller action
def sayHello() &#123;
    def data = &#91;Hello:<span class="java&#45;quote">"World"</span>&#93;
    withFormat &#123;
        xml &#123; render data as XML &#125;
        html data
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test
void testSayHello() &#123;
    response.format = 'xml'
    controller.sayHello()<p class="paragraph"/>    <span class="java&#45;object">String</span> expected = '&#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"UTF&#45;8"</span>?&#62;' +
                      '&#60;map&#62;&#60;entry key=<span class="java&#45;quote">"Hello"</span>&#62;World&#60;/entry&#62;&#60;/map&#62;'<p class="paragraph"/>    assert expected == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Duplicate Form Submissions</h4>
</div><p class="paragraph"/><h4>フォームの２重送信テスト</h4><p class="paragraph"/><div class="hidden-block">
Testing duplicate form submissions is a little bit more involved. For example if you have an action that handles a form such as:
</div><p class="paragraph"/>フォームの２重送信のテストは少し複雑になります。例えば、次のようなフォームを処理するアクションがあるとします。<p class="paragraph"/><div class="code"><pre>def handleForm() &#123;
    withForm &#123;
        render <span class="java&#45;quote">"Good"</span>
    &#125;.invalidToken &#123;
        render <span class="java&#45;quote">"Bad"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
you want to verify the logic that is executed on a good form submission and the logic that is executed on a duplicate submission. Testing the bad submission is simple. Just invoke the controller:
</div><p class="paragraph"/>ここでフォームの送信が成功する場合と、２重送信となる場合のロジックを検証したいとします。２重送信となる場合のテストは、単にコントローラをすることで簡単に実行できます。<p class="paragraph"/><div class="code"><pre>void testDuplicateFormSubmission() &#123;
    controller.handleForm()
    assert <span class="java&#45;quote">"Bad"</span> == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Testing the successful submission requires providing an appropriate <code>SynchronizerToken</code>:
</div><p class="paragraph"/>フォームの送信が成功する場合のテストは適切な<code>SynchronizerToken</code>が必要となります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.codehaus.groovy.grails.web.servlet.mvc.SynchronizerToken
...<p class="paragraph"/>void testValidFormSubmission() &#123;
    def tokenHolder = SynchronizerTokensHolder.store(session)<p class="paragraph"/>    params&#91;SynchronizerTokensHolder.TOKEN_URI&#93; = '/controller/handleForm'
    params&#91;SynchronizerTokensHolder.TOKEN_KEY&#93; = tokenHolder.generateToken(params&#91;SynchronizerTokensHolder.TOKEN_URI&#93;)<p class="paragraph"/>    controller.handleForm()
    assert <span class="java&#45;quote">"Good"</span> == response.text
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
If you test both the valid and the invalid request in the same test be sure to reset the response between executions of the controller:
</div><p class="paragraph"/>もし、有効/無効のリクエストを両方ともテストしたい場合、コントローラのメソッド実行の間で、レスポンスをリセットしてください。<p class="paragraph"/><div class="code"><pre>controller.handleForm() // first execution
&#8230;
response.reset()
&#8230;
controller.handleForm() // second execution</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing File Upload</h4>
</div><p class="paragraph"/><h4>ファイルアップロードのテスト</h4><p class="paragraph"/><div class="hidden-block">
You use the <code>GrailsMockMultipartFile</code> class to test file uploads. For example consider the following controller action:
</div><p class="paragraph"/>ファイルアップロードをテストするためには、<code>GrailsMockMultipartFile</code>クラスを使います。例えば、次のコントローラアクションを見てください。<p class="paragraph"/><div class="code"><pre>def uploadFile() &#123;
    MultipartFile file = request.getFile(<span class="java&#45;quote">"myFile"</span>)
    file.transferTo(<span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"/local/disk/myFile"</span>))
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this action you can register a <code>GrailsMockMultipartFile</code> with the request:
</div><p class="paragraph"/>このアクションをテストするには、リクエストに<code>GrailsMockMultipartFile</code>を設定してください。<p class="paragraph"/><div class="code"><pre>void testFileUpload() &#123;
    <span class="java&#45;keyword">final</span> file = <span class="java&#45;keyword">new</span> GrailsMockMultipartFile(<span class="java&#45;quote">"myFile"</span>, <span class="java&#45;quote">"foo"</span>.bytes)
    request.addFile(file)
    controller.uploadFile()<p class="paragraph"/>    assert file.targetFileLocation.path == <span class="java&#45;quote">"/local/disk/myFile"</span>
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>GrailsMockMultipartFile</code> constructor arguments are the name and contents of the file. It has a mock implementation of the <code>transferTo</code> method that simply records the <code>targetFileLocation</code> and doesn't write to disk.
</div><p class="paragraph"/><code>GrailsMockMultipartFile</code>のコンストラクタの引数はファイル名とファイルの内容です。これは<code>transferTo</code>のモック実装をもっており、ファイルには書き込まずに<code>targetFileLocation</code>として値を保持します。<p class="paragraph"/><div class="hidden-block">
<h4>Testing Command Objects</h4>
</div><p class="paragraph"/><h4>Commnadオブジェクトのテスト</h4><p class="paragraph"/><div class="hidden-block">
Special support exists for testing command object handling with the <code>mockCommandObject</code> method. For example consider the following action:
</div><p class="paragraph"/><code>mockCommandObject</code>メソッドにはCommandオブジェクトの処理をテストするための特別な機能があります。例えば、次のアクションを見てください。<p class="paragraph"/><div class="code"><pre>def handleCommand(SimpleCommand simple) &#123;
    <span class="java&#45;keyword">if</span> (simple.hasErrors()) &#123;
        render <span class="java&#45;quote">"Bad"</span>
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        render <span class="java&#45;quote">"Good"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
To test this you mock the command object, populate it and then validate it as follows:
</div><p class="paragraph"/>これをテストするために、次のようにCommandオブジェクトをモック化した上で、データを投入して検証してください。<p class="paragraph"/><div class="code"><pre>void testInvalidCommand() &#123;
    def cmd = mockCommandObject(SimpleCommand)
    cmd.name = '' // doesn't allow blank names<p class="paragraph"/>    cmd.validate()
    controller.handleCommand(cmd)<p class="paragraph"/>    assert response.text == 'Bad'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Calling Tag Libraries</h4>
</div><p class="paragraph"/><h4>タグライブラリの呼び出しテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test calling tag libraries using <code>ControllerUnitTestMixin</code>, although the mechanism for testing the tag called varies from tag to tag. For example to test a call to the <code>message</code> tag, add a message to the <code>messageSource</code>. Consider the following action:
</div><p class="paragraph"/>タグごとに必要となるテストの方法は異なりますが、タグライブラリの呼びしは<code>ControllerUnitTestMixin</code>を使用することでテストできます。例えば、<code>message</code>タグを呼び出すテストでは、<code>messageSource</code>にメッセージを加えます。次のアクションを見てください。<p class="paragraph"/><div class="code"><pre>def showMessage() &#123;
    render g.message(code: <span class="java&#45;quote">"foo.bar"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
This can be tested as follows:
</div><p class="paragraph"/>これは次のようにテストをします。<p class="paragraph"/><div class="code"><pre>void testRenderBasicTemplateWithTags() &#123;
    messageSource.addMessage(<span class="java&#45;quote">"foo.bar"</span>, request.locale, <span class="java&#45;quote">"Hello World"</span>)<p class="paragraph"/>    controller.showMessage()<p class="paragraph"/>    assert response.text == <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div>


<a name="12.1.2 Unit Testing Tag Libraries"><!-- Legacy link --></a>
<h2 id="unitTestingTagLibraries">12.1.2 タグライブラリのユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
Tag libraries and GSP pages can be tested with the <code>grails.test.mixin.web.GroovyPageUnitTestMixin</code> mixin. To use the mixin declare which tag library is under test with the <code>TestFor</code> annotation:
</div><p class="paragraph"/>タグライブラリとGSPは、<code>grails.test.mixin.web.GroovyPageUnitTestMixin</code>のMixinでテストできます。Mixinを使用するために、タグライブラリを<code>TestFor</code>アノテーションの中に宣言します。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleTagLib)
class SimpleTagLibTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Note that if you are testing invocation of a custom tag from a controller you can combine the <code>ControllerUnitTestMixin</code> and the <code>GroovyPageUnitTestMixin</code> using the <code>Mock</code> annotation:
</div><p class="paragraph"/>もし、コントローラからカスタムタグの呼び出しをテストする場合、<code>Mock</code>アノテーションを使用して<code>ControllerUnitTestMixin</code>と<code>GroovyPageUnitTestMixin</code>を組み合わせることができます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(SimpleTagLib)
class GroovyPageUnitTestMixinTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Custom Tags</h4>
</div><p class="paragraph"/><h4>カスタムタグのテスト</h4><p class="paragraph"/><div class="hidden-block">
The core Grails tags don't need to be enabled during testing, however custom tag libraries do. The <code>GroovyPageUnitTestMixin</code> class provides a <code>mockTagLib()</code> method that you can use to mock a custom tag library. For example consider the following tag library:
</div><p class="paragraph"/>Grailsコアのタグはテスト中に有効にする必要はありませんが、カスタムタグライブラリは有効にする必要があります。<code>GroovyPageUnitTestMixin</code>クラスは、カスタムタグライブラリをモック化するために使える<code>mockTagLib()</code>メソッドを提供しています。<p class="paragraph"/><div class="code"><pre>class SimpleTagLib &#123;<p class="paragraph"/>    <span class="java&#45;keyword">static</span> namespace = 's'<p class="paragraph"/>    def hello = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"Hello $&#123;attrs.name ?: 'World'&#125;"</span>
    &#125;<p class="paragraph"/>    def bye = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"Bye $&#123;attrs.author.name ?: 'World'&#125;"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
You can test this tag library by using <code>TestFor</code> and supplying the name of the tag library:
</div><p class="paragraph"/><code>TestFor</code>を使用し、タグライブラリの名前を記載することによって、上記のタグライブラリをテストできます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleTagLib)
class SimpleTagLibTests &#123;
    void testHelloTag() &#123;
        assert applyTemplate('&#60;s:hello /&#62;') == 'Hello World'
        assert applyTemplate('&#60;s:hello name=<span class="java&#45;quote">"Fred"</span> /&#62;') == 'Hello Fred'
        assert applyTemplate('&#60;s:bye author=<span class="java&#45;quote">"&#36;&#123;author&#125;"</span> /&#62;', &#91;author: <span class="java&#45;keyword">new</span> Author(name: 'Fred')&#93;) == 'Bye Fred'
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Alternatively, you can use the <code>TestMixin</code> annotation and mock multiple tag libraries using the <code>mockTagLib()</code> method:
</div><p class="paragraph"/>代わりに、<code>TestMixin</code>アノテーションと<code>mockTagLib()</code>メソッドにより、複数のタグライブラリをモック化することができます。<p class="paragraph"/><div class="code"><pre>@grails.test.mixin.TestMixin(GroovyPageUnitTestMixin)
class MultipleTagLibraryTests &#123;<p class="paragraph"/>    @Test
    void testMuliple() &#123;
        mockTagLib(FirstTagLib)
        mockTagLib(SecondTagLib)<p class="paragraph"/>        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>GroovyPageUnitTestMixin</code> provides convenience methods for asserting that the template output equals or matches an expected value.
</div><p class="paragraph"/><code>GroovyPageUnitTestMixin</code>はテンプレート出力が期待した値と同じであることを検証するために便利なメソッドを提供しています。<p class="paragraph"/><div class="code"><pre>@grails.test.mixin.TestMixin(GroovyPageUnitTestMixin)
class MultipleTagLibraryTests &#123;<p class="paragraph"/>    @Test
    void testMuliple() &#123;
        mockTagLib(FirstTagLib)
        mockTagLib(SecondTagLib)
        assertOutputEquals ('Hello World', '&#60;s:hello /&#62;')
        assertOutputMatches (/.&#42;Fred.&#42;/, '&#60;s:hello name=<span class="java&#45;quote">"Fred"</span> /&#62;')
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing View and Template Rendering</h4>
</div><p class="paragraph"/><h4>表示とテンプレートのレンダリングテスト</h4><p class="paragraph"/><div class="hidden-block">
You can test rendering of views and templates in <code>grails-app/views</code> via the <code>render(Map)</code> method provided by <code>GroovyPageUnitTestMixin</code> :
</div><p class="paragraph"/><code>GroovyPageUnitTestMixin</code>で提供されている<code>render(Map)</code>メソッドを使って<code>grails-app/views</code>内にあるビューとテンプレートのレンダリングをテストできます。<p class="paragraph"/><div class="code"><pre>def result = render(template: <span class="java&#45;quote">"/simple/hello"</span>)
assert result == <span class="java&#45;quote">"Hello World"</span></pre></div><p class="paragraph"/><div class="hidden-block">
This will attempt to render a template found at the location <code>grails-app/views/simple/_hello.gsp</code>. Note that if the template depends on any custom tag libraries you need to call <code>mockTagLib</code> as described in the previous section.
</div><p class="paragraph"/>これは、<code>grails-app/views/simple/_hello.gsp</code>に配置されているテンプレートをレンダリングします。もしテンプレートがいくつかのカスタムタグライブラリに依存している場合、前の節で記載した<code>mockTagLib</code>を呼び出す必要があります。


<a name="12.1.3 Unit Testing Domains"><!-- Legacy link --></a>
<h2 id="unitTestingDomains">12.1.3 ドメインのユニットテスト</h2>
<div class="hidden-block">
<h4>Overview</h4>
</div>
<h4>概要</h4><p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
The mocking support described here is best used when testing non-domain artifacts that use domain classes, to let you focus on testing the artifact without needing a database. But when testing persistence it's best to use integration tests which configure Hibernate and use a database.
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
モック機能のサポートは、非ドメインクラスがドメインクラスを使用している場合に、データベースを必要とせず、テストに集中できるという意味では最適な方法です。しかし、ドメインの永続化のテストを行いたい場合はHibernateとデータベースを使用するIntegrationテストが最適な方法です。
</blockquote><p class="paragraph"/><div class="hidden-block">
Domain class interaction can be tested without involving a database connection using <code>DomainClassUnitTestMixin</code>. This implementation mimics the behavior of GORM against an in-memory <code>ConcurrentHashMap</code> implementation. Note that this has limitations compared to a real GORM implementation. The following features of GORM for Hibernate can only be tested within an integration test:
</div><p class="paragraph"/>ドメインクラスとしての振る舞いは<code>DomainClassUnitTestMixin</code>を使用することで、データベースを必要とせずにテストを行うことができます。この実装はGORMの振る舞いを擬似した、メモリ上の<code>ConcurrentHashMap</code>です。この実装は実際のGORMの動作と比べて制限があることに注意してください。以下のHibernateに対するGORMの機能はIntegrationテストでのみテストできます。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li>String-based HQL queries</li>
<li>composite identifiers</li>
<li>dirty checking methods</li>
<li>any direct interaction with Hibernate</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li>文字列ベースのHQLクエリ</li>
<li>複合主キー</li>
<li>dirtyチェックメソッド</li>
<li>Hibernateの直接操作</li>
</ul><p class="paragraph"/><div class="hidden-block">
However a large, commonly-used portion of the GORM API can be mocked using <code>DomainClassUnitTestMixin</code> including:
</div><p class="paragraph"/>上記以外の、よく使用されるGORM APIの大部分は<code>DomainClassUnitTestMixin</code>を使用することでモック化することができます。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li>Simple persistence methods like <code>save()</code>, <code>delete()</code> etc.</li>
<li>Dynamic Finders</li>
<li>Named Queries</li>
<li>Query-by-example</li>
<li>GORM Events</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>save()</code>や<code>delete()</code>といった永続化メソッド</li>
<li>ダイナミックファインダー</li>
<li>名前付きクエリ</li>
<li>Exampleによるクエリ</li>
<li>GORMのイベント</li>
</ul><p class="paragraph"/><div class="hidden-block">
If something isn't supported then <code>GrailsUnitTestMixin</code>'s <code>mockFor</code> method can come in handy to mock the missing pieces. Alternatively you can write an integration test which bootstraps the complete Grails environment at a cost of test execution time.
</div><p class="paragraph"/>もしサポートされてない部分があった場合でも、<code>GrailsUnitTestMixin</code>の<code>mockFor</code>メソッドを使用することで足りない部分をモック化することができます。または、テストの実行時間はかかりますが、完全にGrails環境が立ち上がるIntegrationテストを使用することもできます。<p class="paragraph"/><div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
<code>DomainClassUnitTestMixin</code> is typically used in combination with testing either a controller, service or tag library where the domain is a mock collaborator defined by the <code>Mock</code> annotation:
</div><p class="paragraph"/><code>DomainClassUnitTestMixin</code>は、通常コントローラやサービス、またはタグライブラリといった、<code>Mock</code>アノテーションでドメインがモックとして協調動作する必要がある場所で使用されます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(SimpleController)
@Mock(Simple)
class SimpleControllerTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The example above tests the <code>SimpleController</code> class and mocks the behavior of the <code>Simple</code> domain class as well. For example consider a typical scaffolded <code>save</code> controller action:
</div><p class="paragraph"/>上記の例では<code>SimpleController</code>のテストで<code>Simple</code>ドメインクラスとして振る舞うモックを宣言しています。例えば典型的なスキャフォルドで生成されたコントローラの<code>save</code>アクションについて考えてみます。<p class="paragraph"/><div class="code"><pre>class BookController &#123;
    def save() &#123;
        def book = <span class="java&#45;keyword">new</span> Book(params)
        <span class="java&#45;keyword">if</span> (book.save(flush: <span class="java&#45;keyword">true</span>)) &#123;
            flash.message = message(
                    code: '<span class="java&#45;keyword">default</span>.created.message',
                    args: &#91;message(code: 'book.label',
                                   <span class="java&#45;keyword">default</span>: 'Book'), book.id&#93;)&#125;<span class="java&#45;quote">"
            redirect(action: "</span>show<span class="java&#45;quote">", id: book.id)
        &#125;
        <span class="java&#45;keyword">else</span> &#123;
            render(view: "</span>create", model: &#91;bookInstance: book&#93;)
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Tests for this action can be written as follows:
</div><p class="paragraph"/>このアクションに対するテストは次のように書けます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.&#42;<p class="paragraph"/>@TestFor(BookController)
@Mock(Book)
class BookControllerTests &#123;<p class="paragraph"/>    void testSaveInvalidBook() &#123;
        controller.save()<p class="paragraph"/>        assert model.bookInstance != <span class="java&#45;keyword">null</span>
        assert view == '/book/create'
    &#125;<p class="paragraph"/>    void testSaveValidBook() &#123;
        params.title = <span class="java&#45;quote">"The Stand"</span>
        params.pages = <span class="java&#45;quote">"500"</span><p class="paragraph"/>        controller.save()<p class="paragraph"/>        assert response.redirectedUrl == '/book/show/1'
        assert flash.message != <span class="java&#45;keyword">null</span>
        assert Book.count() == 1
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<code>Mock</code> annotation also supports a list of mock collaborators if you have more than one domain to mock:
</div><p class="paragraph"/>複数のドメインのモックが必要な場合は<code>Mock</code>アノテーションにリストで指定することができます。<p class="paragraph"/><div class="code"><pre>@TestFor(BookController)
@Mock(&#91;Book, Author&#93;)
class BookControllerTests &#123;
   &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Alternatively you can also use the <code>DomainClassUnitTestMixin</code> directly with the <code>TestMixin</code> annotation:
</div><p class="paragraph"/>別の方法として<code>TestMixin</code>アノテーションに直接<code>DomainClassUnitTestMixin</code>を指定する方法もあります。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.mixin.domain.DomainClassUnitTestMixin<p class="paragraph"/>@TestFor(BookController)
@TestMixin(DomainClassUnitTestMixin)
class BookControllerTests &#123;
   &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
And then call the <code>mockDomain</code> method to mock domains during your test:
</div><p class="paragraph"/>そしてテストの中でドメインをモック化する<code>mockDomain</code>メソッドを呼び出します。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    mockDomain(Author)
    mockDomain(Book)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The <code>mockDomain</code> method also includes an additional parameter that lets you pass a Map of Maps to configure a domain, which is useful for fixture-like data:
</div><p class="paragraph"/><code>mockDomain</code>メソッドは、ドメインを構築するマップの一覧を与えることで、データのフィクスチャを生成するような使い方もできます。<p class="paragraph"/><div class="code"><pre>void testSave() &#123;
    mockDomain(Book, &#91;
            &#91;title: <span class="java&#45;quote">"The Stand"</span>, pages: 1000&#93;,
            &#91;title: <span class="java&#45;quote">"The Shining"</span>, pages: 400&#93;,
            &#91;title: <span class="java&#45;quote">"Along Came a Spider"</span>, pages: 300&#93; &#93;)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Testing Constraints</h4>
</div>
<h4>制約のテスト</h4><p class="paragraph"/>There are 4 types of validateable classes:
<ol>
<li>Domain Classes</li>
<li>Classes Marked With The &#64;Validateable Annotation</li>
<li>Command Objects Which Have Been Made Valdiateable Automatically</li>
<li>Classes Configured To Be Validateable via The <code>grails.validateable.classes</code> Config.groovy Property</li>
</ol><p class="paragraph"/>The first 3 are easily testable in a unit test with no special configuration necessary as long as the test method is marked with &#64;TestFor or explicitly applies the <code>GrailsUnitTestMixin</code> using &#64;TestMixin.  See the examples below.<p class="paragraph"/><div class="code"><pre>// src/groovy/com/demo/MyValidateable.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/>@grails.validation.Validateable
class MyValidateable &#123;
    <span class="java&#45;object">String</span> name
    <span class="java&#45;object">Integer</span> age<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        name matches: /&#91;A&#45;Z&#93;.&#42;/
        age range: 1..99
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// grails&#45;app/domain/com/demo/Person.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/>class Person &#123;
    <span class="java&#45;object">String</span> name<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        name matches: /&#91;A&#45;Z&#93;.&#42;/
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// grails&#45;app/controllers/com/demo/DemoController.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/>class DemoController &#123;<p class="paragraph"/>    def addItems(MyCommandObject co) &#123;
        <span class="java&#45;keyword">if</span>(co.hasErrors()) &#123;
            render 'something went wrong'
        &#125; <span class="java&#45;keyword">else</span> &#123;
            render 'items have been added'
        &#125;
    &#125;
&#125;<p class="paragraph"/>class MyCommandObject &#123;
    <span class="java&#45;object">Integer</span> numberOfItems<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        numberOfItems range: 1..10
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test/unit/com/demo/PersonSpec.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.test.mixin.TestFor
<span class="java&#45;keyword">import</span> spock.lang.Specification<p class="paragraph"/>@TestFor(Person)
class PersonSpec <span class="java&#45;keyword">extends</span> Specification &#123;<p class="paragraph"/>    void <span class="java&#45;quote">"Test that name must begin with an upper <span class="java&#45;keyword">case</span> letter"</span>() &#123;
        when: 'the name begins with a lower letter'
        def p = <span class="java&#45;keyword">new</span> Person(name: 'jeff')<p class="paragraph"/>        then: 'validation should fail'
        !p.validate()<p class="paragraph"/>        when: 'the name begins with an upper <span class="java&#45;keyword">case</span> letter'
        p = <span class="java&#45;keyword">new</span> Person(name: 'Jeff')<p class="paragraph"/>        then: 'validation should pass'
        p.validate()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test/unit/com/demo/DemoControllerSpec.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.test.mixin.TestFor
<span class="java&#45;keyword">import</span> spock.lang.Specification<p class="paragraph"/>@TestFor(DemoController)
class DemoControllerSpec <span class="java&#45;keyword">extends</span> Specification &#123;<p class="paragraph"/>    void 'Test an invalid number of items'() &#123;
        when:
        params.numberOfItems = 42
        controller.addItems()<p class="paragraph"/>        then:
        response.text == 'something went wrong'
    &#125;<p class="paragraph"/>    void 'Test a valid number of items'() &#123;
        when:
        params.numberOfItems = 8
        controller.addItems()<p class="paragraph"/>        then:
        response.text == 'items have been added'
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test/unit/com/demo/MyValidateableSpec.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.test.mixin.TestMixin
<span class="java&#45;keyword">import</span> grails.test.mixin.support.GrailsUnitTestMixin
<span class="java&#45;keyword">import</span> spock.lang.Specification<p class="paragraph"/>
@TestMixin(GrailsUnitTestMixin)
class MyValidateableSpec <span class="java&#45;keyword">extends</span> Specification &#123;<p class="paragraph"/>    void 'Test validate can be invoked in a unit test with no special configuration'() &#123;
        when: 'an object is valid'
        def validateable = <span class="java&#45;keyword">new</span> MyValidateable(name: 'Kirk', age: 47)<p class="paragraph"/>        then: 'validate() returns <span class="java&#45;keyword">true</span> and there are no errors'
        validateable.validate()
        !validateable.hasErrors()
        validateable.errors.errorCount == 0<p class="paragraph"/>        when: 'an object is invalid'
        validateable.name = 'kirk'<p class="paragraph"/>        then: 'validate() returns <span class="java&#45;keyword">false</span> and the appropriate error is created'
        !validateable.validate()
        validateable.hasErrors()
        validateable.errors.errorCount == 1
        validateable.errors&#91;'name'&#93;.code == 'matches.invalid'<p class="paragraph"/>        when: 'the clearErrors() is called'
        validateable.clearErrors()<p class="paragraph"/>        then: 'the errors are gone'
        !validateable.hasErrors()
        validateable.errors.errorCount == 0<p class="paragraph"/>        when: 'the object is put back in a valid state'
        validateable.name = 'Kirk'<p class="paragraph"/>        then: 'validate() returns <span class="java&#45;keyword">true</span> and there are no errors'
        validateable.validate()
        !validateable.hasErrors()
        validateable.errors.errorCount == 0
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// test/unit/com/demo/MyCommandObjectSpec.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.test.mixin.TestMixin
<span class="java&#45;keyword">import</span> grails.test.mixin.support.GrailsUnitTestMixin
<span class="java&#45;keyword">import</span> spock.lang.Specification<p class="paragraph"/>@TestMixin(GrailsUnitTestMixin)
class MyCommandObjectSpec <span class="java&#45;keyword">extends</span> Specification &#123;<p class="paragraph"/>    void 'Test that numberOfItems must be between 1 and 10'() &#123;
        when: 'numberOfItems is less than 1'
        def co = <span class="java&#45;keyword">new</span> MyCommandObject()
        co.numberOfItems = 0<p class="paragraph"/>        then: 'validation fails'
        !co.validate()
        co.hasErrors()
        co.errors&#91;'numberOfItems'&#93;.code == 'range.toosmall'<p class="paragraph"/>        when: 'numberOfItems is greater than 10'
        co.numberOfItems = 11<p class="paragraph"/>        then: 'validation fails'
        !co.validate()
        co.hasErrors()
        co.errors&#91;'numberOfItems'&#93;.code == 'range.toobig'<p class="paragraph"/>        when: 'numberOfItems is greater than 1'
        co.numberOfItems = 1<p class="paragraph"/>        then: 'validation succeeds'
        co.validate()
        !co.hasErrors()<p class="paragraph"/>        when: 'numberOfItems is greater than 10'
        co.numberOfItems = 10<p class="paragraph"/>        then: 'validation succeeds'
        co.validate()
        !co.hasErrors()
    &#125;
&#125;</pre></div><p class="paragraph"/>For validateable classes which are not one of the first 3 types listed above but are configured with the <code>grails.validateable.classes</code> property in <code>Config.groovy</code>, one additional step is required to test validation.  <code>GrailsUnitTestMixin</code> provides a method named <code>mockForConstraintsTests</code> that will mock validation support for these classes.  See the example below.<p class="paragraph"/><div class="code"><pre>// src/groovy/com/demo/Book.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/>class Book &#123;
    <span class="java&#45;object">String</span> title
    <span class="java&#45;object">String</span> author<p class="paragraph"/>    <span class="java&#45;keyword">static</span> constraints = &#123;
        author minSize: 5
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>// grails&#45;app/conf/Config.groovy
grails.validateable.classes = &#91;com.demo.Book&#93;<p class="paragraph"/>// ...</pre></div><p class="paragraph"/><div class="code"><pre>// test/unit/com/demo/BookSpec.groovy
<span class="java&#45;keyword">package</span> com.demo<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.test.mixin.TestMixin
<span class="java&#45;keyword">import</span> grails.test.mixin.support.GrailsUnitTestMixin
<span class="java&#45;keyword">import</span> spock.lang.Specification<p class="paragraph"/>@TestMixin(GrailsUnitTestMixin)
class BookSpec <span class="java&#45;keyword">extends</span> Specification &#123;<p class="paragraph"/>    void 'Test validation'() &#123;
        given:
        mockForConstraintsTests Book<p class="paragraph"/>        when: 'the author name has only 4 characters'
        def book = <span class="java&#45;keyword">new</span> Book()
        book.author = 'Jeff'<p class="paragraph"/>        then: 'validation should fail'
        !book.validate()
        book.hasErrors()
        book.errors&#91;'author'&#93; == 'minSize'<p class="paragraph"/>        when: 'the author name has 5 characters'
        book.author = 'Jacob'<p class="paragraph"/>        then: 'validation should pass'
        book.validate()
        !book.hasErrors()
    &#125;
&#125;</pre></div><p class="paragraph"/>Note that the <code>mockForConstraintsTests</code> method changes the behavior of the errors object such that something like <code>book.errors'author'</code> will evaluate to the name of the failed constraint, not a <code>org.springframework.validation.FieldError</code> object.  This is convenient for unit tests.  If your unit test really does want a reference to the <code>org.springframework.validation.FieldError</code> object use something like <code>book.errors.getFieldError('author')</code>.<p class="paragraph"/>
That's it for testing constraints. One final thing we would like to say is that testing the constraints in this way catches a common error: typos in the "constraints" property name which is a mistake that is easy to make and equally easy to overlook. A unit test for your constraints will highlight the problem straight away.<p class="paragraph"/>

<a name="12.1.4 Unit Testing Filters"><!-- Legacy link --></a>
<h2 id="unitTestingFilters">12.1.4 フィルタのユニットテスト</h2>
<div class="hidden-block">Unit testing filters is typically a matter of testing a controller where a filter is a mock collaborator. For example consider the following filters class:</div>
フィルタをユニットテストするには、一般的に、フィルタがモックコラボレータであるようなコントローラをテストすることになります。
例えば、次のフィルタクラスを考えてみましょう:<p class="paragraph"/><div class="code"><pre>class CancellingFilters &#123;
    def filters = &#123;
        all(controller:<span class="java&#45;quote">"simple"</span>, action:<span class="java&#45;quote">"list"</span>) &#123;
            before = &#123;
                redirect(controller:<span class="java&#45;quote">"book"</span>)
                <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span>
            &#125;
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">This filter interceptors the <code>list</code> action of the <code>simple</code> controller and redirects to the <code>book</code> controller. To test this filter you start off with a test that targets the <code>SimpleController</code> class and add the <code>CancellingFilters</code> as a mock collaborator:</div>
このフィルタは<code>simple</code>コントローラの<code>list</code>アクションをインターセプトし、<code>book</code>コントローラにリダイレクトします。このフィルタをテストするには、まず<code>SimpleController</code>クラスを対象としたテストを作り、<code>CancellingFilters</code>をモックコラボレータとして設定します:<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(CancellingFilters)
class SimpleControllerTests &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You can then implement a test that uses the <code>withFilters</code> method to wrap the call to an action in filter execution:</div>
次に、フィルタを通して実行されるアクションの呼び出しを<code>withFilters</code>メソッドで囲むようにテストを実装します:<p class="paragraph"/><div class="code"><pre>void testInvocationOfListActionIsFiltered() &#123;
    withFilters(action:<span class="java&#45;quote">"list"</span>) &#123;
        controller.list()
    &#125;
    assert response.redirectedUrl == '/book'
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Note that the <code>action</code> parameter is required because it is unknown what the action to invoke is until the action is actually called. The <code>controller</code> parameter is optional and taken from the controller under test. If it is another controller you are testing then you can specify it:</div>
実際にアクションが呼び出されるまで、どのアクションが実行されるか不明なため、<code>action</code>パラメータが必須であることに注意してください。
<code>controller</code>パラメータは省略可能です。省略時はテスト対象のコントローラが適用されます。
もしテストしているのが別のコントローラである場合はそれを指定します。<p class="paragraph"/><div class="code"><pre>withFilters(controller:<span class="java&#45;quote">"book"</span>,action:<span class="java&#45;quote">"list"</span>) &#123;
    controller.list()
&#125;</pre></div>


<a name="12.1.5 Unit Testing URL Mappings"><!-- Legacy link --></a>
<h2 id="unitTestingURLMappings">12.1.5 URLマッピングのユニットテスト</h2>
<div class="hidden-block">
<h4>The Basics</h4>
</div><p class="paragraph"/><h4>基本</h4><p class="paragraph"/><div class="hidden-block">
Testing URL mappings can be done with the <code>TestFor</code> annotation testing a particular URL mappings class. For example to test the default URL mappings you can do the following:
</div><p class="paragraph"/>URLマッピングをテストするには、<code>TestFor</code>アノテーションを使用します。例えば、デフォルトのURLマッピングをテストするためには次のように使用します。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.example.AuthorController
<span class="java&#45;keyword">import</span> org.example.SimpleController<p class="paragraph"/>@TestFor(UrlMappings)
@Mock(&#91;AuthorController, SimpleController&#93;)
class UrlMappingsTests &#123;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
As you can see, any controller that is the target of a URL mapping that you're testing  <em class="italic">must</em>  be added to the <code>&#64;Mock</code> annotation.
</div><p class="paragraph"/>上記のように、テストを実施するURLマッピングの対象となるコントローラには<code>Mock</code>アノテーションを追加しなければなりません。<p class="paragraph"/><div class="hidden-block">
<blockquote class="note">
Note that since the default <code>UrlMappings</code> class is in the default package your test must also be in the default package
</blockquote>
</div><p class="paragraph"/><blockquote class="note">
<code>UrlMappings</code>クラスがデフォルトパッケージの中にあるので、あなたが実行するテストもデフォルトパッケージの中になければいけません。
</blockquote><p class="paragraph"/><div class="hidden-block">
With that done there are a number of useful methods that are defined by the <code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code> for testing URL mappings. These include:
</div><p class="paragraph"/>URLマッピングをテストするために<code>grails.test.mixin.web.UrlMappingsUnitTestMixin</code>には以下のような便利なメソッドが定義されています。<p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertForwardUrlMapping</code> - Asserts a URL mapping is forwarded for the given controller class (note that controller will need to be defined as a mock collaborate for this to work)</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertForwardUrlMapping</code> - 指定したコントローラクラスにフォワードするURLマッピングを検証する（コントローラはモックコラボレータとして定義される必要があることに注意してください）</li>
</ul><p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertReverseUrlMapping</code> - Asserts that the given URL is produced when reverse mapping a link to a given controller and action</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertReverseUrlMapping</code> - 指定したURLが、与えられたコントローラとアクションからリバースマッピングしたリンクとして生成されるか検証する</li>
</ul><p class="paragraph"/><div class="hidden-block">
<ul class="star">
<li><code>assertUrlMapping</code> - Asserts a URL mapping is valid for the given URL. This combines the <code>assertForwardUrlMapping</code> and <code>assertReverseUrlMapping</code> assertions</li>
</ul><p class="paragraph"/></div>
<ul class="star">
<li><code>assertUrlMapping</code> - 指定したURLに対応するURLマッピングの妥当性を検証する。これは、<code>assertForwardUrlMapping</code>と<code>assertReverseUrlMapping</code>を組み合わせたものです。</li>
</ul><p class="paragraph"/><div class="hidden-block">
<h4>Asserting Forward URL Mappings</h4>
</div><p class="paragraph"/><h4>URLマッピングの転送の検証</h4><p class="paragraph"/><div class="hidden-block">
You use <code>assertForwardUrlMapping</code> to assert that a given URL maps to a given controller. For example, consider the following URL mappings:
</div><p class="paragraph"/>指定したURLが、期待したコントローラにマップされるか検証するために<code>assertForwardUrlMapping</code>が使用できます。例えば、以下のようなURLマッピングについて考えてみます。<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">static</span> mappings = &#123;
    <span class="java&#45;quote">"/action1"</span>(controller: <span class="java&#45;quote">"simple"</span>, action: <span class="java&#45;quote">"action1"</span>)
    <span class="java&#45;quote">"/action2"</span>(controller: <span class="java&#45;quote">"simple"</span>, action: <span class="java&#45;quote">"action2"</span>)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The following test can be written to assert these URL mappings:
</div><p class="paragraph"/>このようなURLマッピングのテストは次のように書けます。<p class="paragraph"/><div class="code"><pre>void testUrlMappings() &#123;<p class="paragraph"/>    assertForwardUrlMapping(<span class="java&#45;quote">"/action1"</span>, controller: 'simple',
                                        action: <span class="java&#45;quote">"action1"</span>)<p class="paragraph"/>    assertForwardUrlMapping(<span class="java&#45;quote">"/action2"</span>, controller: 'simple',
                                        action: <span class="java&#45;quote">"action2"</span>)<p class="paragraph"/>    shouldFail &#123;
        assertForwardUrlMapping(<span class="java&#45;quote">"/action2"</span>, controller: 'simple',
                                            action: <span class="java&#45;quote">"action1"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
<h4>Assert Reverse URL Mappings</h4>
</div><p class="paragraph"/><h4>URLマッピングのリバース検証</h4><p class="paragraph"/><div class="hidden-block">
You use <code>assertReverseUrlMapping</code> to check that correct links are produced for your URL mapping when using the <code>link</code> tag in GSP views. An example test is largely identical to the previous listing except you use <code>assertReverseUrlMapping</code> instead of <code>assertForwardUrlMapping</code>. Note that you can combine these 2 assertions with <code>assertUrlMapping</code>.
</div><p class="paragraph"/>GSPのビューで<code>link</code>タグを使用した場合に、URLマッピングから生成されるリンクを確認(チェック)するために<code>assertReverseUrlMapping</code>を使用できます。
<code>assertReverseUrlMapping</code>の代わりに<code>assertForwardUrlMapping</code>を使用する以外は上記の例とほとんど同じです。
<code>assertUrlMapping</code>はこれら2つのアサーションを組み合わせた検証が出来ます。<p class="paragraph"/><div class="hidden-block">
<h4>Simulating Controller Mapping</h4>
</div><p class="paragraph"/><h4>コントローラのマッピングをシミュレート</h4><p class="paragraph"/><div class="hidden-block">
In addition to the assertions to check the validity of URL mappings you can also simulate mapping to a controller by using your <code>UrlMappings</code> as a mock collaborator and the <code>mapURI</code> method. For example:
</div><p class="paragraph"/>URLマッピングの妥当性をチェックするためのアサーションに加えて、<code>UrlMappings</code>をモックとして指定し<code>mapURI</code>メソッドを使用することで、コントローラへのマッピングをシミュレートすることができます。<p class="paragraph"/><div class="code"><pre>@TestFor(SimpleController)
@Mock(UrlMappings)
class SimpleControllerTests &#123;<p class="paragraph"/>    void testControllerMapping() &#123;<p class="paragraph"/>        SimpleController controller = mapURI('/simple/list')
        assert controller != <span class="java&#45;keyword">null</span><p class="paragraph"/>        def model = controller.list()
        assert model != <span class="java&#45;keyword">null</span>
    &#125;
&#125;</pre></div>


<a name="12.1.6 Mocking Collaborators"><!-- Legacy link --></a>
<h2 id="mockingCollaborators">12.1.6 コラボレータのモック化</h2>
<div class="hidden-block">
Beyond the specific targeted mocking APIs there is also an all-purpose <code>mockFor()</code> method that is available when using the <code>TestFor</code> annotation. The signature of <code>mockFor</code> is:
</div>
ドメインをモックするなど特定の目的をもったモックAPIの他に、汎用的に使える<code>mockFor()</code>メソッドがあります。これは<code>TestFor</code>アノテーションを使用している場合にも使用できます。<code>mockFor</code>は以下のように使用します。<p class="paragraph"/><div class="code"><pre>mockFor(class, loose = <span class="java&#45;keyword">false</span>)</pre></div><p class="paragraph"/><div class="hidden-block">
This is general-purpose mocking that lets you set up either strict or loose demands on a class.
</div>
<code>mockFor</code>を使用したモックでは、demand(要求)がstrict(厳密)、またはloose(緩やか)のどちらであるかを指定する必要があります。<p class="paragraph"/><div class="hidden-block">
This method is surprisingly intuitive to use. By default it will create a strict mock control object (one for which the order in which methods are called is important) that you can use to specify demands:
</div>
デフォルトではstrictなモック制御オブジェクト(メソッドの呼び出し順序をチェックする)として生成し、demandを次のように指定します。<p class="paragraph"/><div class="code"><pre>def strictControl = mockFor(MyService)
strictControl.demand.someMethod(0..2) &#123; <span class="java&#45;object">String</span> arg1, <span class="java&#45;object">int</span> arg2 &#45;&#62; &#8230; &#125;
strictControl.demand.<span class="java&#45;keyword">static</span>.aStaticMethod &#123;&#45;&#62; &#8230; &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Notice that you can mock static as well as instance methods by using the "static" property. You then specify the name of the method to mock, with an optional range argument. This range determines how many times you expect the method to be called, and if the number of invocations falls outside of that range (either too few or too many) then an assertion error will be thrown. If no range is specified, a default of "1..1" is assumed, i.e. that the method must be called exactly once.
</div>
"static"プロパティを使用することで、インスタンスメソッド同様にstaticなメソッドをモックすることができます。また、モックするメソッドには、必要に応じてrange(範囲)を引数に指定できます。このrangeは期待するメソッドの呼び出し回数を表しており、もし呼び出し回数がこの範囲を外れた場合(多すぎたり、少なすぎたりした場合)は、アサーションエラーがスローされます。rangeを指定しなかった場合は、デフォルトで"1..1"が指定され、メソッドが1度だけ呼び出されること意味しています。<p class="paragraph"/><div class="hidden-block">
The last part of a demand is a closure representing the implementation of the mock method. The closure arguments must match the number and types of the mocked method, but otherwise you are free to add whatever you want in the body.
</div>
demandの最後の引数は、モックの実装を表すクロージャです。クロージャの引数は、モックするメソッドの引数の数と型が一致している必要がありますが、それ以外は自由に中身を実装できます。<p class="paragraph"/><div class="hidden-block">
Call <code>mockControl.createMock()</code> to get an actual mock instance of the class that you are mocking. You can call this multiple times to create as many mock instances as you need. And once you have executed the test method, call <code>mockControl.verify()</code> to check that the expected methods were called.
</div>
モッククラスの定義が完了した後に、<code>mockControl.createMock()</code>メソッドを呼ぶことで、モックインスタンスを作成します。複数のモックインスタンスが必要な場合は、必要なだけこのメソッドを呼び出すことで、複数のモックインスタンスが作成できます。また期待するメソッドの呼び出しを検証するには<code>mockControl.verify()</code>を呼び出してください。<p class="paragraph"/><div class="hidden-block">
Grails mocks also provide a <code>demandExplicit</code> method that can be used in place of demand.  This will check the mocked class's metaClass and throw an ExplicitDemandException if a method with that name and signature doesn't exist. For example, given the service:
</div>
Grailsのモックは、demandの代わりに<code>demandExplicit</code>メソッドも提供しています。これはモックするクラスのmetaClassをチェックし、もしそのメソッドの名前、シグネチャが存在しない場合に、ExplicitDemandExceptionをスローします。例えば次のようなサービスがあるとします。<p class="paragraph"/><div class="code"><pre>class MyService &#123;
    def someMethod(<span class="java&#45;object">String</span> s) &#123; &#8230; &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">
The following mocking works the same as demand
</div>
demandと同じようにモックできます。<p class="paragraph"/><div class="code"><pre>def strictControl = mockFor(MyService)
//Works just like the demand method since method signature exists on the class
strictControl.demandExplicit.someMethod(1) &#123; <span class="java&#45;object">String</span> arg1  &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
While this mocking throws an ExplicitDemandException when the test is run.
</div>
以下はメソッドのシグネイチャが存在しないため、テストを実行した際にExplicitDemandExceptionをスローします。
<div class="code"><pre>def strictControl = mockFor(MyService)
//Throws ExplicitDemandException because method signature doesn't exist
strictControl.demandExplicit.someMethod(1) &#123; <span class="java&#45;object">String</span> arg1, <span class="java&#45;object">String</span> arg2  &#125;</pre></div><p class="paragraph"/><div class="hidden-block">
Using demandExplicit should be the preferred method for mocking as it is more likely to catch issues when changing method signatures.  Use demand when the method to be mocked is added dynamically, otherwise use demandExplicit.
</div>
demandExplicitを使用することで、メソッドのシグネチャを変更した際に、問題を検出しやすくなります。このため、動的に追加されるメソッドに対してはdemandを使用し、そうでなければdemandExplicitを使用してください。<p class="paragraph"/><div class="hidden-block">
Lastly, the call:
</div>
最後に以下のコードを見てください。<p class="paragraph"/><div class="code"><pre>def looseControl = mockFor(MyService, <span class="java&#45;keyword">true</span>)</pre></div><p class="paragraph"/><div class="hidden-block">
will create a mock control object that has only loose expectations, i.e. the order that methods are invoked does not matter.
</div>
これはlooseなモック制御オブジェクトを作成します。別の言い方をすると、これにより呼び出し順序をチェックしなくなります。


<a name="12.1.7 Mocking Codecs"><!-- Legacy link --></a>
<h2 id="mockingCodecs">12.1.7 コーデックのモック化</h2>
<div class="hidden-block">
The <code>GrailsUnitTestMixin</code> provides a <code>mockCodec</code> method for mocking <a href="../guide/single.html#codecs" class="guide">custom codecs</a> which may be invoked while a unit test is running.
</div><p class="paragraph"/><code>GrailsUnitTestMixin</code>は<a href="../guide/single.html#codecs" class="guide">カスタムコーデック</a>のモックを生成するための<code>mockCodec</code>メソッドを提供しています。このメソッドはユニットテストの実施中に呼び出される可能性があります。<p class="paragraph"/><div class="code"><pre>mockCodec(MyCustomCodec)</pre></div><p class="paragraph"/><div class="hidden-block">
Failing to mock a codec which is invoked while a unit test is running may result in a MissingMethodException.
</div><p class="paragraph"/>コーデックのモック生成に失敗している場合は、ユニットテストが<code>MissingMethodException</code>で終了する可能性があります。


<a name="12.2 Integration Testing"><!-- Legacy link --></a>
<h2 id="integrationTesting">12.2 インテグレーションテスト</h2>
<div class="hidden-block">Integration tests differ from unit tests in that you have full access to the Grails environment within the test. Grails uses an in-memory H2 database for integration tests and clears out all the data from the database between tests.</div>
インテグレーションテストはGrails実行環境にフルアクセス可能なところが、ユニットテストとは異なっています。GrailsはインテグレーションテストのためにインメモリのH2データベースを使用するので、テスト毎にデータベースの全てのデータは消去されます。<p class="paragraph"/><div class="hidden-block">One thing to bear in mind is that logging is enabled for your application classes, but it is different from logging in tests. So if you have something like this:</div>
一つ心にとめておいて欲しいことは、テスト対象のアプリケーションクラスのロギングを有効にしたとしても、アプリケーション内で有効なロギングは、テスト内で有効なロギングとは異なります。もし、テスト中にログを取りたいならば以下のように記述します:<p class="paragraph"/><div class="code"><pre>class MyServiceTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;
    void testSomething() &#123;
        log.info <span class="java&#45;quote">"Starting tests"</span>
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">the "starting tests" message is logged using a different system than the one used by the application. The <code>log</code> property in the example above is an instance of <code>java.util.logging.Logger</code> (inherited from the base class, not injected by Grails), which doesn't have the same methods as the <code>log</code> property injected into your application artifacts. For example, it doesn't have <code>debug()</code> or <code>trace()</code> methods, and the equivalent of <code>warn()</code> is in fact <code>warning()</code>.</div>
"starting tests"のメッセージはアプリケーションが使っているのとは異なるロガーによりログが記録されます。上の例における<code>log</code>のプロパティには<code>java.util.logging.Logger</code>のインスタンスが設定され(Grailsによって注入されるのではなく、ベースクラスから継承される)、アプリケーション側で注入される<code>log</code>プロパティと同じメソッドは持っていません。例えば、<code>debug()</code>や<code>trace()</code>メソッドがなく、<code>warn()</code>(と同じ意味を持つもの)が<code>warning()</code>になります。<p class="paragraph"/><div class="hidden-block">h4. Transactions</div>
<h4>トランザクション</h4><p class="paragraph"/><div class="hidden-block">Integration tests run inside a database transaction by default, which is rolled back at the end of the each test. This means that data saved during a test is not persisted to the database. Add a <code>transactional</code> property to your test class to check transactional behaviour:</div>
インテグレーションテストはデフォルトでデータベーストランザクションの中で実行され、テスト毎にテストの最後でロールバックされます。つまり、テスト中に保存したデータはデータベースには永続化されないことを意味します。また、<code>transactional</code>プロパティをテストクラスに追加することで、トランザクション制御を抑止することができます:<p class="paragraph"/><div class="code"><pre>class MyServiceTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;
    <span class="java&#45;keyword">static</span> transactional = <span class="java&#45;keyword">false</span><p class="paragraph"/>    void testMyTransactionalServiceMethod() &#123;
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Be sure to remove any persisted data from a non-transactional test, for example in the <code>tearDown</code> method, so these tests don't interfere with standard transactional tests that expect a clean database.</div>
トランザクション管理されていないテストでは、クリーンなデータベースを期待している通常のテストに影響を与えないよう、<code>tearDown</code>メソッドなどで、永続化されたすべてのデータを削除するようにしてください。<p class="paragraph"/><div class="hidden-block">h4. Testing Controllers</div>
<h4>コントローラのテスト</h4><p class="paragraph"/><div class="hidden-block">To test controllers you first have to understand the Spring Mock Library.</div>
コントローラをテストするためには、まずSpringモックライブラリを理解する必要があります。<p class="paragraph"/><div class="hidden-block">Grails automatically configures each test with a <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html" class="api">MockHttpServletRequest</a>, <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletResponse.html" class="api">MockHttpServletResponse</a>, and <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpSession.html" class="api">MockHttpSession</a> that you can use in your tests. For example consider the following controller:</div>
Grailsは<a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html" class="api">MockHttpServletRequest</a>、<a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletResponse.html" class="api">MockHttpServletResponse</a>、<a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpSession.html" class="api">MockHttpSession</a>をテストで使えるように自動的に設定します。例えば、以下のコントローラを考えてみましょう:<p class="paragraph"/><div class="code"><pre>class FooController &#123;<p class="paragraph"/>    def text() &#123;
        render <span class="java&#45;quote">"bar"</span>
    &#125;<p class="paragraph"/>    def someRedirect() &#123;
        redirect(action:<span class="java&#45;quote">"bar"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The tests for this would be:</div>
このテストは次のようになるでしょう:<p class="paragraph"/><div class="code"><pre>class FooControllerTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;<p class="paragraph"/>    void testText() &#123;
        def fc = <span class="java&#45;keyword">new</span> FooController()
        fc.text()
        assertEquals <span class="java&#45;quote">"bar"</span>, fc.response.contentAsString
    &#125;<p class="paragraph"/>    void testSomeRedirect() &#123;
        def fc = <span class="java&#45;keyword">new</span> FooController()
        fc.someRedirect()
        assertEquals <span class="java&#45;quote">"/foo/bar"</span>, fc.response.redirectedUrl
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the above case <code>response</code> is an instance of <code>MockHttpServletResponse</code> which we can use to obtain the generated content with <code>contentAsString</code> (when writing to the response) or the redirected URL. These mocked versions of the Servlet API are completely mutable (unlike the real versions) and hence you can set properties on the request such as the <code>contextPath</code> and so on.</div>
上記の<code>response</code>は<code>MockHttpServletResponse</code>のインスタンスです。このインスタンスでは、レスポンスを書き出すときであれば<code>contentAsString</code>により生成されたコンテンツが取得でき、リダイレクトの場合はリダイレクトされたURLが取得できます。これらのServlet APIのモックバージョンは(実際のAPIとは異なり)何でも変更可能で、<code>contextPath</code>などリクエストのプロパティについても設定可能です。<p class="paragraph"/><div class="hidden-block">Grails <strong class="bold">does not</strong> invoke <a href="../guide/single.html#interceptors" class="guide">interceptors</a> or servlet filters when calling actions during integration testing. You should test interceptors and filters in isolation, using <a href="../guide/single.html#functionalTesting" class="guide">functional testing</a> if necessary.</div>
Grailsはインテグレーションテスト実行中にアクションを呼ぶ際、<strong class="bold">決して</strong><a href="../guide/single.html#interceptors" class="guide">インターセプター</a>やサーブレットフィルターを実行しません。もしテストが必要なら、<a href="../guide/single.html#functionalTesting" class="guide">ファンクショナルテスト</a>を使ってインターセプターやフィルターを個別にテストする必要があります。<p class="paragraph"/><div class="hidden-block">h4. Testing Controllers with Services</div>
<h4>サービスを伴うコントローラのテスト</h4><p class="paragraph"/><div class="hidden-block">If your controller references a service (or other Spring beans), you have to explicitly initialise the service from your test.</div>
もしコントローラがサービス(もしくは他のSpringビーン)を参照しているなら、テストにおいて明示的にサービスを初期化する必要があります。<p class="paragraph"/><div class="hidden-block">Given a controller using a service:</div>
サービスを使うコントローラがあるとします:<p class="paragraph"/><div class="code"><pre>class FilmStarsController &#123;
    def popularityService<p class="paragraph"/>    def update() &#123;
        // <span class="java&#45;keyword">do</span> something with popularityService
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The test for this would be:</div>
このテストは次のようになるでしょう:<p class="paragraph"/><div class="code"><pre>class FilmStarsTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;
    def popularityService<p class="paragraph"/>    void testInjectedServiceInController () &#123;
        def fsc = <span class="java&#45;keyword">new</span> FilmStarsController()
        fsc.popularityService = popularityService
        fsc.update()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Testing Controller Command Objects</div>
<h4>コマンドオブジェクトを使っているコントローラのテスト</h4><p class="paragraph"/><div class="hidden-block">With command objects you just supply parameters to the request and it will automatically do the command object work for you when you call your action with no parameters:</div>
コマンドオブジェクトを使っていて引数を指定せずアクションを呼び出す場合でも、リクエストにただパラメータを設定するだけで、自動的にコマンドオブジェクトは動作し設定されます:<p class="paragraph"/><div class="hidden-block">Given a controller using a command object:</div>
コマンドオブジェクトを使っているコントローラがあるとします:<p class="paragraph"/><div class="code"><pre>class AuthenticationController &#123;
    def signup(SignupForm form) &#123;
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You can then test it like this:</div>
この場合このようにテストできます:<p class="paragraph"/><div class="code"><pre>def controller = <span class="java&#45;keyword">new</span> AuthenticationController()
controller.params.login = <span class="java&#45;quote">"marcpalmer"</span>
controller.params.password = <span class="java&#45;quote">"secret"</span>
controller.params.passwordConfirm = <span class="java&#45;quote">"secret"</span>
controller.signup()</pre></div><p class="paragraph"/><div class="hidden-block">Grails auto-magically sees your call to <code>signup()</code> as a call to the action and populates the command object from the mocked request parameters. During controller testing, the <code>params</code> are mutable with a mocked request supplied by Grails.</div>
Grailsはアクション呼び出しの<code>signup()</code>を呼び出しているのを見て、モック化されたリクエストパラメータからなんと自動的にコマンドオブジェクトに値を渡してくれます。ちなみに、コントローラのテストにおいて、Grailsが用意したモック化されたリクエストの<code>params</code>は変更可能です。<p class="paragraph"/><div class="hidden-block">h4. Testing Controllers and the render Method</div>
<h4>コントローラとレンダーメソッドのテスト</h4><p class="paragraph"/><div class="hidden-block">The <a href="../ref/Controllers/render.html" class="controllers">render</a> method lets you render a custom view at any point within the body of an action. For instance, consider the example below:</div>
<a href="../ref/Controllers/render.html" class="controllers">render</a>メソッドはアクション定義のあらゆる場所においてカスタムビューをレンダリングできます。例えば、下記の例を考えてみましょう:<p class="paragraph"/><div class="code"><pre>def save() &#123;
    def book = Book(params)
    <span class="java&#45;keyword">if</span> (book.save()) &#123;
        // handle
    &#125;
    <span class="java&#45;keyword">else</span> &#123;
        render(view:<span class="java&#45;quote">"create"</span>, model:&#91;book:book&#93;)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In the above example the result of the model of the action is not available as the return value, but instead is stored within the <code>modelAndView</code> property of the controller. The <code>modelAndView</code> property is an instance of Spring MVC's <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/ModelAndView.html" target="blank">ModelAndView</a> class and you can use it to the test the result of an action:</div>
上記の例ではアクションにおけるモデルの結果は戻り値としては得られませんが、コントローラの<code>modelAndView</code>プロパティの中には保存されています。<code>modelAndView</code>プロパティはSpring MVCの<a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/ModelAndView.html" target="blank">ModelAndView</a>クラスで、アクションの結果をテストするのに利用できます:<p class="paragraph"/><div class="code"><pre>def bookController = <span class="java&#45;keyword">new</span> BookController()
bookController.save()
def model = bookController.modelAndView.model.book</pre></div><p class="paragraph"/><div class="hidden-block">h4. Simulating Request Data</div>
<h4>リクエストデータをシミュレートする</h4><p class="paragraph"/><div class="hidden-block">You can use the Spring <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html" class="api">MockHttpServletRequest</a> to test an action that requires request data, for example a REST web service. For example consider this action which performs data binding from an incoming request:</div>
例えば、REST Webサービスのようなリクエストデータが必要なアクションをテストする場合、Spring <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html" class="api">MockHttpServletRequest</a>を使うことができます。例として、入力されたリクエストからデータバインディングを実行するこのアクションを考えてみましょう:<p class="paragraph"/><div class="code"><pre>def create() &#123;
    &#91;book: <span class="java&#45;keyword">new</span> Book(params.book)&#93;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">To simulate the 'book' parameter as an XML request you could do something like the following:</div>
XMLリクエストとしての'book'引数をシミュレートするには、次のように実行できるでしょう:<p class="paragraph"/><div class="code"><pre>void testCreateWithXML() &#123;<p class="paragraph"/>    def controller = <span class="java&#45;keyword">new</span> BookController()<p class="paragraph"/>    controller.request.contentType = 'text/xml'
    controller.request.content = '''&#92;&#10;            &#60;?xml version=<span class="java&#45;quote">"1.0"</span> encoding=<span class="java&#45;quote">"ISO&#45;8859&#45;1"</span>?&#62;
            &#60;book&#62;
                &#60;title&#62;The Stand&#60;/title&#62;
                &#8230;
            &#60;/book&#62;
            '''.stripIndent().getBytes() // note we need the bytes<p class="paragraph"/>    def model = controller.create()
    assert model.book
    assertEquals <span class="java&#45;quote">"The Stand"</span>, model.book.title
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The same can be achieved with a JSON request:</div>
JSONリクエストについても同じように実現できます:<p class="paragraph"/><div class="code"><pre>void testCreateWithJSON() &#123;<p class="paragraph"/>    def controller = <span class="java&#45;keyword">new</span> BookController()<p class="paragraph"/>    controller.request.contentType = <span class="java&#45;quote">"application/json"</span>
    controller.request.content =
            '&#123;<span class="java&#45;quote">"id"</span>:1,<span class="java&#45;quote">"class"</span>:<span class="java&#45;quote">"Book"</span>,<span class="java&#45;quote">"title"</span>:<span class="java&#45;quote">"The Stand"</span>&#125;'.getBytes()<p class="paragraph"/>    def model = controller.create()
    assert model.book
    assertEquals <span class="java&#45;quote">"The Stand"</span>, model.book.title
&#125;</pre></div><p class="paragraph"/><div class="hidden-block"><blockquote class="note">
With JSON don't forget the <code>class</code> property to specify the name the target type to bind to. In XML this is implicit within the name of the <code>&#60;book&#62;</code> node, but this property is required as part of the JSON packet.
</blockquote></div>
<blockquote class="note">
JSONを用いる場合、<code>class</code>プロパティにて結びつけるターゲットの型の名前を指定することを忘れてはいけません。XMLでは暗黙的に<code>&#60;book&#62;</code>ノードの名前が使われますが、JSONではこのプロパティがJSONパケットの一部として必要になります。
</blockquote><p class="paragraph"/><div class="hidden-block">For more information on the subject of REST web services see the section on <a href="../guide/single.html#REST" class="guide">REST</a>.</div>
RESTウェブサービスについてのさらなる情報については、<a href="../guide/single.html#REST" class="guide">REST</a>のセクションを参照してください。<p class="paragraph"/><div class="hidden-block">h4. Testing Web Flows</div>
<h4>Webフローのテスト</h4><p class="paragraph"/><div class="hidden-block">Testing <a href="../guide/single.html#webflow" class="guide">Web Flows</a> requires a special test harness called <code>grails.test.WebFlowTestCase</code> which subclasses Spring Web Flow's <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/webflow/test/execution/AbstractFlowExecutionTests.html" class="api">AbstractFlowExecutionTests</a> class.</div>
<a href="../guide/single.html#webflow" class="guide">Webフロー</a>のテストは Spring Web Flowの <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/webflow/test/execution/AbstractFlowExecutionTests.html" class="api">AbstractFlowExecutionTests</a>クラスのサブクラスである<code>grails.test.WebFlowTestCase</code>と呼ばれる特別なテストハーネスが必要になります。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
Subclasses of <code>WebFlowTestCase</code> <strong class="bold">must</strong> be integration tests
</blockquote></div>
<blockquote class="note">
<code>WebFlowTestCase</code>のサブクラスは、<strong class="bold">必ず</strong>インテグレーションテストでなければなりません。
</blockquote><p class="paragraph"/><div class="hidden-block">For example given this simple flow:</div>
例えばこのようなシンプルなフローがあるとします:<p class="paragraph"/><div class="code"><pre>class ExampleController &#123;<p class="paragraph"/>    def exampleFlow() &#123;
        start &#123;
            on(<span class="java&#45;quote">"go"</span>) &#123;
                flow.hello = <span class="java&#45;quote">"world"</span>
            &#125;.to <span class="java&#45;quote">"next"</span>
        &#125;
        next &#123;
            on(<span class="java&#45;quote">"back"</span>).to <span class="java&#45;quote">"start"</span>
            on(<span class="java&#45;quote">"go"</span>).to <span class="java&#45;quote">"subber"</span>
        &#125;
        subber &#123;
            subflow(action: <span class="java&#45;quote">"sub"</span>)
            on(<span class="java&#45;quote">"end"</span>).to(<span class="java&#45;quote">"end"</span>)
        &#125;
        end()
    &#125;<p class="paragraph"/>    def subFlow() &#123;
        subSubflowState &#123;
            subflow(controller: <span class="java&#45;quote">"other"</span>, action: <span class="java&#45;quote">"otherSub"</span>)
            on(<span class="java&#45;quote">"next"</span>).to(<span class="java&#45;quote">"next"</span>)
        &#125;
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You need to tell the test harness what to use for the "flow definition". This is done via overriding the abstract <code>getFlow</code>
 method:</div>
抽象メソッド<code>getFlow</code>をオーバライドすることにより、"フロー定義"を使っていることをテストハーネスに知らせる必要があります:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.WebFlowTestCase<p class="paragraph"/>class ExampleFlowTests <span class="java&#45;keyword">extends</span> WebFlowTestCase &#123;
    def getFlow() &#123; <span class="java&#45;keyword">new</span> ExampleController().exampleFlow &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You can specify the flow id by overriding the <code>getFlowId</code> method, otherwise the default is <code>test</code>:</div>
<code>getFlowId</code>メソッドをオーバライドして、フローIDを指定することができます。指定しないならデフォルトとして<code>test</code>が使われます:
<div class="code"><pre><span class="java&#45;keyword">import</span> grails.test.WebFlowTestCase<p class="paragraph"/>class ExampleFlowTests <span class="java&#45;keyword">extends</span> WebFlowTestCase &#123;
    <span class="java&#45;object">String</span> getFlowId() &#123; <span class="java&#45;quote">"example"</span> &#125;
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">If the flow under test calls any subflows, these (or mocks) must be registered before the calling the flow:</div>
テストするフローがサブフローを呼び出す場合は、フローを呼び出す前にこれらフロー(もしくはモック)が登録済みでなければなりません:
<div class="code"><pre><span class="java&#45;keyword">protected</span> void setUp() &#123;
    <span class="java&#45;keyword">super</span>.setUp()<p class="paragraph"/>    registerFlow(<span class="java&#45;quote">"other/otherSub"</span>) &#123; // register a simplified mock
        start &#123;
            on(<span class="java&#45;quote">"next"</span>).to(<span class="java&#45;quote">"end"</span>)
        &#125;
        end()
    &#125;<p class="paragraph"/>    // register the original subflow
    registerFlow(<span class="java&#45;quote">"example/sub"</span>, <span class="java&#45;keyword">new</span> ExampleController().subFlow)
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Then you kick off the flow with the <code>startFlow</code> method:</div>
次に<code>startFlow</code>メソッドによりフローを開始します:<p class="paragraph"/><div class="code"><pre>void testExampleFlow() &#123;
    def viewSelection = startFlow()
    &#8230;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Use the <code>signalEvent</code> method to trigger an event:</div>
イベントのトリガーを引くために<code>signalEvent</code>を使います:<p class="paragraph"/><div class="code"><pre>void testExampleFlow() &#123;
    &#8230;
    signalEvent(<span class="java&#45;quote">"go"</span>)
    assert <span class="java&#45;quote">"next"</span> == flowExecution.activeSession.state.id
    assert <span class="java&#45;quote">"world"</span> == flowScope.hello
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Here we have signaled to the flow to execute the event "go" which causes a transition to the "next" state. In the example a transition action placed a <code>hello</code> variable into the flow scope.</div>
ここで、"next"の状態への遷移を引き起こす"go"イベントを実行するためにフローにシグナルを送ります。この例では、遷移アクションが<code>hello</code>変数をフローのスコープに設定します。<p class="paragraph"/><div class="hidden-block">h4. Testing Tag Libraries</div>
<h4>タグライブラリのテスト</h4><p class="paragraph"/><div class="hidden-block">Testing tag libraries is simple because when a tag is invoked as a method it returns its result as a string (technically a <code>StreamCharBuffer</code> but this class implements all of the methods of <code>String</code>). So for example if you have a tag library like this:</div>
タグライブラリのテストはタグがメソッドとして実行された結果として文字列(技術的には<code>String</code>の全てのメソッドを実装した<code>StreamCharBuffer</code>となります)が返されるので単純です。例えば、タグライブラリのテストはこのようになります:<p class="paragraph"/><div class="code"><pre>class FooTagLib &#123;<p class="paragraph"/>    def bar = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"&#60;p&#62;Hello World!&#60;/p&#62;"</span>
    &#125;<p class="paragraph"/>    def bodyTag = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;quote">"&#60;&#36;&#123;attrs.name&#125;&#62;"</span>
        out &#60;&#60; body()
        out &#60;&#60; <span class="java&#45;quote">"&#60;/&#36;&#123;attrs.name&#125;&#62;"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">The tests would look like:</div>
テストはこのようになるでしょう:<p class="paragraph"/><div class="code"><pre>class FooTagLibTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;<p class="paragraph"/>    void testBarTag() &#123;
        assertEquals <span class="java&#45;quote">"&#60;p&#62;Hello World!&#60;/p&#62;"</span>,
                     <span class="java&#45;keyword">new</span> FooTagLib().bar(<span class="java&#45;keyword">null</span>, <span class="java&#45;keyword">null</span>).toString()
    &#125;<p class="paragraph"/>    void testBodyTag() &#123;
        assertEquals <span class="java&#45;quote">"&#60;p&#62;Hello World!&#60;/p&#62;"</span>,
                     <span class="java&#45;keyword">new</span> FooTagLib().bodyTag(name: <span class="java&#45;quote">"p"</span>) &#123;
                         <span class="java&#45;quote">"Hello World!"</span>
                     &#125;.toString()
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">Notice that for the second example, <code>testBodyTag</code>, we pass a block that returns the body of the tag. This is convenient to representing the body as a String.</div>
2番目の<code>testBodyTag</code>の例を見てください。この例ではタグのボディを返すブロックを渡しています。これはタグ本体を文字列として表現するのに便利です。<p class="paragraph"/><div class="hidden-block">h4. Testing Tag Libraries with GroovyPagesTestCase</div>
<h4>GroovyPagesTestCaseを用いたタグライブラリのテスト</h4><p class="paragraph"/><div class="hidden-block">In addition to doing simple testing of tag libraries like in the above examples, you can also use the <code>grails.test.GroovyPagesTestCase</code> class to test tag libraries with integration tests.</div>
上記例のように単純なタグライブラリのテストに加えて、インテグレーションテストで<code>grails.test.GroovyPagesTestCase</code>クラスを用いたタグライブラリのテストが可能です。<p class="paragraph"/><div class="hidden-block">The <code>GroovyPagesTestCase</code> class is a subclass of the standard <code>GroovyTestCase</code> class and adds utility methods for testing the output of GSP rendering.</div>
<code>GroovyPagesTestCase</code>クラスは標準的な<code>GroovyTestCase</code>クラスのサブクラスであり、GSPレンダリングの出力をテストするためのユーティリティメソッドが追加されています。<p class="paragraph"/><div class="hidden-block"><blockquote class="note">
<code>GroovyPagesTestCase</code> can only be used in an integration test.
</blockquote></div>
<blockquote class="note">
<code>GroovyPagesTestCase</code>はインテグレーションテストの中だけで使えます。
</blockquote><p class="paragraph"/><div class="hidden-block">For example, consider this date formatting tag library:</div>
例えば、この日付フォーマットに関するタグライブラリを考えてみましょう:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> java.text.SimpleDateFormat<p class="paragraph"/>class FormatTagLib &#123;
    def dateFormat = &#123; attrs, body &#45;&#62;
        out &#60;&#60; <span class="java&#45;keyword">new</span> SimpleDateFormat(attrs.format) &#60;&#60; attrs.date
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">This can be easily tested as follows:</div>
次のように簡単にテストできます:<p class="paragraph"/><div class="code"><pre>class FormatTagLibTests <span class="java&#45;keyword">extends</span> GroovyPagesTestCase &#123;
    void testDateFormat() &#123;
        def template =
                '&#60;g:dateFormat format=<span class="java&#45;quote">"dd&#45;MM&#45;yyyy"</span> date=<span class="java&#45;quote">"&#36;&#123;myDate&#125;"</span> /&#62;'<p class="paragraph"/>        def testDate = &#8230; // create the date
        assertOutputEquals('01&#45;01&#45;2008', template, &#91;myDate:testDate&#93;)
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">You can also obtain the result of a GSP using the <code>applyTemplate</code> method of the <code>GroovyPagesTestCase</code> class:</div>
<code>GroovyPagesTestCase</code>クラスの<code>applyTemplate</code>メソッドを使ったGSPの結果も得ることもできます:<p class="paragraph"/><div class="code"><pre>class FormatTagLibTests <span class="java&#45;keyword">extends</span> GroovyPagesTestCase &#123;
    void testDateFormat() &#123;
        def template =
                '&#60;g:dateFormat format=<span class="java&#45;quote">"dd&#45;MM&#45;yyyy"</span> date=<span class="java&#45;quote">"&#36;&#123;myDate&#125;"</span> /&#62;'<p class="paragraph"/>        def testDate = &#8230; // create the date
        def result = applyTemplate(template, &#91;myDate:testDate&#93;)<p class="paragraph"/>        assertEquals '01&#45;01&#45;2008', result
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">h4. Testing Domain Classes</div>
<h4>ドメインクラスのテスト</h4><p class="paragraph"/><div class="hidden-block">Testing domain classes is typically a simple matter of using the <a href="../guide/single.html#GORM" class="guide">GORM API</a>, but there are a few things to be aware of. Firstly, when testing queries you often need to "flush" to ensure the correct state has been persisted to the database. For example take the following example:</div>
ドメインクラスのテストは一般的には<a href="../guide/single.html#GORM" class="guide">GORM API</a>を使った簡単なやり方で可能ですが、いくつか注意すべきことがあります。まず最初に、クエリをテストするときにはデータベースに正しい状態で確実に保存されるように、頻繁に"フラッシュ"をする必要があります。例えば、次の例を見てみましょう:<p class="paragraph"/><div class="code"><pre>void testQuery() &#123;
    def books = &#91;
            <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"The Stand"</span>),
            <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"The Shining"</span>)&#93;
    books&#42;.save()<p class="paragraph"/>    assertEquals 2, Book.list().size()
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">This test will fail because calling <a href="../ref/Domain Classes/save.html" class="domainClasses">save</a> does not actually persist the <code>Book</code> instances when called. Calling <code>save</code> only indicates to Hibernate that at some point in the future these instances should be persisted. To commit changes immediately you "flush" them:</div>
このテストは<a href="../ref/Domain Classes/save.html" class="domainClasses">save</a>を呼び出していても、<code>Book</code>インスタンスが呼び出されたときには実際には保存されていないので失敗するでしょう。<code>save</code>を呼び出しても単にHibernateに未来のある時点でインスタンスが保存されるべきであることを示唆するだけです。ただちに変更をコミットするためには"フラッシュ"をします:<p class="paragraph"/><div class="code"><pre>void testQuery() &#123;
    def books = &#91;
            <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"The Stand"</span>),
            <span class="java&#45;keyword">new</span> Book(title: <span class="java&#45;quote">"The Shining"</span>)&#93;
    books&#42;.save(flush: <span class="java&#45;keyword">true</span>)<p class="paragraph"/>    assertEquals 2, Book.list().size()
&#125;</pre></div><p class="paragraph"/><div class="hidden-block">In this case since we're passing the argument <code>flush</code> with a value of <code>true</code> the updates will be persisted immediately and hence will be available to the query later on.</div>
このケースでは引数<code>flush</code>に<code>true</code>を渡しているので、データの更新はただちに保存され、後のクエリでも利用可能になります。


<a name="12.3 Functional Testing"><!-- Legacy link --></a>
<h2 id="functionalTesting">12.3 ファンクショナルテスト</h2>
Functional tests involve making HTTP requests against the running application and verifying the resultant behaviour. The functional testing phase differs from the integration phase in that the Grails application is now listening and responding to actual HTTP requests. This is useful for end-to-end testing scenarios, such as making REST calls against a JSON API.<p class="paragraph"/><div class="hidden-block">Grails does not ship with any support for writing functional tests directly, but there are several plugins available for this.</div>
Grailsはファンクショナルテストを書くための直接的なサポートは提供しませんが、ファンクショナルテストのためのいくつかのプラグインが利用可能です。
<ul class="star">
<li><code>Canoo Webtest</code> - <a href="http://grails.org/plugin/webtest" target="blank">http://grails.org/plugin/webtest</a></li>
<li><code>G-Func</code> - <a href="http://grails.org/plugin/functional-test" target="blank">http://grails.org/plugin/functional-test</a></li>
<li><code>Geb</code> - <a href="http://grails.org/plugin/geb" target="blank">http://grails.org/plugin/geb</a></li>
<li><code>Selenium-RC</code> - <a href="http://grails.org/plugin/selenium-rc" target="blank">http://grails.org/plugin/selenium-rc</a></li>
<li><code>WebDriver</code> - <a href="http://grails.org/plugin/webdriver" target="blank">http://grails.org/plugin/webdriver</a></li>
</ul><p class="paragraph"/><div class="hidden-block">Consult the documentation for each plugin for its capabilities.</div>
それぞれのプラグインでできることはドキュメントを参照してください。<p class="paragraph"/><div class="hidden-block">h4. Common Options</div>
<h4>共通オプション</h4><p class="paragraph"/><div class="hidden-block">There are options that are common to all plugins that control how the Grails application is launched, if at all.</div>
全てのプラグインに共通のGrailsアプリケーションの起動を制御するオプションがあります。<p class="paragraph"/><div class="hidden-block">h5. inline</div>
<h5>inlineオプション</h5><p class="paragraph"/><div class="hidden-block">The <code>-inline</code> option specifies that the grails application should be started inline (i.e. like <code>run-app</code>).</div>
<code>-inline</code>オプションが指定されるとGrailsアプリケーションがインライン起動されます(例えば<code>run-app</code>のような)。<p class="paragraph"/><div class="hidden-block"><strong class="bold">This option is implicitly set unless the <code>baseUrl</code> or <code>war</code> options are set</strong></div>
<strong class="bold"><code>-inline</code>オプションは<code>-baseUrl</code>か<code>-war</code>のどちらかが設定されていないと、暗黙的に有効になります</strong><p class="paragraph"/><div class="hidden-block">h5. war</div>
<h5>warオプション</h5><p class="paragraph"/><div class="hidden-block">The <code>-war</code> option specifies that the grails application should be packaged as a war and started. This is useful as it tests your application in a production-like state, but it has a longer startup time than the <code>-inline</code> option. It also runs the war in a forked JVM, meaning that you cannot access any internal application objects.</div>
<code>-war</code>オプションを指定すると、Grailsアプリケーションはwarファイルにパッケージ化した後に起動されます。このオプションはアプリケーションを実際にプロダクトと同じ状態でテストすることができるので便利です。しかし、<code>-inline</code>オプションよりも起動に時間がかかります。また、warで起動するとフォークされたJVM上で実行されます。これは内部のオブジェクトにアクセスできないことを意味しています。<p class="paragraph"/><div class="code"><pre>grails test&#45;app functional: &#45;war</pre></div><p class="paragraph"/><div class="hidden-block">Note that the same build/config options for the <a href="../ref/Command Line/run-war.html" class="commandLine">run-war</a> command apply to functional testing against the WAR.</div>
<a href="../ref/Command Line/run-war.html" class="commandLine">run-war</a>コマンドで利用可能なビルドまたは設定オプションが、warファイルに対するファンクショナルテストでも使用できます。<p class="paragraph"/><div class="hidden-block">h5. https</div>
<h5>httpsオプション</h5><p class="paragraph"/><div class="hidden-block">The <code>-https</code> option results in the application being able to receive https requests as well as http requests. It is compatible with both the <code>-inline</code> and <code>-war</code> options.</div>
<code>-https</code>オプションはhttpリクエストと同様にアプリケーションがhttpsリクエストを受け付けられるようにします。このオプションは<code>-inline</code>と<code>-war</code>の両方のオプションと一緒に使うことができます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app functional: &#45;https</pre></div><p class="paragraph"/><div class="hidden-block">Note that this does not change the test  <em class="italic">base url</em>  to be https, it will still be http unless the <code>-httpsBaseUrl</code> option is also given.</div>
<code>-https</code>オプションを使っていてもテストで使われる  <em class="italic">base url</em>  はhttpsにはなりません。<code>-httpsBaseUrl</code>をあわせて指定しない限り、httpのままとなります。<p class="paragraph"/><div class="hidden-block">h5. httpsBaseUrl</div>
<h5>httpsBaseUrlオプション</h5><p class="paragraph"/><div class="hidden-block">The <code>-httpsBaseUrl</code> causes the implicit base url to be used for tests to be a https url.</div>
<code>-httpsBaseUrl</code>オプションを使えば暗黙的に設定されている  <em class="italic">base url</em>  がテスト時にhttpsのURLとして使われます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app functional: &#45;httpsBaseUrl</pre></div><p class="paragraph"/><div class="hidden-block">This option is ignored if the <code>-baseUrl</code> option is specified.</div>
<code>-httpsBaseUrl</code>オプションは<code>-baseUrl</code>オプションが指定されると無視されます。<p class="paragraph"/><div class="hidden-block">h5. baseUrl</div>
<h5>baseUrlオプション</h5><p class="paragraph"/><div class="hidden-block">The <code>baseUrl</code> option allows the base url for tests to be specified.</div>
<code>-baseUrl</code>オプションによりテスト実施時の  <em class="italic">base url</em>  を指定することができます。<p class="paragraph"/><div class="code"><pre>grails test&#45;app functional: &#45;baseUrl=http://mycompany.com/grailsapp</pre></div><p class="paragraph"/><div class="hidden-block">This option will prevent the local grails application being started unless <code>-inline</code> or <code>-war</code> are given as well. To use a custom base url but still test against the local Grails application you <strong class="bold">must</strong> specify one of either the <code>-inline</code> or <code>-war</code> options.</div>
<code>-baseUrl</code>オプションが指定されていると、ローカル環境でのGrailsアプリケーションを<code>-inline</code>や<code>-war</code>を指定しないで起動することができなくなります。ローカル環境でのGrailsアプリケーションで  <em class="italic">base url</em>  を指定するには、<strong class="bold">必ず</strong><code>-inline</code>か<code>-war</code>のどちらかのオプションを指定する必要があります。



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/services.html">&lt;&lt; <strong>11</strong><span>&#12469;&#12540;&#12499;&#12473;&#12524;&#12452;&#12516;&#12540;</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/i18n.html"><strong>13</strong><span>&#22269;&#38555;&#21270;</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Command%20Line/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/add-proxy.html">add-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/alias.html">alias</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/bootstrap.html">bootstrap</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/bug-report.html">bug-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/clean-all.html">clean-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/clean.html">clean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/clear-proxy.html">clear-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/compile.html">compile</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/console.html">console</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-app.html">create-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-controller.html">create-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-domain-class.html">create-domain-class</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-filters.html">create-filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-hibernate-cfg-xml.html">create-hibernate-cfg-xml</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-integration-test.html">create-integration-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-multi-project-build.html">create-multi-project-build</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-plugin.html">create-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-pom.html">create-pom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-scaffold-controller.html">create-scaffold-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-script.html">create-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-service.html">create-service</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-tag-lib.html">create-tag-lib</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-unit-test.html">create-unit-test</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/dependency-report.html">dependency-report</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/doc.html">doc</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-all.html">generate-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-controller.html">generate-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-views.html">generate-views</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/help.html">help</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/init.html">init</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/install-dependency.html">install-dependency</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/install-plugin.html">install-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/install-templates.html">install-templates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/integrate-with.html">integrate-with</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/interactive.html">interactive</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/list-plugin-updates.html">list-plugin-updates</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/list-plugins.html">list-plugins</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/migrate-docs.html">migrate-docs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/package-plugin.html">package-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/package.html">package</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/plugin-info.html">plugin-info</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/refresh-dependencies.html">refresh-dependencies</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/remove-proxy.html">remove-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/run-app.html">run-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/run-script.html">run-script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/run-war.html">run-war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/schema-export.html">schema-export</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/set-proxy.html">set-proxy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/set-version.html">set-version</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/shell.html">shell</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/stats.html">stats</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/stop-app.html">stop-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/test-app.html">test-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/uninstall-plugin.html">uninstall-plugin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/upgrade.html">upgrade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/war.html">war</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/wrapper.html">wrapper</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Constraints</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Constraints/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Constraints/attributes.html">attributes</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/bindable.html">bindable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/blank.html">blank</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/creditCard.html">creditCard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/email.html">email</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/inList.html">inList</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/matches.html">matches</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/max.html">max</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/maxSize.html">maxSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/min.html">min</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/minSize.html">minSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/notEqual.html">notEqual</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/nullable.html">nullable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/range.html">range</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/scale.html">scale</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/size.html">size</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/unique.html">unique</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/url.html">url</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/validator.html">validator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Constraints/widget.html">widget</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Controllers</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Controllers/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Controllers/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/afterInterceptor.html">afterInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/allowedMethods.html">allowedMethods</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/beforeInterceptor.html">beforeInterceptor</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/bindData.html">bindData</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/chain.html">chain</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/defaultAction.html">defaultAction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/forward.html">forward</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/grailsApplication.html">grailsApplication</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/namespace.html">namespace</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/redirect.html">redirect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/respond.html">respond</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/responseFormats.html">responseFormats</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/scope.html">scope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/session.html">session</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/withForm.html">withForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controllers/withFormat.html">withFormat</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Database Mapping</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Database%20Mapping/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/autoImport.html">autoImport</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/autoTimestamp.html">autoTimestamp</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/batchSize.html">batchSize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/cache.html">cache</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/cascade.html">cascade</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/column.html">column</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/comment.html">comment</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/discriminator.html">discriminator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/dynamicInsert.html">dynamicInsert</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/dynamicUpdate.html">dynamicUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/fetch.html">fetch</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/id.html">id</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/ignoreNotFound.html">ignoreNotFound</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/indexColumn.html">indexColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/insertable.html">insertable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/joinTable.html">joinTable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/lazy.html">lazy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/order.html">order</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/sort.html">sort</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/table.html">table</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/type.html">type</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/updateable.html">updateable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Database%20Mapping/version.html">version</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Classes</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Domain%20Classes/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/addTo.html">addTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/attach.html">attach</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/belongsTo.html">belongsTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/clearErrors.html">clearErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/constraints.html">constraints</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/count.html">count</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/countBy.html">countBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/createCriteria.html">createCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/delete.html">delete</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/discard.html">discard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/embedded.html">embedded</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/errors.html">errors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/executeQuery.html">executeQuery</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/executeUpdate.html">executeUpdate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/exists.html">exists</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/fetchMode.html">fetchMode</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/find.html">find</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findAllBy.html">findAllBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findAllWhere.html">findAllWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findBy.html">findBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/findWhere.html">findWhere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/first.html">first</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/get.html">get</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/getAll.html">getAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/getDirtyPropertyNames.html">getDirtyPropertyNames</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/getPersistentValue.html">getPersistentValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/hasMany.html">hasMany</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/hasOne.html">hasOne</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/ident.html">ident</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/instanceOf.html">instanceOf</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/isAttached.html">isAttached</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/isDirty.html">isDirty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/last.html">last</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/list.html">list</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/listOrderBy.html">listOrderBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/load.html">load</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/lock.html">lock</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/mapWith.html">mapWith</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/mappedBy.html">mappedBy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/mapping.html">mapping</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/merge.html">merge</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/namedQueries.html">namedQueries</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/properties.html">properties</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/read.html">read</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/refresh.html">refresh</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/removeFrom.html">removeFrom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/save.html">save</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/transients.html">transients</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/validate.html">validate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/where.html">where</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/whereAny.html">whereAny</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/withCriteria.html">withCriteria</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/withNewSession.html">withNewSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/withSession.html">withSession</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/withTransaction.html">withTransaction</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Plug-ins</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Plug-ins/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/URL%20mappings.html">URL mappings</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/codecs.html">codecs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/controllers.html">controllers</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/core.html">core</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/dataSource.html">dataSource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/domainClasses.html">domainClasses</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/filters.html">filters</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/hibernate.html">hibernate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/i18n.html">i18n</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/logging.html">logging</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/scaffolding.html">scaffolding</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/services.html">services</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/servlets.html">servlets</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Plug-ins/web%20flow.html">web flow</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Services</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Services/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Services/scope.html">scope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Services/transactional.html">transactional</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Servlet API</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Servlet%20API/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Servlet%20API/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Servlet%20API/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Servlet%20API/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tag Libraries</h1><div class="menu-sub">
                        
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/Usage.html">Usage</a></div>
                            
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/actionName.html">actionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/controllerName.html">controllerName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/flash.html">flash</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/pageScope.html">pageScope</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/params.html">params</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/request.html">request</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/response.html">response</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/servletContext.html">servletContext</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tag%20Libraries/session.html">session</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Tags/actionSubmit.html">actionSubmit</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/actionSubmitImage.html">actionSubmitImage</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/applyLayout.html">applyLayout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/checkBox.html">checkBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/collect.html">collect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/cookie.html">cookie</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/country.html">country</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/countrySelect.html">countrySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/createLink.html">createLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/createLinkTo.html">createLinkTo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/currencySelect.html">currencySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/datePicker.html">datePicker</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/each.html">each</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachError.html">eachError</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/else.html">else</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/elseif.html">elseif</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/external.html">external</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/field.html">field</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/fieldValue.html">fieldValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/findAll.html">findAll</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/form.html">form</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/formRemote.html">formRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/formatBoolean.html">formatBoolean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/formatDate.html">formatDate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/formatNumber.html">formatNumber</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/grep.html">grep</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/hasErrors.html">hasErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/header.html">header</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/hiddenField.html">hiddenField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/if.html">if</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/img.html">img</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/include.html">include</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/isAvailable.html">isAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/isNotAvailable.html">isNotAvailable</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/javascript.html">javascript</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/join.html">join</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/layoutBody.html">layoutBody</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/layoutHead.html">layoutHead</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/layoutTitle.html">layoutTitle</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/localeSelect.html">localeSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/message.html">message</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/meta.html">meta</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/pageProperty.html">pageProperty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/paginate.html">paginate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/passwordField.html">passwordField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/radio.html">radio</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/radioGroup.html">radioGroup</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/remoteField.html">remoteField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/remoteFunction.html">remoteFunction</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/remoteLink.html">remoteLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/renderErrors.html">renderErrors</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/resource.html">resource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/select.html">select</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/set.html">set</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/setProvider.html">setProvider</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/sortableColumn.html">sortableColumn</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/submitButton.html">submitButton</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/submitToRemote.html">submitToRemote</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/textArea.html">textArea</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/textField.html">textField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/timeZoneSelect.html">timeZoneSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/unless.html">unless</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/uploadForm.html">uploadForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/while.html">while</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. <br/>[注意]このGrails日本語ドキュメントは、有志による翻訳というよりは意訳なドキュメントです。 Grails日本語ドキュメントに関するお問い合わせ、ドキュメントプロジェクトに参加したい等の問い合わせは。 twitter: @tyama 迄<br/>
    Sponsored by <a href="http://springsource.com">SpringSource</a>
</div>

<script type="text/javascript" src="../../js/docs.js"></script>

</body>
</html>
